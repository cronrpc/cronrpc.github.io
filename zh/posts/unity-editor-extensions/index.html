<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Unity Editor Extensions | cronrpc ä¸­æ–‡</title>
<meta name=keywords content="Unity"><meta name=description content="é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œç¼–è¾‘å™¨å¼€å‘çš„çŸ¥è¯†è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ­£ç¡®çš„å­¦ä¹ æ–¹å¼è¿˜æ˜¯ä»å®è·µå…¥æ‰‹ï¼Œç”¨æŸ¥å·¥å…·ä¸€æ ·çš„æ–¹å¼å»å­¦ä¹ ä½¿ç”¨ã€‚
1. Unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯†
1.1 ä»€ä¹ˆæ˜¯æ³¨è§£ï¼ˆAttributeï¼‰ï¼Ÿ
æ³¨è§£ï¼ˆAttributeï¼‰ æ˜¯ C# æä¾›çš„ä¸€ç§å…ƒæ•°æ®ï¼ˆMetadataï¼‰æœºåˆ¶ï¼Œç”¨äºåœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µã€å±æ€§ç­‰ä¸Šé™„åŠ é¢å¤–çš„ä¿¡æ¯ã€‚"><meta name=author content="cronrpc"><link rel=canonical href=https://cronrpc.github.io/zh/posts/unity-editor-extensions/><link crossorigin=anonymous href=/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css integrity="sha256-IhHKMWS+eDACT2qtKzouUghDpk+PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as=style><link rel=icon href=https://cronrpc.github.io/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cronrpc.github.io/icons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cronrpc.github.io/icons/favicon-32x32.png><link rel=apple-touch-icon href=https://cronrpc.github.io/icons/apple-touch-icon.png><link rel=mask-icon href=https://cronrpc.github.io/icons/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://cronrpc.github.io/zh/posts/unity-editor-extensions/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><meta property="og:url" content="https://cronrpc.github.io/zh/posts/unity-editor-extensions/"><meta property="og:site_name" content="cronrpc ä¸­æ–‡"><meta property="og:title" content="Unity Editor Extensions"><meta property="og:description" content="é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œç¼–è¾‘å™¨å¼€å‘çš„çŸ¥è¯†è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ­£ç¡®çš„å­¦ä¹ æ–¹å¼è¿˜æ˜¯ä»å®è·µå…¥æ‰‹ï¼Œç”¨æŸ¥å·¥å…·ä¸€æ ·çš„æ–¹å¼å»å­¦ä¹ ä½¿ç”¨ã€‚
1. Unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯† 1.1 ä»€ä¹ˆæ˜¯æ³¨è§£ï¼ˆAttributeï¼‰ï¼Ÿ æ³¨è§£ï¼ˆAttributeï¼‰ æ˜¯ C# æä¾›çš„ä¸€ç§å…ƒæ•°æ®ï¼ˆMetadataï¼‰æœºåˆ¶ï¼Œç”¨äºåœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µã€å±æ€§ç­‰ä¸Šé™„åŠ é¢å¤–çš„ä¿¡æ¯ã€‚"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-11-12T15:01:44+08:00"><meta property="article:modified_time" content="2025-11-12T15:01:44+08:00"><meta property="article:tag" content="Unity"><meta property="og:image" content="https://cronrpc.github.io/cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cronrpc.github.io/cover.png"><meta name=twitter:title content="Unity Editor Extensions"><meta name=twitter:description content="é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œç¼–è¾‘å™¨å¼€å‘çš„çŸ¥è¯†è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ­£ç¡®çš„å­¦ä¹ æ–¹å¼è¿˜æ˜¯ä»å®è·µå…¥æ‰‹ï¼Œç”¨æŸ¥å·¥å…·ä¸€æ ·çš„æ–¹å¼å»å­¦ä¹ ä½¿ç”¨ã€‚
1. Unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯†
1.1 ä»€ä¹ˆæ˜¯æ³¨è§£ï¼ˆAttributeï¼‰ï¼Ÿ
æ³¨è§£ï¼ˆAttributeï¼‰ æ˜¯ C# æä¾›çš„ä¸€ç§å…ƒæ•°æ®ï¼ˆMetadataï¼‰æœºåˆ¶ï¼Œç”¨äºåœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µã€å±æ€§ç­‰ä¸Šé™„åŠ é¢å¤–çš„ä¿¡æ¯ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://cronrpc.github.io/zh/posts/"},{"@type":"ListItem","position":2,"name":"Unity Editor Extensions","item":"https://cronrpc.github.io/zh/posts/unity-editor-extensions/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Unity Editor Extensions","name":"Unity Editor Extensions","description":"é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œç¼–è¾‘å™¨å¼€å‘çš„çŸ¥è¯†è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ­£ç¡®çš„å­¦ä¹ æ–¹å¼è¿˜æ˜¯ä»å®è·µå…¥æ‰‹ï¼Œç”¨æŸ¥å·¥å…·ä¸€æ ·çš„æ–¹å¼å»å­¦ä¹ ä½¿ç”¨ã€‚\n1. Unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯† 1.1 ä»€ä¹ˆæ˜¯æ³¨è§£ï¼ˆAttributeï¼‰ï¼Ÿ æ³¨è§£ï¼ˆAttributeï¼‰ æ˜¯ C# æä¾›çš„ä¸€ç§å…ƒæ•°æ®ï¼ˆMetadataï¼‰æœºåˆ¶ï¼Œç”¨äºåœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µã€å±æ€§ç­‰ä¸Šé™„åŠ é¢å¤–çš„ä¿¡æ¯ã€‚\n","keywords":["Unity"],"articleBody":"é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œç¼–è¾‘å™¨å¼€å‘çš„çŸ¥è¯†è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ­£ç¡®çš„å­¦ä¹ æ–¹å¼è¿˜æ˜¯ä»å®è·µå…¥æ‰‹ï¼Œç”¨æŸ¥å·¥å…·ä¸€æ ·çš„æ–¹å¼å»å­¦ä¹ ä½¿ç”¨ã€‚\n1. Unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯† 1.1 ä»€ä¹ˆæ˜¯æ³¨è§£ï¼ˆAttributeï¼‰ï¼Ÿ æ³¨è§£ï¼ˆAttributeï¼‰ æ˜¯ C# æä¾›çš„ä¸€ç§å…ƒæ•°æ®ï¼ˆMetadataï¼‰æœºåˆ¶ï¼Œç”¨äºåœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µã€å±æ€§ç­‰ä¸Šé™„åŠ é¢å¤–çš„ä¿¡æ¯ã€‚\nåœ¨ Unity ç¼–è¾‘å™¨å¼€å‘ä¸­ï¼Œæ³¨è§£å¸¸ç”¨äºå‘Šè¯‰ Unity æˆ–è‡ªå®šä¹‰çš„ç¼–è¾‘å™¨è„šæœ¬å¦‚ä½•å¤„ç†æŸä¸ªå¯¹è±¡æˆ–æ–¹æ³•ã€‚\n[Serializable] public class PlayerData { public int health; public int score; } [SerializeField] private int health = 100; [Range(0, 10)] public float speed = 5f; [MenuItem(\"Tools/Run Custom Action\")] public static void Run() { ... } è¿™é‡Œçš„ [Serializable] å‘Šè¯‰ Unity è¿™ä¸ªç±»å¯ä»¥è¢«åºåˆ—åŒ–ï¼Œä»è€Œèƒ½åœ¨ Inspector ä¸­æ˜¾ç¤ºã€‚\n1.2 å¦‚ä½•ç»™ç±»ä¸ç±»çš„æ–¹æ³•åŠ æ³¨è§£ ä½ å¯ä»¥åœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µæˆ–å±æ€§å‰åŠ ä¸Šæ–¹æ‹¬å· [] æ¥å£°æ˜æ³¨è§£ã€‚\n// ç»™ç±»åŠ æ³¨è§£ [MyCustom(\"Player Class\")] public class Player { // ç»™å­—æ®µåŠ æ³¨è§£ [Range(0, 100)] public int health; // ç»™æ–¹æ³•åŠ æ³¨è§£ [MyCustom(\"Init Method\")] public void Initialize() { Debug.Log(\"Player initialized\"); } } // è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ç±» [System.AttributeUsage(System.AttributeTargets.Class | System.AttributeTargets.Method)] public class MyCustomAttribute : System.Attribute { public string Description { get; } public MyCustomAttribute(string description) { Description = description; } } ä¸Šä¾‹ä¸­ï¼š\nMyCustomAttribute æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£ï¼› [MyCustom(\"xxx\")] è¡¨ç¤ºåœ¨ç±»æˆ–æ–¹æ³•ä¸Šé™„åŠ é¢å¤–è¯´æ˜ä¿¡æ¯ã€‚ æ³¨æ„è¿™é‡Œçš„å‘½åæ—¶å¯ä»¥çœç•¥ Attributeï¼Œä½¿ç”¨æ—¶ä¹Ÿå¯ä»¥çœç•¥ Attributeï¼Œå‰ææ˜¯æ— æ­§ä¹‰ã€‚ 1.3 å¦‚ä½•è¯»å–æ³¨è§£ è¯»å–æ³¨è§£é€šå¸¸é€šè¿‡ åå°„ï¼ˆReflectionï¼‰ å®ç°ã€‚\nusing System; using System.Reflection; using UnityEngine; public class AttributeReader { [MyCustom(\"Example Method\")] public void Example() { } [ContextMenu(\"Test Read Attributes\")] void TestRead() { // è·å–ç±»å‹ Type type = typeof(AttributeReader); // éå†æ–¹æ³• foreach (MethodInfo method in type.GetMethods(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance)) { // è·å–è‡ªå®šä¹‰æ³¨è§£ MyCustomAttribute attr = method.GetCustomAttribute\u003cMyCustomAttribute\u003e(); if (attr != null) { Debug.Log($\"æ–¹æ³• {method.Name} çš„æè¿°ä¸º: {attr.Description}\"); } } } } è¿è¡Œåä¼šåœ¨ Unity æ§åˆ¶å°è¾“å‡ºæ³¨è§£å†…å®¹ã€‚\nè¿™åœ¨ç¼–è¾‘å™¨å·¥å…·ä¸­éå¸¸å¸¸è§ï¼Œæ¯”å¦‚æ‰«æé¡¹ç›®ä¸­æ‰€æœ‰æ‰“äº†æŸä¸ªæ ‡ç­¾çš„ç±»å¹¶è‡ªåŠ¨æ³¨å†Œã€‚\n2. è‡ªå®šä¹‰ Inspector 2.1 åˆ©ç”¨ Attribute ç›´æ¥æ§åˆ¶ åˆ©ç”¨ Attribute å¯ä»¥ç›´æ¥æ¥è®¾ç½® Inspector è€Œä¸ç”¨å•ç‹¬ç¼–å†™æ•´ä¸ªç•Œé¢ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š\nusing UnityEngine; public class TheAttributeSample : MonoBehaviour { [Header(\"åŸºç¡€æ˜¾ç¤º\")] [SerializeField, Tooltip(\"ç§»åŠ¨é€Ÿåº¦ (0~10)\")] [Range(0, 10)] private float moveSpeed = 5f; [Space] [Header(\"å¤šè¡Œæ–‡æœ¬\")] [TextArea(2, 5)] public string description = \"è¯´æ˜æ–‡å­—\"; [ContextMenu(\"é‡ç½®å‚æ•°\")] private void ResetValues() { moveSpeed = 5f; description = \"è¯´æ˜æ–‡å­—\"; Debug.Log(\"å·²é‡ç½®å‚æ•°\"); } [Space] [Header(\"ä¸Šä¸‹æ–‡æŒ‰é’®\")] [ContextMenuItem(\"éšæœºåŒ–æ•°å€¼\", \"RandomizeValue\")] public int score = 10; private void RandomizeValue() =\u003e score = Random.Range(0, 100); [Space] [Header(\"é¢œè‰²ä¸æšä¸¾\")] public Color colorValue = Color.green; public Mode currentMode = Mode.Attack; public enum Mode { Idle, Attack, Defend } [Space] [Header(\"å¼•ç”¨ä¸æ•°ç»„\")] public Transform target; public GameObject[] enemyList; } åœ¨ä¿®æ”¹åï¼š\nHeader æ·»åŠ ä¸€ä¸ªæ ‡é¢˜ Space æ˜¯ç©ºè¡Œ [Range(0, 100)] å’Œ [TextArea()] æ˜¯å…·ä½“çš„ç•Œé¢æ ·å¼è°ƒæ•´ã€‚ [Tooltip(\"xxx\")] æ˜¯é¼ æ ‡ç§»åŠ¨ä¸Šå»çš„æç¤ºã€‚ ContextMenu é‡ç½®å‚æ•°æŒ‰é’®æ§åˆ¶çš„æ˜¯ç»„ä»¶é‚£ä¸ªåœ°æ–¹ã€‚\nContextMenuItem æ˜¯åœ¨å±æ€§çš„å³é”®èœå•ä¸­ã€‚\n2.2 CustomEditor / è‡ªå®šä¹‰ç•Œé¢çš„æ–¹æ³• å‰é¢çš„ Attribute ä¸é€»è¾‘ä»£ç è¿˜æ˜¯è´´åœ¨ä¸€èµ·çš„ï¼Œå¾ˆæ–¹ä¾¿ä½†æ˜¯è‡ªå®šä¹‰ç¨‹åº¦è¿˜ä¸å¤Ÿã€‚\næˆ‘ä»¬å¯ä»¥ä¸“é—¨ä¸ºä¸€ä¸ª Component æ¥ç¼–å†™å®ƒçš„ Inspectorï¼Œä¸‹é¢å°±æ¥ä»‹ç»è¿™ç§æ–¹æ³•ã€‚\né¦–å…ˆè¦ç¡®ä¿æˆ‘ä»¬çš„ä»£ç çš„ .cs æ–‡ä»¶éœ€è¦æ”¾åœ¨ä»»æ„çš„åä¸º Editor çš„æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œç„¶åä½¿ç”¨ CustomEditor æ¥å®ç°è‡ªå®šä¹‰ç»˜åˆ¶ã€‚\nusing System; using UnityEngine; using UnityEditor; [CustomEditor(typeof(TheAttributeSample))] // å…³è”è„šæœ¬ç±»å‹ public class TheAttributeSampleEditor : Editor { SerializedProperty moveSpeed; private void OnEnable() { moveSpeed = serializedObject.FindProperty(\"moveSpeed\"); } public override void OnInspectorGUI() { // 1. æ›´æ–°åºåˆ—åŒ–å¯¹è±¡ serializedObject.Update(); // 2. ç»˜åˆ¶é»˜è®¤å±æ€§ DrawDefaultInspector(); // 3. è‡ªå®šä¹‰æŒ‰é’® if (GUILayout.Button(\"æ‰“å°ç§»åŠ¨é€Ÿåº¦\")) { Debug.Log(\"MoveSpeed = \" + moveSpeed.floatValue); } // 4. åº”ç”¨ä¿®æ”¹ serializedObject.ApplyModifiedProperties(); } } [CustomEditor(typeof(TheAttributeSample))] è¡¨ç¤ºå…³è”çš„ç±»æ˜¯ TheAttributeSample OnInspectorGUI ä¼šåœ¨æ˜¾ç¤ºå’Œè¾“å…¥æ›´æ”¹æ—¶è°ƒç”¨ã€‚ OnInspectorGUI æ˜¯ override æ„å‘³ç€å¯ä»¥é€šè¿‡ base.OnInspectorGUI() æ¥è¡¨ç¤ºé»˜è®¤ç•Œé¢ã€‚ è¿™é‡Œè¿˜æœ‰ä¸ªç¨å¾®å¤æ‚ç‚¹çš„ç”¨æ³•ï¼Œå°±æ˜¯å¯ä»¥æœ‰å‚æ•°ï¼š\npublic CustomEditor(System.Type inspectedType, bool editorForChildClasses) public bool isFallback { get; set; } // ä½¿ç”¨ä¸‹é¢è¿™è¡Œå¯æ›¿æ¢å…¨å±€ MonoBehaviour çš„ Inspector [CustomEditor(typeof(MonoBehaviour), true, isFallback = true)] è¿™æ ·å¯ä»¥ç›´æ¥æ›¿æ¢æ‰å…¨å±€çš„ MonoBehaviourï¼Œä½†æ˜¯ isFallback = true ä¿è¯äº†åªæœ‰æ²¡ä»»ä½•å…¶ä»–å¯ç”¨é¡¹çš„æ—¶å€™æ‰ä¼šä½¿ç”¨å½“å‰çš„è¿™ä¸ªã€‚\n2.3 ç”Ÿå‘½å‘¨æœŸ åœ¨è¿è¡Œæ—¶ï¼ˆPlay Modeï¼‰æˆ‘ä»¬æœ‰ï¼š\nAwake â†’ OnEnable â†’ Start â†’ Update â†’ OnDisable â†’ OnDestroy åœ¨ç¼–è¾‘å™¨æ‰©å±•ï¼ˆEditor Modeï¼‰ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„ä½“ç³»ï¼Œåªä¸è¿‡å‘ç”Ÿåœ¨ç¼–è¾‘å™¨å±‚é¢ï¼š\nOnEnable â†’ OnInspectorGUI / OnSceneGUI (é‡å¤æ‰§è¡Œ) â†’ OnDisable è¿™äº›å›è°ƒè¿è¡Œåœ¨ UnityEditor å‘½åç©ºé—´ä¸‹ï¼›Unity ä¼šåœ¨ç¼–è¾‘å™¨çŠ¶æ€å˜åŠ¨ï¼ˆæ¯”å¦‚è„šæœ¬é‡ç¼–è¯‘ã€é€‰ä¸­ç‰©ä½“ã€æ‰“å¼€ Inspector ç­‰ï¼‰æ—¶è‡ªåŠ¨è§¦å‘ã€‚\nEditor ç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹ï¼ˆæŒ‰æ—¶é—´é¡ºåºï¼‰ï¼š\né˜¶æ®µ å›è°ƒæ–¹æ³• è°ƒç”¨æ—¶æœº å¸¸è§ç”¨é€” åˆå§‹åŒ–é˜¶æ®µ OnEnable() å½“ Inspector æ‰“å¼€ / é€‰ä¸­ç‰©ä½“ / è„šæœ¬é‡ç¼–è¯‘æ—¶ ç¼“å­˜ SerializedPropertyã€æ³¨å†Œäº‹ä»¶ã€åˆå§‹åŒ–èµ„æº æ¿€æ´»é˜¶æ®µ OnInspectorGUI() æ¯æ¬¡ Inspector é‡ç»˜æ—¶è°ƒç”¨ï¼ˆéå¸¸é¢‘ç¹ï¼‰ ç»˜åˆ¶ UIã€æ£€æµ‹ç”¨æˆ·è¾“å…¥ã€ä¿®æ”¹æ•°æ® åœºæ™¯ç»˜åˆ¶é˜¶æ®µ OnSceneGUI() å½“å¯¹è±¡åœ¨ Scene è§†å›¾ä¸­è¢«é€‰ä¸­æˆ– Scene è§†å›¾é‡ç»˜æ—¶ ç»˜åˆ¶ Gizmoã€Handlesã€äº¤äº’æ“ä½œ é¢„è§ˆé˜¶æ®µ HasPreviewGUI() / OnPreviewGUI() åœ¨ Inspector åº•éƒ¨ç»˜åˆ¶é¢„è§ˆï¼ˆæ¨¡å‹ã€éŸ³é¢‘ç­‰ï¼‰ è‡ªå®šä¹‰èµ„æºé¢„è§ˆçª—å£ æ›´æ–°é˜¶æ®µ OnInspectorUpdate() ç¼–è¾‘å™¨å®šæœŸåˆ·æ–°ï¼ˆå¤§çº¦ 10 FPSï¼‰ å®šæ—¶åˆ·æ–°çŠ¶æ€ã€æ£€æµ‹å¼‚æ­¥ä»»åŠ¡ é”€æ¯é˜¶æ®µ OnDisable() å½“ Inspector è¢«å…³é—­ã€åˆ‡æ¢é€‰ä¸­å¯¹è±¡æˆ– Domain Reload æ—¶ æ³¨é”€äº‹ä»¶ã€é‡Šæ”¾å†…å­˜ã€æ¸…ç†å¼•ç”¨ 2.4 Editor.serializedObject åœ¨ Editor è„šæœ¬ä¸­ï¼ŒserializedObject æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒæ˜¯å¯¹ä½ æ­£åœ¨ç¼–è¾‘çš„è„šæœ¬ï¼ˆå³ targetï¼‰çš„ä¸€ä¸ª åºåˆ—åŒ–åŒ…è£…ï¼ˆå°è£…å±‚ï¼‰ã€‚\nå¦‚æœä½ åœ¨ Editor é‡Œç›´æ¥å†™ï¼š\n((MyScript)target).speed = 5; å®ƒä¸æ”¯æŒï¼š\nUndo Prefab æ ‡è®°è¦†ç›– å¤šé€‰å¯¹è±¡ target æ—¶æ— æ³•ç»Ÿä¸€ä¿®æ”¹ Unity çš„åºåˆ—åŒ–ç³»ç»Ÿè§£å†³äº†è¿™äº›é—®é¢˜ï¼Œæ‰€ä»¥æä¾›äº† serializedObjectã€‚\nserializedObject = å½“å‰ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰çš„åºåˆ—åŒ–ç‰ˆæœ¬ SerializedProperty = è¯¥å¯¹è±¡ä¸­çš„ä¸€ä¸ªå­—æ®µçš„åºåˆ—åŒ–åŒ…è£… æ¯”å¦‚ï¼š\nSerializedProperty moveSpeed; void OnEnable() { moveSpeed = serializedObject.FindProperty(\"moveSpeed\"); } public override void OnInspectorGUI() { serializedObject.Update(); EditorGUILayout.PropertyField(speed); serializedObject.ApplyModifiedProperties(); } ä¸Šé¢ä»£ç å¯ä»¥è¿™ä¹ˆç†è§£ï¼šUpdate æ˜¯æŠŠ target çš„æ•°æ®åŒæ­¥åˆ° serializedObjectï¼ŒEditorGUILayout.PropertyField æ˜¯è‡ªåŠ¨æ ¹æ®ç±»å‹æ˜¾ç¤ºåœ¨æ“ä½œç•Œé¢ï¼Œä¿®æ”¹çš„æ—¶å€™ä¼šåŒæ­¥å›ä¼ ã€‚è€Œ ApplyModifiedProperties æ˜¯æŠŠ serializedObject çš„ä¿®æ”¹ï¼Œä¼ é€’å› targetã€‚\n2.5 GUILayout / IMGUI GUILayout å±äº IMGUIï¼ˆImmediate Mode GUIï¼‰ç³»ç»Ÿï¼Œå®ƒæ˜¯æœ€åŸºç¡€çš„ GUI ç»˜åˆ¶ç±»ï¼Œèƒ½åœ¨ï¼š\nMonoBehaviour.OnGUI()ï¼ˆæ¸¸æˆè¿è¡Œæ—¶ï¼‰ Editor.OnInspectorGUI()ï¼ˆç¼–è¾‘å™¨è‡ªå®šä¹‰ Inspectorï¼‰ EditorWindow.OnGUI()ï¼ˆè‡ªå®šä¹‰ç¼–è¾‘å™¨çª—å£ï¼‰ ä¸­ä½¿ç”¨ã€‚\nåœ¨ Editor é‡Œä½¿ç”¨æ—¶ï¼Œä¸€èˆ¬æˆ‘ä»¬è¿™æ ·å†™ï¼š\npublic override void OnInspectorGUI() { GUILayout.Label(\"æ ‡é¢˜\"); } ç®€è®°ï¼šLabel / Text / Toggle / Slider / Button / Layout\nä¸€ä¸ªç»¼åˆçš„ä¾‹å­ï¼š\nusing UnityEngine; using UnityEditor; [CustomEditor(typeof(TheAttributeSample))] public class TheAttributeSampleEditor : Editor { private bool toggleValue = true; private float sliderValue = 5f; private string inputText = \"åˆå§‹æ–‡æœ¬\"; private string multiLine = \"å¤šè¡Œæ–‡æœ¬\\næ”¯æŒæ¢è¡Œ\"; private Vector2 scrollPos; public override void OnInspectorGUI() { // æ ‡é¢˜ GUILayout.Label(\"ğŸ‘‹ è‡ªå®šä¹‰ Inspector - GUILayout æ§ä»¶æ¼”ç¤º\", EditorStyles.boldLabel); GUILayout.Space(10); // è¾“å…¥æ¡† GUILayout.Label(\"å•è¡Œæ–‡æœ¬è¾“å…¥:\"); inputText = GUILayout.TextField(inputText); GUILayout.Space(5); // å¤šè¡Œè¾“å…¥æ¡† GUILayout.Label(\"å¤šè¡Œæ–‡æœ¬è¾“å…¥:\"); multiLine = GUILayout.TextArea(multiLine, GUILayout.Height(60)); GUILayout.Space(5); // å¼€å…³ toggleValue = GUILayout.Toggle(toggleValue, \"å¯ç”¨æŸä¸ªåŠŸèƒ½\"); GUILayout.Space(5); // æ»‘æ¡ GUILayout.Label($\"ç§»åŠ¨é€Ÿåº¦: {sliderValue:F2}\"); sliderValue = GUILayout.HorizontalSlider(sliderValue, 0, 10); GUILayout.Space(10); // æŒ‰é’® if (GUILayout.Button(\"æ‰“å°å½“å‰çŠ¶æ€\")) { Debug.Log($\"è¾“å…¥: {inputText}, å¼€å…³: {toggleValue}, é€Ÿåº¦: {sliderValue}\"); } GUILayout.Space(10); GUILayout.Box(\"\", GUILayout.ExpandWidth(true), GUILayout.Height(2)); // åˆ†éš”çº¿ // æ»šåŠ¨åŒºåŸŸ GUILayout.Label(\"æ»šåŠ¨åŒºåŸŸç¤ºä¾‹ï¼š\"); scrollPos = GUILayout.BeginScrollView(scrollPos, GUILayout.Height(100)); for (int i = 0; i \u003c 20; i++) { GUILayout.Label(\"é¡¹ç›® \" + i); } GUILayout.EndScrollView(); GUILayout.Space(10); GUILayout.Label(\"å¸ƒå±€æ§åˆ¶:\"); GUILayout.BeginHorizontal(); if (GUILayout.Button(\"å·¦æŒ‰é’®\")) Debug.Log(\"å·¦\"); if (GUILayout.Button(\"å³æŒ‰é’®\")) Debug.Log(\"å³\"); GUILayout.EndHorizontal(); GUILayout.Space(5); GUILayout.Label(\"ç¤ºä¾‹ç»“æŸ ğŸ¯\"); } } æ ·å¼ï¼š\n2.6 EditorGUILayout EditorGUILayout æ˜¯ Unity ç¼–è¾‘å™¨è„šæœ¬é‡Œçš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œå®ƒå¯ä»¥å¸®ä½ åœ¨ Inspector æˆ– è‡ªå®šä¹‰çª—å£é‡Œæ˜¾ç¤ºå„ç§æ§ä»¶ï¼Œæ¯”å¦‚æŒ‰é’®ã€æ»‘æ¡ã€é¢œè‰²é€‰æ‹©å™¨ç­‰ã€‚\nè‡ªåŠ¨æ”¯æŒ Undoã€Prefab è¦†ç›–ã€å¤šå¯¹è±¡ç¼–è¾‘ã€‚\nå’Œ GUILayout çš„åŒºåˆ«æ˜¯ï¼Œå®ƒæ”¯æŒå¤šå¯¹è±¡ï¼Œå†™èµ·æ¥æ›´ç®€æ´ï¼Œæ ·å¼ç»Ÿä¸€ã€‚\nå¸¸ç”¨æ§ä»¶ï¼š\næ§ä»¶ ç”¨é€” ç¤ºä¾‹ LabelField æ˜¾ç¤ºæ–‡æœ¬ EditorGUILayout.LabelField(\"æ ‡é¢˜\") TextField è¾“å…¥å•è¡Œæ–‡å­— EditorGUILayout.TextField(\"åå­—\", name) TextArea å¤šè¡Œæ–‡å­— EditorGUILayout.TextArea(description) Toggle å¼€å…³ EditorGUILayout.Toggle(\"æ˜¯å¦å¯ç”¨\", isOn) Slider æ»‘æ¡ EditorGUILayout.Slider(\"é€Ÿåº¦\", speed, 0, 10) IntField æ•´æ•°è¾“å…¥ EditorGUILayout.IntField(\"ç”Ÿå‘½\", hp) FloatField æµ®ç‚¹è¾“å…¥ EditorGUILayout.FloatField(\"é€Ÿåº¦\", speed) Vector3Field ä¸‰ç»´å‘é‡ EditorGUILayout.Vector3Field(\"ä½ç½®\", pos) ColorField é¢œè‰²é€‰æ‹© EditorGUILayout.ColorField(\"é¢œè‰²\", color) ObjectField æ‹–æ‹½å¯¹è±¡ EditorGUILayout.ObjectField(\"ç›®æ ‡\", obj, typeof(GameObject), true) EnumPopup ä¸‹æ‹‰é€‰æ‹©æšä¸¾ EditorGUILayout.EnumPopup(\"ç±»å‹\", playerClass) Foldout æŠ˜å é¢æ¿ fold = EditorGUILayout.Foldout(fold, \"é«˜çº§\") PropertyField è‡ªåŠ¨ç»˜åˆ¶ SerializedProperty EditorGUILayout.PropertyField(serializedProp) ä¸€ä¸ªæ¡ˆä¾‹ï¼š\nusing UnityEngine; public class PlayerSettings : MonoBehaviour { [SerializeField, Range(0, 10)] private float moveSpeed = 5f; [SerializeField] private string playerName = \"Hero\"; [SerializeField] private Color playerColor = Color.cyan; [SerializeField] private bool isGodMode = false; } Editor éƒ¨åˆ†ï¼š\nusing UnityEditor; using UnityEngine; [CustomEditor(typeof(PlayerSettings))] public class PlayerSettingsEditor : Editor { // å®šä¹‰ SerializedProperty å¯¹è±¡ SerializedProperty moveSpeed; SerializedProperty playerName; SerializedProperty playerColor; SerializedProperty isGodMode; // åˆå§‹åŒ–ï¼šåœ¨ç¼–è¾‘å™¨åŠ è½½æ—¶ç»‘å®šå­—æ®µ void OnEnable() { moveSpeed = serializedObject.FindProperty(\"moveSpeed\"); playerName = serializedObject.FindProperty(\"playerName\"); playerColor = serializedObject.FindProperty(\"playerColor\"); isGodMode = serializedObject.FindProperty(\"isGodMode\"); } // è‡ªå®šä¹‰ Inspector ç•Œé¢ public override void OnInspectorGUI() { // åŒæ­¥ç›®æ ‡å¯¹è±¡çš„æœ€æ–°æ•°æ® serializedObject.Update(); GUILayout.Label(\"ğŸ® Player Settings\", EditorStyles.boldLabel); EditorGUILayout.Space(); // ç»˜åˆ¶å±æ€§å­—æ®µï¼ˆè‡ªåŠ¨æ”¯æŒæ’¤é”€ / Prefabï¼‰ EditorGUILayout.PropertyField(playerName, new GUIContent(\"Player Name\")); EditorGUILayout.PropertyField(moveSpeed, new GUIContent(\"Move Speed\")); EditorGUILayout.PropertyField(playerColor, new GUIContent(\"Player Color\")); EditorGUILayout.PropertyField(isGodMode, new GUIContent(\"God Mode\")); EditorGUILayout.Space(10); // æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰æŒ‰é’® if (GUILayout.Button(\"æ‰“å°ç©å®¶ä¿¡æ¯\")) { var player = (PlayerSettings)target; Debug.Log($\"ğŸ‘¤ {playerName.stringValue} - é€Ÿåº¦: {moveSpeed.floatValue}, æ— æ•Œ: {isGodMode.boolValue}\"); } // æäº¤ä¿®æ”¹å›ç›®æ ‡å¯¹è±¡ serializedObject.ApplyModifiedProperties(); } } æ•ˆæœï¼š\nå®Œå…¨å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªæŠ½è±¡äº†ä¸€ä¸ªä¸­é—´å±‚çš„ IMGUIï¼Œé¿å…æ‰‹åŠ¨ç»‘å®šä¸€äº›å†™æ³•ã€‚å¦‚æœå¤æ‚ç‚¹å†™ï¼Œè¿˜å¯ä»¥å®ç°ä¸‹é¢çš„æ•ˆæœï¼š\n2.6.1 å±•å¼€æŠ˜å çš„ä¾‹å­ è¿™ä¸ªä¾‹å­è™½ç„¶ç®€å•ï¼Œä½†æ˜¯ç”±äºå¤ªè¿‡å¸¸ç”¨ï¼Œè¿™é‡Œä¸“é—¨å†™ä¸€ä¸‹ã€‚\nå±•å¼€æŠ˜å çš„ä¾‹å­ï¼š\nusing UnityEngine; using UnityEditor; [CustomEditor(typeof(PlayerSettings))] public class PlayerSettingsEditor : Editor { // SerializedProperty å¯¹è±¡ SerializedProperty moveSpeed; SerializedProperty playerName; SerializedProperty playerColor; SerializedProperty isGodMode; // æŠ˜å çŠ¶æ€å˜é‡ bool showBasicSettings = true; bool showAdvancedSettings = false; void OnEnable() { moveSpeed = serializedObject.FindProperty(\"moveSpeed\"); playerName = serializedObject.FindProperty(\"playerName\"); playerColor = serializedObject.FindProperty(\"playerColor\"); isGodMode = serializedObject.FindProperty(\"isGodMode\"); } public override void OnInspectorGUI() { serializedObject.Update(); // æŠ˜å é¢æ¿ï¼šåŸºç¡€è®¾ç½® showBasicSettings = EditorGUILayout.Foldout(showBasicSettings, \"åŸºç¡€è®¾ç½®\"); if (showBasicSettings) { EditorGUILayout.PropertyField(playerName); EditorGUILayout.PropertyField(moveSpeed); } EditorGUILayout.Space(); // æŠ˜å é¢æ¿ï¼šé«˜çº§è®¾ç½® showAdvancedSettings = EditorGUILayout.Foldout(showAdvancedSettings, \"é«˜çº§è®¾ç½®\"); if (showAdvancedSettings) { EditorGUILayout.PropertyField(playerColor); EditorGUILayout.PropertyField(isGodMode); } EditorGUILayout.Space(); // æ‰“å°æŒ‰é’® if (GUILayout.Button(\"æ‰“å°ç©å®¶ä¿¡æ¯\")) { Debug.Log($\"ç©å®¶ {playerName.stringValue}, é€Ÿåº¦ {moveSpeed.floatValue}, \" + $\"é¢œè‰² {playerColor.colorValue}, æ— æ•Œ: {isGodMode.boolValue}\"); } serializedObject.ApplyModifiedProperties(); } } æ•ˆæœå®ç°ï¼š\n2.7 Handles / OnSceneGUI OnSceneGUI æ˜¯ Unity è‡ªå®šä¹‰ç¼–è¾‘å™¨é‡Œçš„ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå…è®¸ä½ åœ¨ Scene è§†å›¾ä¸­ç»˜åˆ¶å’Œäº¤äº’ï¼Œæ¯æ¬¡ Scene è§†å›¾åˆ·æ–°æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚\nHandles æ˜¯ Unity æä¾›çš„ä¸€ç»„ Scene è§†å›¾å¯è§†åŒ–æ§ä»¶å’Œç»˜å›¾å·¥å…·ï¼š\næ–¹æ³• ç”¨é€” Handles.PositionHandle å¯æ‹–æ‹½æ§åˆ¶ä½ç½® Handles.RotationHandle å¯æ—‹è½¬æ§åˆ¶ Handles.ScaleHandle å¯ç¼©æ”¾æ§åˆ¶ Handles.Label æ˜¾ç¤ºæ–‡æœ¬æ ‡ç­¾ Handles.SphereHandleCap ç»˜åˆ¶çƒä½“ Handles.DrawLine ç»˜åˆ¶çº¿æ¡ Handles.DrawWireCube ç»˜åˆ¶ç©ºå¿ƒæ–¹å— æˆ‘ä»¬ç›´æ¥ä¸Šä½¿ç”¨æ–¹å¼ã€‚é¦–å…ˆç»™ PlayerSettings å¢åŠ ä¸€ä¸ªä¸‰ç»´åæ ‡ï¼Œåé¢ä¼šç”¨ Handles æ¥å¯è§†åŒ–æ“ä½œè¿™ä¸ªä¸‰ç»´åæ ‡ã€‚\npublic class PlayerSettings : MonoBehaviour { // ... // public Vector3 scenePosition = Vector3.zero; } ç„¶ååœ¨ OnSceneGUI ä¸­é€šè¿‡ Handles æ¥å®ç°æ“ä½œ scenePosition çš„å¯è§†åŒ–ä¿®æ”¹ã€‚\nusing UnityEditor; using UnityEditor.TerrainTools; using UnityEngine; [CustomEditor(typeof(PlayerSettings))] public class PlayerSettingsEditor : Editor { private void OnSceneGUI() { PlayerSettings player = (PlayerSettings)target; // å¼€å§‹ç›‘æµ‹ä¿®æ”¹ EditorGUI.BeginChangeCheck(); // æ‹–æ‹½ PositionHandle æ§åˆ¶ scenePosition Vector3 newPos = Handles.PositionHandle(player.scenePosition, Quaternion.identity); if (EditorGUI.EndChangeCheck()) { Undo.RecordObject(player, \"Move Scene Position\"); // æ”¯æŒ Undo player.scenePosition = newPos; // æ›´æ–°ä½ç½® EditorUtility.SetDirty(player); // æ ‡è®°å¯¹è±¡å·²ä¿®æ”¹ } // ç»˜åˆ¶ä¸€ä¸ªçƒä½“æ ‡è®° Handles.color = Color.aliceBlue; Handles.SphereHandleCap(0, player.scenePosition, Quaternion.identity, 0.5f, EventType.Repaint); // ç»˜åˆ¶åå­—æ ‡ç­¾ Handles.Label(player.scenePosition + Vector3.up * 0.6f, \"Scene Position\"); } } æ•ˆæœï¼š\næ³¨æ„ï¼Œè¿™é‡Œå¿…é¡»è¦é€‰æ‹©è¿™ä¸ªç‰©ä½“ï¼Œæ‰ä¼šåœ¨ Scene ä¸­è¿›è¡Œç»˜åˆ¶ï¼Œå’Œä¸‹é¢è¦ä»‹ç»çš„ Gizmo æ˜¯æœ‰åŒºåˆ«çš„ã€‚ è¿™ä¸ªåæ ‡è¿˜æ˜¯å¯ä»¥åœ¨ Inspector ä¸­ç›´æ¥ç¼–è¾‘çš„ï¼Œä¸å½±å“è¿™ä¸€ç‚¹ã€‚\n2.8 Gizmos / OnDrawGizmos Handles åªèƒ½åœ¨ Scene ä¸­è¿›è¡Œç»˜åˆ¶ï¼Œè€Œä¸”å¿…é¡»è¦é€‰ä¸­ã€‚\nGizmos å¯ä»¥åŒæ—¶åœ¨ Scene å’Œ Game ä¸­ç»˜åˆ¶å¹¶æ˜¾ç¤ºï¼Œå‡†ç¡®æ¥è¯´è¿™ä¸ªçŸ¥è¯†æ˜¯ä¸ç®—æ˜¯ Editor å¼€å‘é‡Œé¢çš„ï¼Œè¿™é‡Œåªæ˜¯å¯¹æ¯”è®²è§£ä¸‹ Handlesã€‚\næ–¹æ³• ç”¨é€” Gizmos.DrawLine(start, end) ç»˜åˆ¶ç›´çº¿ Gizmos.DrawRay(origin, direction) ç»˜åˆ¶å°„çº¿ Gizmos.DrawSphere(center, radius) ç»˜åˆ¶çƒä½“ Gizmos.DrawCube(center, size) ç»˜åˆ¶æ–¹å— Gizmos.DrawWireCube(center, size) ç»˜åˆ¶ç©ºå¿ƒæ–¹å— Gizmos.color è®¾ç½®é¢œè‰² Gizmos.DrawIcon(position, iconName, allowScaling) ç»˜åˆ¶å›¾æ ‡ è¿˜æ˜¯å›åˆ° PlayerSettingsï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”¨ Gizmos æ˜¾ç¤ºå®ƒï¼š\nusing UnityEngine; public class PlayerSettings : MonoBehaviour { [SerializeField, Range(0, 10)] private float moveSpeed = 5f; [SerializeField] private string playerName = \"Hero\"; [SerializeField] private Color playerColor = Color.cyan; [SerializeField] private bool isGodMode = false; public Vector3 scenePosition = Vector3.zero; private void OnDrawGizmos() { Gizmos.color = playerColor; // ç»˜åˆ¶çƒä½“ Gizmos.DrawSphere(scenePosition, 0.5f); // ç»˜åˆ¶ä¸€æ¡å‘ä¸Šçš„çº¿ Gizmos.DrawLine(scenePosition, scenePosition + Vector3.up); // ç»˜åˆ¶åå­—æ ‡ç­¾ï¼ˆScene ä¸­ä»…æ˜¾ç¤ºï¼‰ UnityEditor.Handles.Label(scenePosition + Vector3.up * 0.6f, playerName); } } å¯ä»¥åœ¨ Game ä¸­ä¹Ÿçœ‹åˆ°ï¼Œæ³¨æ„è¦æŠŠå³ä¸Šè§’çš„ Gizmos ç»™å¯ç”¨æ‰èƒ½çœ‹åˆ°ï¼š\n3. å·¥å…·ç±» 3.1 EditorUtility EditorUtility æ˜¯ Unity ç¼–è¾‘å™¨æä¾›çš„ å®ç”¨å·¥å…·ç±»ï¼Œç”¨æ¥å®Œæˆä¸€äº›é€šç”¨ç¼–è¾‘å™¨æ“ä½œï¼Œæ¯”å¦‚å¼¹çª—ã€æ ‡è®°å¯¹è±¡ä¿®æ”¹ã€ä¿å­˜ç­‰ã€‚\nä¸‹é¢çš„ SetDirty ç»å¸¸ç”¨åˆ°ã€‚\næ–¹æ³• åŠŸèƒ½ EditorUtility.SetDirty(Object obj) æ ‡è®°å¯¹è±¡å·²ä¿®æ”¹ï¼Œç¡®ä¿ç¼–è¾‘å™¨ä¿å­˜æ›´æ”¹ EditorUtility.DisplayDialog(title, message, ok, cancel) å¼¹å‡ºå¯¹è¯æ¡† EditorUtility.DisplayProgressBar(title, info, progress) æ˜¾ç¤ºè¿›åº¦æ¡ EditorUtility.ClearProgressBar() å…³é—­è¿›åº¦æ¡ EditorUtility.FocusProjectWindow() èšç„¦ Project çª—å£ EditorUtility.CopySerialized(Object src, Object dst) å¤åˆ¶å¯¹è±¡æ•°æ® using UnityEditor; using UnityEngine; public class EditorUtilityExample { [MenuItem(\"Tools/Mark Dirty Example\")] static void MarkDirtyExample() { GameObject go = Selection.activeGameObject; if (go != null) { Undo.RecordObject(go, \"Modify GameObject\"); go.transform.position = Vector3.one; EditorUtility.SetDirty(go); // æ ‡è®°ä¿®æ”¹ Debug.Log(\"GameObject position changed and marked dirty.\"); } } } 3.2 AssetDatabase AssetDatabase æ˜¯ Unity çš„èµ„æºç®¡ç†æ¥å£ï¼Œç”¨äºæ“ä½œé¡¹ç›®ä¸­çš„èµ„æºï¼ˆåˆ›å»ºã€åˆ é™¤ã€å¯¼å…¥ã€æŸ¥æ‰¾ç­‰ï¼‰ã€‚\næ–¹æ³• åŠŸèƒ½ AssetDatabase.CreateAsset(Object asset, string path) åˆ›å»ºèµ„æºæ–‡ä»¶ AssetDatabase.DeleteAsset(string path) åˆ é™¤èµ„æºæ–‡ä»¶ AssetDatabase.MoveAsset(string oldPath, string newPath) ç§»åŠ¨/é‡å‘½åèµ„æº AssetDatabase.LoadAssetAtPath(string path) åŠ è½½èµ„æº AssetDatabase.Refresh() åˆ·æ–°èµ„æºæ•°æ®åº“ AssetDatabase.GetAssetPath(Object obj) è·å–èµ„æºè·¯å¾„ using UnityEditor; using UnityEngine; public class AssetDatabaseExample { [MenuItem(\"Tools/Create Material\")] static void CreateMaterial() { Material mat = new Material(Shader.Find(\"Standard\")); AssetDatabase.CreateAsset(mat, \"Assets/NewMaterial.mat\"); AssetDatabase.SaveAssets(); AssetDatabase.Refresh(); Debug.Log(\"Material created in Assets folder.\"); } } 3.3 Selection Selection ç”¨æ¥ è·å–æˆ–è®¾ç½®ç¼–è¾‘å™¨å½“å‰é€‰ä¸­çš„å¯¹è±¡ï¼Œå¸¸ç”¨åœ¨ç¼–è¾‘å™¨å·¥å…·ä¸­æ“ä½œç”¨æˆ·é€‰æ‹©çš„å¯¹è±¡ã€‚\nå±æ€§ / æ–¹æ³• åŠŸèƒ½ Selection.activeObject å½“å‰é€‰ä¸­çš„å¯¹è±¡ï¼ˆå•é€‰ï¼‰ Selection.activeGameObject å½“å‰é€‰ä¸­çš„ GameObjectï¼ˆå•é€‰ï¼‰ Selection.objects å½“å‰é€‰ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼ˆå¤šé€‰ï¼‰ Selection.gameObjects å½“å‰é€‰ä¸­çš„æ‰€æœ‰ GameObjectï¼ˆå¤šé€‰ï¼‰ Selection.activeTransform å½“å‰é€‰ä¸­å¯¹è±¡çš„ Transform Selection.activeInstanceID å½“å‰é€‰ä¸­å¯¹è±¡çš„å®ä¾‹ ID using UnityEditor; using UnityEngine; public class SelectionExample { [MenuItem(\"Tools/Print Selected Objects\")] static void PrintSelectedObjects() { foreach (var obj in Selection.objects) { Debug.Log(\"Selected object: \" + obj.name); } } } 3.4 EditorWindow.OnGUI æ¯å½“ Unity éœ€è¦ç»˜åˆ¶ç•Œé¢ï¼ˆInspectorã€EditorWindowã€Game GUIç­‰ï¼‰æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨ OnGUI()ï¼Œè®©ä½ ç”¨ä»£ç å³æ—¶ç”»å‡º UI æ§ä»¶ã€‚\nä¸Šä¸‹æ–‡ è§¦å‘æ–¹å¼ ç”¨é€” MonoBehaviour.OnGUI() æ¸¸æˆè¿è¡Œæ—¶è°ƒç”¨ ç»˜åˆ¶ç®€å• HUDã€è°ƒè¯• GUI EditorWindow.OnGUI() ç¼–è¾‘å™¨çª—å£ ç»˜åˆ¶è‡ªå®šä¹‰å·¥å…·çª—å£ Editor.OnInspectorGUI() Inspector é¢æ¿ è‡ªå®šä¹‰ç»„ä»¶çš„ Inspector EditorApplication.projectWindowItemOnGUI Project çª—å£ç»˜åˆ¶ ç»˜åˆ¶èµ„æºèƒŒæ™¯/å›¾æ ‡ EditorApplication.projectWindowItemInstanceOnGUI Project çª—å£ç»˜åˆ¶ ç»˜åˆ¶èµ„æºèƒŒæ™¯/å›¾æ ‡ï¼Œå¯ä»¥å¤„ç†å­èµ„äº§ EditorApplication.hierarchyWindowItemOnGUI Hierarchy ç»˜åˆ¶ ä¿®æ”¹ GameObject æ˜¾ç¤ºæ•ˆæœ åˆ©ç”¨ EditorWindow çš„ GUI åˆ›å»ºä¸€ä¸ªçª—å£ï¼š\nusing UnityEditor; using UnityEngine; public class SimpleWindow : EditorWindow { [MenuItem(\"Window/Simple GUI\")] public static void ShowWindow() { GetWindow\u003cSimpleWindow\u003e(\"Simple GUI\"); } void OnGUI() { GUILayout.Label(\"Hello Unity IMGUI!\", EditorStyles.boldLabel); if (GUILayout.Button(\"Click Me\")) { Debug.Log(\"Button clicked!\"); } } } å®ç°æ•ˆæœï¼š\n3.5 projectWindowItemOnGUI projectWindowItemOnGUI æ˜¯ Unity Editor æä¾›çš„ä¸€ä¸ª é™æ€å›è°ƒäº‹ä»¶ï¼Œç”¨äºåœ¨ Project çª—å£çš„æ¯ä¸ªèµ„æºæ¡ç›®ä¸Šç»˜åˆ¶è‡ªå®šä¹‰ GUIã€‚\næ³¨æ„è¿™é‡Œè¦æ³¨é”€ä¸€ä¸‹ä¸Šæ¬¡æ³¨å†Œçš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¹ æƒ¯ã€‚\nusing UnityEngine; using UnityEditor; [InitializeOnLoad] public static class ProjectWindowDecorator { static ProjectWindowDecorator() { EditorApplication.projectWindowItemOnGUI -= OnProjectWindowItemGUI; EditorApplication.projectWindowItemOnGUI += OnProjectWindowItemGUI; } private static void OnProjectWindowItemGUI(string guid, Rect rect) { string path = AssetDatabase.GUIDToAssetPath(guid); // åªå¯¹ png æ–‡ä»¶ç”Ÿæ•ˆ if (path.EndsWith(\".png\")) { // åœ¨èµ„æºå³ä¸Šè§’ç”»ä¸€ä¸ªçº¢è‰²å°åœ†ç‚¹ Rect dotRect = new Rect(rect.xMax - 10, rect.y + 2, 8, 8); EditorGUI.DrawRect(dotRect, Color.red); } } } æ•ˆæœï¼š\nè¿˜å¯ä»¥å®ç°ç»™æ¯ä¸ªæ–‡ä»¶ä¸ŠåŠ ä¸€ä¸ªæŒ‰é’®çš„åŠŸèƒ½ï¼š\n3.6 EditorPrefs EditorPrefs æ˜¯ Unity ç¼–è¾‘å™¨ä¸“ç”¨çš„ä¸€ä¸ªç±»ï¼Œç”¨æ¥åœ¨æœ¬åœ°ä¿å­˜ç¼–è¾‘å™¨çº§åˆ«çš„é…ç½®æ•°æ®ï¼ˆç±»ä¼¼äºâ€œç¼–è¾‘å™¨åå¥½è®¾ç½®â€ï¼‰ã€‚\nå®ƒçš„åŠŸèƒ½ç±»ä¼¼äº PlayerPrefsï¼ˆæ¸¸æˆè¿è¡Œæ—¶å­˜å‚¨ï¼‰ï¼Œä½†ç”¨äºç¼–è¾‘å™¨å·¥å…·æˆ–æ’ä»¶çš„è®¾ç½®ã€‚\nå®ƒä¸ä¼šéšç€ â€œé¡¹ç›®ç§»åŠ¨â€ è€Œè¿ç§»ï¼Œä¹Ÿå°±æ˜¯ä»…ä»…æ˜¯ä½ æœ¬æœºç”µè„‘ä¿å­˜çš„ã€‚\né€šå¸¸ä¸ç”¨è¿™ä¸ªï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œåº”è¯¥æ˜¯å†™æˆä¸€ä¸ªå¯ä»¥ä¿å­˜çš„ JSON ä¹‹ç±»çš„ï¼Œè·Ÿç€é¡¹ç›®å¯ä»¥åŒæ­¥ã€‚\nusing UnityEditor; using UnityEngine; public class EditorPrefsExample { [MenuItem(\"Tools/EditorPrefs ç¤ºä¾‹\")] public static void Example() { // ä¿å­˜æ•°æ® EditorPrefs.SetString(\"MyTool_LastFilePath\", \"D:/MyProject/Config.txt\"); EditorPrefs.SetInt(\"MyTool_UseDarkTheme\", 1); EditorPrefs.SetBool(\"MyTool_ShowTips\", true); EditorPrefs.SetFloat(\"MyTool_Volume\", 0.8f); // è¯»å–æ•°æ® string path = EditorPrefs.GetString(\"MyTool_LastFilePath\", \"æœªè®¾ç½®\"); bool showTips = EditorPrefs.GetBool(\"MyTool_ShowTips\", false); float volume = EditorPrefs.GetFloat(\"MyTool_Volume\", 1.0f); Debug.Log($\"è·¯å¾„: {path}, æ˜¯å¦æ˜¾ç¤ºæç¤º: {showTips}, éŸ³é‡: {volume}\"); // åˆ é™¤æ•°æ® EditorPrefs.DeleteKey(\"MyTool_LastFilePath\"); // æ£€æŸ¥æ˜¯å¦å­˜åœ¨ if (EditorPrefs.HasKey(\"MyTool_UseDarkTheme\")) Debug.Log(\"æš—è‰²ä¸»é¢˜è®¾ç½®å­˜åœ¨\"); } } 3.7 MonoBehaviour.OnGUI ä¸¥æ ¼æ¥è¯´è¿™ä¸ªä¹Ÿä¸ç®— Editor å¼€å‘ï¼Œä½†æ˜¯è¿™ä¸ªå¾ˆé€‚åˆåˆ¶ä½œä¸€äº›æµ‹è¯•ç”¨åªåœ¨ Editor è¿è¡Œæ¸¸æˆæ—¶ä½¿ç”¨çš„æŒ‰é’®ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š\nusing UnityEngine; public class TestMonoOnGUI : MonoBehaviour { #if UNITY_EDITOR void OnGUI() { if (GUI.Button(new Rect(10, 10, 100, 30), \"Click Me\")) { Debug.Log(\"æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼\"); } } #endif } è¿è¡Œåèƒ½å‡ºç°ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶ä¸”è¿™ä¸ªæŒ‰é’®å› ä¸ºå®é™åˆ¶åœ¨äº†åªèƒ½ç”¨äºç¼–è¾‘å™¨è¿è¡Œçš„æƒ…å†µï¼Œä¸ä¼šå½±å“æ­£å¼æ¸¸æˆã€‚\n4 MenuItem 4.1 é¡¶éƒ¨èœå•æ  MenuItem æ˜¯ Unity æä¾›çš„ä¸€ä¸ª ç¼–è¾‘å™¨æ³¨è§£ï¼Œç”¨äºåœ¨èœå•æ æˆ–å³é”®èœå•ä¸­æ·»åŠ è‡ªå®šä¹‰åŠŸèƒ½ã€‚\nå¦‚æœè·¯å¾„æ˜¯ä¸ä»¥ Assets/ æˆ– GameObject/ å¼€å¤´ï¼ŒUnity ä¼šæŠŠå®ƒæ”¾åœ¨é¡¶éƒ¨èœå•æ ã€‚\nusing UnityEditor; using UnityEngine; public class MenuExample { [MenuItem(\"Tools/Print Message\")] public static void PrintMessage() { Debug.Log(\"Hello from Tools menu!\"); } [MenuItem(\"Tools/Print Message\", true)] // éªŒè¯å‡½æ•°ï¼ˆç”¨äºå¯ç”¨/ç¦ç”¨èœå•é¡¹ï¼‰ public static bool ValidatePrintMessage() { return Application.isPlaying == false; // ä»…åœ¨éè¿è¡ŒçŠ¶æ€å¯ç”¨ } } åœ¨ä¸Šæ–¹å‡ºç°ï¼š\nè¯´æ˜ï¼š\n[MenuItem(â€œTools/Print Messageâ€)] ä¼šåœ¨ Unity èœå•æ çš„ Tools ä¸‹æ·»åŠ ä¸€ä¸ª â€œPrint Messageâ€ èœå•é¡¹ã€‚ [MenuItem(\"è·¯å¾„\", true)] å¸¦æœ‰ true å‚æ•°çš„è¡¨ç¤ºåŒåæ–¹æ³•æ˜¯éªŒè¯å‡½æ•°ï¼Œç”¨æ¥æ§åˆ¶èœå•æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœè¿”å› false é‚£ä¹ˆä¼šæ˜¯ç°è‰² ä¸å¯ç‚¹å‡»çŠ¶æ€ ã€‚ æ–¹æ³•å¿…é¡»æ˜¯ staticã€‚ ç¬¬ä¸‰é¡¹æ˜¯ ä¼˜å…ˆçº§ ï¼Œæ§åˆ¶èœå•åœ¨åŒçº§èœå•ä¸­çš„æ’åºï¼Œæ•°å­—è¶Šå°è¶Šé ä¸Šã€‚\n[MenuItem(\"Tools/Print Debug\", false, 10)] 4.2 å³é”®èœå•æ  Assets/ å¼€å¤´å¯ä»¥åœ¨ Project çª—å£ä¸­å³é”®å‡ºç°ï¼Œè€Œ GameObject/ å¼€å¤´å¯ä»¥åœ¨ Hierarchy é‡Œé¢å‡ºç°ã€‚\nè¿™é‡Œå®ç°ä¸‹é¢ä¸€ä¸ªåŠŸèƒ½ï¼š\nåœ¨ Project çª—å£å³é”®æ–‡ä»¶å¤¹æ—¶æ˜¾ç¤ºèœå•ï¼Œå¤šé€‰æ—¶ä¹Ÿèƒ½ç”Ÿæ•ˆï¼Œå¹¶å¯¹æ–‡ä»¶å¤¹åå­—åŠ ä¸Š test- å‰ç¼€ï¼ˆå¦‚æœæ²¡æœ‰çš„è¯ï¼‰ using UnityEngine; using UnityEditor; public class AddTestPrefix { // å³é”®èœå•æ˜¾ç¤ºåœ¨ Project çª—å£æ–‡ä»¶å¤¹ä¸Š [MenuItem(\"Assets/Add Test Prefix\", true)] private static bool ValidateAddTestPrefix() { // åªå…è®¸é€‰ä¸­æ–‡ä»¶å¤¹ foreach (var obj in Selection.objects) { string path = AssetDatabase.GetAssetPath(obj); if (!AssetDatabase.IsValidFolder(path)) return false; } return Selection.objects.Length \u003e 0; } [MenuItem(\"Assets/Add Test Prefix\")] private static void AddPrefix() { foreach (var obj in Selection.objects) { string path = AssetDatabase.GetAssetPath(obj); if (!AssetDatabase.IsValidFolder(path)) continue; string folderName = System.IO.Path.GetFileName(path); if (!folderName.StartsWith(\"test\")) { string newFolderName = \"test-\" + folderName; string parentPath = System.IO.Path.GetDirectoryName(path).Replace(\"\\\\\", \"/\"); string newPath = parentPath + \"/\" + newFolderName; AssetDatabase.RenameAsset(path, newFolderName); Debug.Log($\"Renamed folder: {folderName} -\u003e {newFolderName}\"); } } AssetDatabase.SaveAssets(); AssetDatabase.Refresh(); } } æ¼”ç¤ºï¼š\n5. é£æ ¼ç¾åŒ– 5.1 True/False å˜å¼€å…³æŒ‰é’® å¦‚æœæˆ‘ä»¬æœŸæœ›å®ç°ä¸€ä¸ªå¼€å…³æŒ‰é’®ï¼Œè€Œä¸æ˜¯å‹¾é€‰ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ\nåŒ…æ‹¬æ°´å¹³å¸ƒå±€ï¼Œæ›´æ”¹æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ï¼Œ\nä»£ç ï¼š\nusing UnityEditor; using UnityEngine; [CustomEditor(typeof(PlayerSettings))] public class PlayerSettingsEditor : Editor { private SerializedProperty moveSpeed; private SerializedProperty playerName; private SerializedProperty playerColor; private SerializedProperty isGodMode; private void OnEnable() { moveSpeed = serializedObject.FindProperty(\"moveSpeed\"); playerName = serializedObject.FindProperty(\"playerName\"); playerColor = serializedObject.FindProperty(\"playerColor\"); isGodMode = serializedObject.FindProperty(\"isGodMode\"); } public override void OnInspectorGUI() { serializedObject.Update(); // åŸºç¡€å±æ€§ EditorGUILayout.PropertyField(playerName); EditorGUILayout.PropertyField(moveSpeed); EditorGUILayout.PropertyField(playerColor); EditorGUILayout.Space(); // ----------------- æŒ‰é’®é å³ ----------------- EditorGUILayout.BeginHorizontal(); // å·¦ä¾§æ ‡ç­¾ EditorGUILayout.LabelField(\"God Mode\"); // ä¸­é—´å ä½ï¼Œä½¿æŒ‰é’®é å³ GUILayout.FlexibleSpace(); // å³ä¾§æŒ‰é’® GUI.backgroundColor = isGodMode.boolValue ? Color.green : Color.red; if (GUILayout.Button(isGodMode.boolValue ? \"ON\" : \"OFF\", GUILayout.Width(50))) { isGodMode.boolValue = !isGodMode.boolValue; EditorUtility.SetDirty(target); } EditorGUILayout.EndHorizontal(); serializedObject.ApplyModifiedProperties(); } } 5.2 å…¨å±€æ ·å¼æ›¿æ¢ ä¹Ÿè®¸ä½ ä¼šæƒ³è¯´ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½æŠŠæ‰€æœ‰åœ°æ–¹çš„ bool éƒ½æ›¿æ¢äº†ï¼Ÿ\nEditor ç¡®å®ç»™äº†æˆ‘ä»¬è¿™ç§æ¥å£ï¼š\nä»£ç ï¼š\nusing UnityEditor; using UnityEngine; // âœ… ä½œç”¨äºæ‰€æœ‰ bool å­—æ®µ [CustomPropertyDrawer(typeof(bool))] public class GlobalBoolButtonDrawer : PropertyDrawer { public override void OnGUI(Rect position, SerializedProperty property, GUIContent label) { // åªå¤„ç† bool if (property.propertyType != SerializedPropertyType.Boolean) { EditorGUI.PropertyField(position, property, label, true); return; } // ---------------- ç»˜åˆ¶å¸ƒå±€ ---------------- var labelRect = new Rect(position.x, position.y, EditorGUIUtility.labelWidth, position.height); var buttonRect = new Rect(position.x + EditorGUIUtility.labelWidth + 5, position.y, 50, position.height); // æ ‡ç­¾ EditorGUI.LabelField(labelRect, label); // æŒ‰é’®é¢œè‰² var oldColor = GUI.backgroundColor; GUI.backgroundColor = property.boolValue ? Color.green : Color.red; // æŒ‰é’®æ ·å¼ if (GUI.Button(buttonRect, property.boolValue ? \"ON\" : \"OFF\")) { property.boolValue = !property.boolValue; } GUI.backgroundColor = oldColor; } public override float GetPropertyHeight(SerializedProperty property, GUIContent label) { return EditorGUIUtility.singleLineHeight + EditorGUIUtility.standardVerticalSpacing; } } å›åˆ°ç•Œé¢ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿ Event System è¿™ç§åœ°æ–¹ï¼Œä¹Ÿç›´æ¥æ”¹äº†ï¼š\n5.3 Hierarchy ç¾åŒ– åˆ©ç”¨ EditorApplication.hierarchyWindowItemOnGUI å¯ä»¥å®ç°ç»˜åˆ¶ Hierarchy çš„æ—¶å€™è¿›è¡Œä¸€äº›è‡ªå®šä¹‰æ“ä½œã€‚\nä¾‹å¦‚å®ç°ä¸‹é¢çš„å˜è‰²åŠŸèƒ½ï¼š\né…åˆæŒä¹…åŒ–å®ç°æ”¹å˜è‰²å½©åŠŸèƒ½ã€‚\nä»£ç ï¼š\nusing UnityEditor; using UnityEngine; [InitializeOnLoad] public class HierarchyCustomDrawer { private const string PrefixName = \":\"; // EditorPrefs Key private const string BackgroundColorKey = \"HierarchyBackgroundColor\"; private const string TextColorKey = \"HierarchyTextColor\"; // é»˜è®¤é¢œè‰² public static Color BackgroundColor = Color.magenta; public static Color TextColor = Color.white; static HierarchyCustomDrawer() { LoadColors(); EditorApplication.hierarchyWindowItemOnGUI -= OnHierarchyGUI; EditorApplication.hierarchyWindowItemOnGUI += OnHierarchyGUI; } private static void LoadColors() { // è¯»å–èƒŒæ™¯è‰² string bgStr = EditorPrefs.GetString(BackgroundColorKey, \"FF00FF\"); // é»˜è®¤ç´«è‰² if (!ColorUtility.TryParseHtmlString(\"#\" + bgStr, out BackgroundColor)) { BackgroundColor = Color.magenta; } // è¯»å–æ–‡å­—è‰² string textStr = EditorPrefs.GetString(TextColorKey, \"FFFFFF\"); // é»˜è®¤ç™½è‰² if (!ColorUtility.TryParseHtmlString(\"#\" + textStr, out TextColor)) { TextColor = Color.white; } } static void OnHierarchyGUI(int instanceID, Rect selectionRect) { GameObject obj = EditorUtility.InstanceIDToObject(instanceID) as GameObject; if (obj == null) return; if (obj.name.StartsWith(PrefixName)) { // ç»˜åˆ¶èƒŒæ™¯ Rect backgroundRect = new Rect(0, selectionRect.y, Screen.width, selectionRect.height); EditorGUI.DrawRect(backgroundRect, BackgroundColor); // ç»˜åˆ¶æ–‡å­— string name = obj.name.Substring(PrefixName.Length).Trim(); GUIStyle style = new GUIStyle(EditorStyles.label) { alignment = TextAnchor.MiddleCenter, fontStyle = FontStyle.Bold, wordWrap = true, normal = { textColor = TextColor } }; EditorGUI.LabelField(backgroundRect, name, style); } } // èœå•æ‰“å¼€çª—å£ [MenuItem(\"Tools/Hierarchy é«˜äº®è®¾ç½®\")] public static void OpenColorSettings() { HierarchyColorWindow.ShowWindow(); } } public class HierarchyColorWindow : EditorWindow { private Color backgroundColor; private Color textColor; public static void ShowWindow() { var window = GetWindow\u003cHierarchyColorWindow\u003e(\"Hierarchy é«˜äº®è®¾ç½®\"); window.minSize = new Vector2(250, 100); window.LoadCurrentColors(); } private void LoadCurrentColors() { backgroundColor = HierarchyCustomDrawer.BackgroundColor; textColor = HierarchyCustomDrawer.TextColor; } private void OnGUI() { GUILayout.Label(\"è‡ªå®šä¹‰ Hierarchy é«˜äº®é¢œè‰²\", EditorStyles.boldLabel); backgroundColor = EditorGUILayout.ColorField(\"èƒŒæ™¯è‰²\", backgroundColor); textColor = EditorGUILayout.ColorField(\"æ–‡å­—è‰²\", textColor); if (GUILayout.Button(\"åº”ç”¨\")) { // ä¿å­˜åˆ° EditorPrefsï¼ˆå­—ç¬¦ä¸²ï¼‰ EditorPrefs.SetString(\"HierarchyBackgroundColor\", ColorUtility.ToHtmlStringRGBA(backgroundColor)); EditorPrefs.SetString(\"HierarchyTextColor\", ColorUtility.ToHtmlStringRGBA(textColor)); // æ›´æ–°é™æ€å˜é‡ HierarchyCustomDrawer.BackgroundColor = backgroundColor; HierarchyCustomDrawer.TextColor = textColor; // åˆ·æ–° Hierarchy EditorApplication.RepaintHierarchyWindow(); } } } 5.4 è®¾ç½®ç»„ä»¶å›¾æ ‡ ä½¿ç”¨ EditorGUIUtility.SetIconForObject æ¥ç»™ä¸€ä¸ªèµ„äº§è®¾ç½®å›¾æ ‡ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯å¯¹ C# æ˜¯ä¸è¡Œçš„ï¼Œé‡æ–°æ‰“å¼€å°±æ²¡äº†ã€‚\næ­£ç¡®çš„æ–¹æ³•æ˜¯ç”¨ MonoImporter.SetIcon å’Œ monoImporter.SaveAndReimport æ¥æŒä¹…åŒ–ï¼Œè¿™æ ·åŒæ—¶ç»„ä»¶å›¾æ ‡ä¹Ÿæ”¹äº†ã€‚\nç»„ä»¶ä¸­æ ·å¼ï¼š\nä»£ç ï¼š\nusing UnityEngine; using UnityEditor; public class AssetIconSelectorWindow : EditorWindow { private Texture2D selectedIcon; [MenuItem(\"Tools/Set Asset Icon Window\")] public static void ShowWindow() { GetWindow\u003cAssetIconSelectorWindow\u003e(\"Set Asset Icon\"); } private void OnGUI() { GUILayout.Label(\"æ‰¹é‡è®¾ç½®èµ„äº§å›¾æ ‡\", EditorStyles.boldLabel); // è·å–å½“å‰é€‰ä¸­çš„æ‰€æœ‰èµ„äº§ Object[] selectedAssets = Selection.objects; // æ˜¾ç¤ºé€‰ä¸­çš„èµ„äº§åˆ—è¡¨ if (selectedAssets.Length == 0) { EditorGUILayout.LabelField(\"æœªé€‰æ‹©èµ„äº§\"); } else { EditorGUILayout.LabelField($\"é€‰ä¸­ {selectedAssets.Length} ä¸ªèµ„äº§ï¼š\"); foreach (Object asset in selectedAssets) { EditorGUILayout.LabelField(\" - \" + asset.name); } } // é€‰æ‹©å›¾æ ‡ selectedIcon = (Texture2D)EditorGUILayout.ObjectField(\"å›¾æ ‡\", selectedIcon, typeof(Texture2D), false); GUILayout.Space(10); if (GUILayout.Button(\"åº”ç”¨å›¾æ ‡åˆ°é€‰ä¸­èµ„äº§\")) { ApplyIcon(selectedAssets); } } private void ApplyIcon(Object[] assets) { if (assets == null || assets.Length == 0) { EditorUtility.DisplayDialog(\"é”™è¯¯\", \"è¯·å…ˆåœ¨ Project é¢æ¿é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªèµ„äº§\", \"ç¡®å®š\"); return; } if (selectedIcon == null) { EditorUtility.DisplayDialog(\"é”™è¯¯\", \"è¯·é€‰æ‹©ä¸€ä¸ªå›¾æ ‡\", \"ç¡®å®š\"); return; } int appliedCount = 0; foreach (Object asset in assets) { string path = AssetDatabase.GetAssetPath(asset); if (string.IsNullOrEmpty(path)) continue; // æŒä¹…åŒ–è®¾ç½® var importer = AssetImporter.GetAtPath(path) as MonoImporter; if (importer != null) { importer.SetIcon(selectedIcon); importer.SaveAndReimport(); appliedCount++; } } EditorUtility.DisplayDialog(\"å®Œæˆ\", $\"å›¾æ ‡å·²åº”ç”¨åˆ° {appliedCount} ä¸ªèµ„äº§\", \"ç¡®å®š\"); } } 6. è‡ªå®šä¹‰ç±»å‹ ä¸€ä¸ªæå…¶å¸¸è§çš„éœ€æ±‚ï¼šå¯¼å…¥ä¸€ä¸ªè‡ªå®šä¹‰çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ â€œ.vrmâ€ ç­‰ã€‚è¿™äº›æ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿ\nè¿™é‡Œä»¥ â€œ.hhhâ€ ä¸ºä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œåªæœ‰ 2 è¡Œï¼Œç¬¬ä¸€è¡Œè¡¨ç¤º nameï¼Œç¬¬äºŒè¡Œè¡¨ç¤º description ã€‚\n6.1 ScriptableObject å¯¼å…¥çš„æ–‡ä»¶å®é™…ä¸Šä¸Šé¢çš„å¥—äº†ä¸€ä¸ª ScriptableObject æ‰èƒ½æ˜¾ç¤ºï¼Œè¿™é‡Œåˆ›å»º 2 ä¸ª ScriptableObjectï¼Œå°†åˆ†åˆ«ä½œä¸º .hhh çš„ä¸»å¯¹è±¡ï¼Œå’Œéä¸»å¯¹è±¡ã€‚\nusing UnityEngine; [CreateAssetMenu(fileName = \"NewHHHFile\", menuName = \"Custom/HHH File\")] public class HHHFile : ScriptableObject { public string nameLine; public string descriptionLine; } public class HHHName : ScriptableObject { public string nameLine; } 6.2 AssetImporter è§£æ ç„¶ååœ¨æ–‡ä»¶å¯¼å…¥æ—¶ï¼Œé€šè¿‡å†™ ScriptedImporter å¯ä»¥å®ç°è§£æè¿‡ç¨‹ã€‚\nåˆ›å»ºäº† HHHFile å®ä¾‹å¹¶è¯»å– name å’Œ descriptionï¼Œç„¶åå°†è¿™ä¸ªå®ä¾‹è®¾ç½®ä¸ºä¸»å¯¹è±¡ï¼ŒåŒæ—¶è®¾ç½®äº†å›¾æ ‡ã€‚\nåŒæ—¶åˆ›å»ºäº†ä¸€ä¸ª HHHName å®ä¾‹ï¼Œå¹¶è®¾ç½®ä¸ºéä¸»å¯¹è±¡ã€‚\nusing UnityEngine; using UnityEditor; using UnityEditor.AssetImporters; using System.IO; [ScriptedImporter(1, \"hhh\")] public class HHHImporter : ScriptedImporter { public override void OnImportAsset(AssetImportContext ctx) { // è¯»å–æ–‡ä»¶å†…å®¹ string[] lines = File.ReadAllLines(ctx.assetPath); // 1ï¸âƒ£ ä¸»å¯¹è±¡ HHHFile HHHFile mainAsset = ScriptableObject.CreateInstance\u003cHHHFile\u003e(); mainAsset.nameLine = lines.Length \u003e 0 ? lines[0] : \"\"; mainAsset.descriptionLine = lines.Length \u003e 1 ? lines[1] : \"\"; ctx.AddObjectToAsset(\"HHHFile\", mainAsset); ctx.SetMainObject(mainAsset); // è®¾ç½®ä¸»å¯¹è±¡å›¾æ ‡ Texture2D mainIcon = AssetDatabase.LoadAssetAtPath\u003cTexture2D\u003e(\"Assets/Icons/hhh_icon.png\"); if (mainIcon != null) { EditorGUIUtility.SetIconForObject(mainAsset, mainIcon); } // 2ï¸âƒ£ éä¸»å¯¹è±¡ HHHName HHHName subAsset = ScriptableObject.CreateInstance\u003cHHHName\u003e(); subAsset.nameLine = mainAsset.nameLine; ctx.AddObjectToAsset(subAsset.nameLine, subAsset); // è®¾ç½®éä¸»å¯¹è±¡å›¾æ ‡ Texture2D subIcon = AssetDatabase.LoadAssetAtPath\u003cTexture2D\u003e(\"Assets/Icons/wrench.png\"); if (subIcon != null) { EditorGUIUtility.SetIconForObject(subAsset, subIcon); } } } å¯¼å…¥åæ•ˆæœï¼š\nèƒ½å¤Ÿåœ¨å³ä¾§æŸ¥çœ‹ Inspectorï¼š\nè¿™é‡Œæ·»åŠ äº†ä¸€ä¸ª Inspector CustomEditorï¼Œå’Œå‰é¢ä»‹ç»çš„ç¾åŒ–æ–¹å¼æ˜¯ä¸€ä¸ªæ„æ€ï¼Œä½œç”¨åªæ˜¯å‘Šè¯‰ä½ è¿™ä¸ª HHHFile ä¸€æ ·æ˜¯å¯ä»¥è‡ªå®šä¹‰ Inspector çš„ã€‚\nusing UnityEditor; [CustomEditor(typeof(HHHFile))] public class HHHFileInspector : Editor { public override void OnInspectorGUI() { HHHFile hhh = (HHHFile)target; EditorGUILayout.LabelField(\"Name\", hhh.nameLine); EditorGUILayout.Space(); EditorGUILayout.LabelField(\"Description\", hhh.descriptionLine); } } 6.3 AssetPostprocessor ä»»ä½•èµ„äº§çš„å˜åŠ¨ï¼Œå³å¯¼å…¥ã€åˆ é™¤ã€ç§»åŠ¨ï¼Œéƒ½å¯ä»¥è§¦å‘ OnPostprocessAllAssetsã€‚é€šè¿‡å¯¹è¿™ä¸ªå‡½æ•°çš„ç¼–å†™ï¼Œèƒ½å¤Ÿå®ç°ä¸€äº›åå¤„ç†ï¼Œæ¯”å¦‚è‡ªåŠ¨è®¾ç½®å¯¼å…¥çš„å›¾ç‰‡ä¸º sprite ç­‰ã€‚\nusing UnityEngine; using UnityEditor; using System.IO; public class HHHFilePostprocessor : AssetPostprocessor { static void OnPostprocessAllAssets( string[] importedAssets, string[] deletedAssets, string[] movedAssets, string[] movedFromAssetPaths) { foreach (string path in importedAssets) { // åªå¤„ç† .hhh æ–‡ä»¶ if (Path.GetExtension(path) == \".hhh\") { // è¯»å–æ–‡ä»¶å†…å®¹ string[] lines = File.ReadAllLines(path); string nameLine = lines.Length \u003e 0 ? lines[0] : \"\"; string descLine = lines.Length \u003e 1 ? lines[1] : \"\"; // æ‰“å°æ—¥å¿— Debug.Log($\"[HHHFilePostprocessor] å¯¼å…¥: {path}\\nName: {nameLine}\\nDescription: {descLine}\"); } } } } å¯¼å…¥çš„æ—¶å€™å°±ä¼šæ‰“å°è¿™è¡Œä¿¡æ¯ï¼š\n7. éšæœºé¢œè‰² Just For Fun\nç»™æ–‡ä»¶ä¸€ä¸ªéšæœºçš„é¢œè‰²ï¼Œæ ¹æ®æ–‡ä»¶å Hash å”¯ä¸€ç¡®å®šã€‚\nusing System; using UnityEditor; using UnityEngine; [InitializeOnLoad] public static class ColorProjectWindowDecorator { static ColorProjectWindowDecorator() { EditorApplication.projectWindowItemOnGUI -= OnProjectWindowItemGUI; EditorApplication.projectWindowItemOnGUI += OnProjectWindowItemGUI; } private static void OnProjectWindowItemGUI(string guid, Rect rect) { string path = AssetDatabase.GUIDToAssetPath(guid); // åªé’ˆå¯¹ .cs æ–‡ä»¶ if (!path.EndsWith(\".cs\", StringComparison.OrdinalIgnoreCase)) return; // æå–æ–‡ä»¶å string fileName = System.IO.Path.GetFileNameWithoutExtension(path); // è®¡ç®—ä¸€ä¸ªç¡®å®šæ€§çš„å“ˆå¸Œå€¼ int hash = fileName.GetHashCode(); // å°†å“ˆå¸Œæ˜ å°„åˆ°é¢œè‰²ï¼ˆHSV -\u003e RGBï¼‰ float hue = Mathf.Abs(hash % 360) / 360f; // è‰²ç›¸ float saturation = 0.6f + (Mathf.Abs(hash) % 40) / 100f; // 0.6~1.0 float value = 0.8f; // äº®åº¦å›ºå®š Color color = Color.HSVToRGB(hue, saturation, value); float size = Math.Min(rect.width, rect.height) * 0.7f; Rect dotRect = new Rect( rect.x + rect.width / 2f - size / 2f, rect.y + rect.height / 2f - size / 2f, size, size ); DrawCircle(dotRect, color); } private static void DrawCircle(Rect rect, Color color) { // ç”¨ Handles ç»˜åˆ¶åœ†å½¢ï¼ˆæ¯”æ–¹å½¢æ›´æŸ”å’Œï¼‰ Handles.BeginGUI(); Color oldColor = Handles.color; Handles.color = color; Handles.DrawSolidDisc(rect.center, Vector3.forward, rect.width / 2); Handles.color = oldColor; Handles.EndGUI(); } } ","wordCount":"9204","inLanguage":"zh","image":"https://cronrpc.github.io/cover.png","datePublished":"2025-11-12T15:01:44+08:00","dateModified":"2025-11-12T15:01:44+08:00","author":{"@type":"Person","name":"cronrpc"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://cronrpc.github.io/zh/posts/unity-editor-extensions/"},"publisher":{"@type":"Organization","name":"cronrpc ä¸­æ–‡","logo":{"@type":"ImageObject","url":"https://cronrpc.github.io/icons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://cronrpc.github.io/zh/ accesskey=h title="cronrpc (Alt + H)"><img src=https://cronrpc.github.io/apple-touch-icon.png alt aria-label=logo height=35>cronrpc</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://cronrpc.github.io/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://cronrpc.github.io/zh/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://cronrpc.github.io/zh/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://cronrpc.github.io/zh/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://cronrpc.github.io/zh/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://cronrpc.github.io/zh/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://cronrpc.github.io/zh/>ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://cronrpc.github.io/zh/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Unity Editor Extensions</h1><div class=post-meta><span title='2025-11-12 15:01:44 +0800 +0800'>åä¸€æœˆ 12, 2025</span>&nbsp;Â·&nbsp;19 åˆ†é’Ÿ&nbsp;Â·&nbsp;9204 å­—&nbsp;Â·&nbsp;cronrpc</div></header><figure class=entry-cover><img loading=eager srcset='https://cronrpc.github.io/zh/posts/unity-editor-extensions/cover_hu_fa9bb4ab9455c937.png 360w,https://cronrpc.github.io/zh/posts/unity-editor-extensions/cover_hu_558de3830f560bdf.png 480w,https://cronrpc.github.io/zh/posts/unity-editor-extensions/cover_hu_6fdab1fc124a4548.png 720w,https://cronrpc.github.io/zh/posts/unity-editor-extensions/cover_hu_cfb7ef7a4cd0cb4c.png 1080w,https://cronrpc.github.io/zh/posts/unity-editor-extensions/cover_hu_9c9d82cd82d41e46.png 1500w,https://cronrpc.github.io/zh/posts/unity-editor-extensions/cover.png 1600w' src=https://cronrpc.github.io/zh/posts/unity-editor-extensions/cover.png sizes="(min-width: 768px) 720px, 100vw" width=1600 height=900 alt></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#1-unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯†>1. Unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯†</a><ul><li><a href=#11-ä»€ä¹ˆæ˜¯æ³¨è§£attribute>1.1 ä»€ä¹ˆæ˜¯æ³¨è§£ï¼ˆAttributeï¼‰ï¼Ÿ</a></li><li><a href=#12-å¦‚ä½•ç»™ç±»ä¸ç±»çš„æ–¹æ³•åŠ æ³¨è§£>1.2 å¦‚ä½•ç»™ç±»ä¸ç±»çš„æ–¹æ³•åŠ æ³¨è§£</a></li><li><a href=#13-å¦‚ä½•è¯»å–æ³¨è§£>1.3 å¦‚ä½•è¯»å–æ³¨è§£</a></li></ul></li><li><a href=#2-è‡ªå®šä¹‰-inspector>2. è‡ªå®šä¹‰ Inspector</a><ul><li><a href=#21-åˆ©ç”¨-attribute-ç›´æ¥æ§åˆ¶>2.1 åˆ©ç”¨ Attribute ç›´æ¥æ§åˆ¶</a></li><li><a href=#22-customeditor--è‡ªå®šä¹‰ç•Œé¢çš„æ–¹æ³•>2.2 CustomEditor / è‡ªå®šä¹‰ç•Œé¢çš„æ–¹æ³•</a></li><li><a href=#23-ç”Ÿå‘½å‘¨æœŸ>2.3 ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href=#24-editorserializedobject>2.4 Editor.serializedObject</a></li><li><a href=#25-guilayout--imgui>2.5 GUILayout / IMGUI</a></li><li><a href=#26-editorguilayout>2.6 EditorGUILayout</a></li><li><a href=#27-handles--onscenegui>2.7 Handles / OnSceneGUI</a></li><li><a href=#28-gizmos--ondrawgizmos>2.8 Gizmos / OnDrawGizmos</a></li></ul></li><li><a href=#3-å·¥å…·ç±»>3. å·¥å…·ç±»</a><ul><li><a href=#31-editorutility>3.1 EditorUtility</a></li><li><a href=#32-assetdatabase>3.2 AssetDatabase</a></li><li><a href=#33-selection>3.3 Selection</a></li><li><a href=#34-editorwindowongui>3.4 EditorWindow.OnGUI</a></li><li><a href=#35-projectwindowitemongui>3.5 projectWindowItemOnGUI</a></li><li><a href=#36-editorprefs>3.6 EditorPrefs</a></li><li><a href=#37-monobehaviourongui>3.7 MonoBehaviour.OnGUI</a></li></ul></li><li><a href=#4-menuitem>4 MenuItem</a><ul><li><a href=#41-é¡¶éƒ¨èœå•æ >4.1 é¡¶éƒ¨èœå•æ </a></li><li><a href=#42-å³é”®èœå•æ >4.2 å³é”®èœå•æ </a></li></ul></li><li><a href=#5-é£æ ¼ç¾åŒ–>5. é£æ ¼ç¾åŒ–</a><ul><li><a href=#51-truefalse-å˜å¼€å…³æŒ‰é’®>5.1 True/False å˜å¼€å…³æŒ‰é’®</a></li><li><a href=#52-å…¨å±€æ ·å¼æ›¿æ¢>5.2 å…¨å±€æ ·å¼æ›¿æ¢</a></li><li><a href=#53-hierarchy-ç¾åŒ–>5.3 Hierarchy ç¾åŒ–</a></li><li><a href=#54-è®¾ç½®ç»„ä»¶å›¾æ ‡>5.4 è®¾ç½®ç»„ä»¶å›¾æ ‡</a></li></ul></li><li><a href=#6-è‡ªå®šä¹‰ç±»å‹>6. è‡ªå®šä¹‰ç±»å‹</a><ul><li><a href=#61-scriptableobject>6.1 ScriptableObject</a></li><li><a href=#62-assetimporter-è§£æ>6.2 AssetImporter è§£æ</a></li><li><a href=#63-assetpostprocessor>6.3 AssetPostprocessor</a></li></ul></li><li><a href=#7-éšæœºé¢œè‰²>7. éšæœºé¢œè‰²</a></li></ul></nav></div></details></div><div class=post-content><p>é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œç¼–è¾‘å™¨å¼€å‘çš„çŸ¥è¯†è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ­£ç¡®çš„å­¦ä¹ æ–¹å¼è¿˜æ˜¯ä»å®è·µå…¥æ‰‹ï¼Œç”¨æŸ¥å·¥å…·ä¸€æ ·çš„æ–¹å¼å»å­¦ä¹ ä½¿ç”¨ã€‚</p><h2 id=1-unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯†>1. Unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯†<a hidden class=anchor aria-hidden=true href=#1-unityç¼–è¾‘å™¨å¼€å‘å‰ç½®çŸ¥è¯†>#</a></h2><h3 id=11-ä»€ä¹ˆæ˜¯æ³¨è§£attribute>1.1 ä»€ä¹ˆæ˜¯æ³¨è§£ï¼ˆAttributeï¼‰ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#11-ä»€ä¹ˆæ˜¯æ³¨è§£attribute>#</a></h3><p>æ³¨è§£ï¼ˆAttributeï¼‰ æ˜¯ C# æä¾›çš„ä¸€ç§å…ƒæ•°æ®ï¼ˆMetadataï¼‰æœºåˆ¶ï¼Œç”¨äºåœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µã€å±æ€§ç­‰ä¸Šé™„åŠ é¢å¤–çš„ä¿¡æ¯ã€‚</p><p>åœ¨ Unity ç¼–è¾‘å™¨å¼€å‘ä¸­ï¼Œæ³¨è§£å¸¸ç”¨äºå‘Šè¯‰ Unity æˆ–è‡ªå®šä¹‰çš„ç¼–è¾‘å™¨è„šæœ¬å¦‚ä½•å¤„ç†æŸä¸ªå¯¹è±¡æˆ–æ–¹æ³•ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=na>[Serializable]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>PlayerData</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>health</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>score</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[SerializeField]</span> <span class=kd>private</span> <span class=kt>int</span> <span class=n>health</span> <span class=p>=</span> <span class=m>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[Range(0, 10)]</span> <span class=kd>public</span> <span class=kt>float</span> <span class=n>speed</span> <span class=p>=</span> <span class=m>5f</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[MenuItem(&#34;Tools/Run Custom Action&#34;)]</span>  
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>Run</span><span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span></code></pre></div><p>è¿™é‡Œçš„ <code>[Serializable]</code> å‘Šè¯‰ Unity è¿™ä¸ªç±»å¯ä»¥è¢«åºåˆ—åŒ–ï¼Œä»è€Œèƒ½åœ¨ Inspector ä¸­æ˜¾ç¤ºã€‚</p><h3 id=12-å¦‚ä½•ç»™ç±»ä¸ç±»çš„æ–¹æ³•åŠ æ³¨è§£>1.2 å¦‚ä½•ç»™ç±»ä¸ç±»çš„æ–¹æ³•åŠ æ³¨è§£<a hidden class=anchor aria-hidden=true href=#12-å¦‚ä½•ç»™ç±»ä¸ç±»çš„æ–¹æ³•åŠ æ³¨è§£>#</a></h3><p>ä½ å¯ä»¥åœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µæˆ–å±æ€§å‰åŠ ä¸Šæ–¹æ‹¬å· <code>[]</code> æ¥å£°æ˜æ³¨è§£ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=c1>// ç»™ç±»åŠ æ³¨è§£</span>
</span></span><span class=line><span class=cl><span class=na>[MyCustom(&#34;Player Class&#34;)]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Player</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç»™å­—æ®µåŠ æ³¨è§£</span>
</span></span><span class=line><span class=cl><span class=na>    [Range(0, 100)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>health</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ç»™æ–¹æ³•åŠ æ³¨è§£</span>
</span></span><span class=line><span class=cl><span class=na>    [MyCustom(&#34;Init Method&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Initialize</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;Player initialized&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ç±»</span>
</span></span><span class=line><span class=cl><span class=na>[System.AttributeUsage(System.AttributeTargets.Class | System.AttributeTargets.Method)]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>MyCustomAttribute</span> <span class=p>:</span> <span class=n>System</span><span class=p>.</span><span class=n>Attribute</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>Description</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>MyCustomAttribute</span><span class=p>(</span><span class=kt>string</span> <span class=n>description</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Description</span> <span class=p>=</span> <span class=n>description</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>ä¸Šä¾‹ä¸­ï¼š</p><ul><li>MyCustomAttribute æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£ï¼›</li><li><code>[MyCustom("xxx")]</code> è¡¨ç¤ºåœ¨ç±»æˆ–æ–¹æ³•ä¸Šé™„åŠ é¢å¤–è¯´æ˜ä¿¡æ¯ã€‚</li><li>æ³¨æ„è¿™é‡Œçš„å‘½åæ—¶å¯ä»¥çœç•¥ <code>Attribute</code>ï¼Œä½¿ç”¨æ—¶ä¹Ÿå¯ä»¥çœç•¥ <code>Attribute</code>ï¼Œå‰ææ˜¯æ— æ­§ä¹‰ã€‚</li></ul><h3 id=13-å¦‚ä½•è¯»å–æ³¨è§£>1.3 å¦‚ä½•è¯»å–æ³¨è§£<a hidden class=anchor aria-hidden=true href=#13-å¦‚ä½•è¯»å–æ³¨è§£>#</a></h3><p>è¯»å–æ³¨è§£é€šå¸¸é€šè¿‡ <strong>åå°„ï¼ˆReflectionï¼‰</strong> å®ç°ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>System</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>System.Reflection</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>AttributeReader</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [MyCustom(&#34;Example Method&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=k>void</span> <span class=n>Example</span><span class=p>()</span> <span class=p>{</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [ContextMenu(&#34;Test Read Attributes&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>TestRead</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è·å–ç±»å‹</span>
</span></span><span class=line><span class=cl>        <span class=n>Type</span> <span class=n>type</span> <span class=p>=</span> <span class=k>typeof</span><span class=p>(</span><span class=n>AttributeReader</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// éå†æ–¹æ³•</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=n>MethodInfo</span> <span class=n>method</span> <span class=k>in</span> <span class=n>type</span><span class=p>.</span><span class=n>GetMethods</span><span class=p>(</span><span class=n>BindingFlags</span><span class=p>.</span><span class=n>Public</span> <span class=p>|</span> <span class=n>BindingFlags</span><span class=p>.</span><span class=n>NonPublic</span> <span class=p>|</span> <span class=n>BindingFlags</span><span class=p>.</span><span class=n>Instance</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// è·å–è‡ªå®šä¹‰æ³¨è§£</span>
</span></span><span class=line><span class=cl>            <span class=n>MyCustomAttribute</span> <span class=n>attr</span> <span class=p>=</span> <span class=n>method</span><span class=p>.</span><span class=n>GetCustomAttribute</span><span class=p>&lt;</span><span class=n>MyCustomAttribute</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>attr</span> <span class=p>!=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>$&#34;æ–¹æ³• {method.Name} çš„æè¿°ä¸º: {attr.Description}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>è¿è¡Œåä¼šåœ¨ Unity æ§åˆ¶å°è¾“å‡ºæ³¨è§£å†…å®¹ã€‚</p><p>è¿™åœ¨ç¼–è¾‘å™¨å·¥å…·ä¸­éå¸¸å¸¸è§ï¼Œæ¯”å¦‚æ‰«æé¡¹ç›®ä¸­æ‰€æœ‰æ‰“äº†æŸä¸ªæ ‡ç­¾çš„ç±»å¹¶è‡ªåŠ¨æ³¨å†Œã€‚</p><h2 id=2-è‡ªå®šä¹‰-inspector>2. è‡ªå®šä¹‰ Inspector<a hidden class=anchor aria-hidden=true href=#2-è‡ªå®šä¹‰-inspector>#</a></h2><h3 id=21-åˆ©ç”¨-attribute-ç›´æ¥æ§åˆ¶>2.1 åˆ©ç”¨ Attribute ç›´æ¥æ§åˆ¶<a hidden class=anchor aria-hidden=true href=#21-åˆ©ç”¨-attribute-ç›´æ¥æ§åˆ¶>#</a></h3><p>åˆ©ç”¨ <code>Attribute</code> å¯ä»¥ç›´æ¥æ¥è®¾ç½® <code>Inspector</code> è€Œä¸ç”¨å•ç‹¬ç¼–å†™æ•´ä¸ªç•Œé¢ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>TheAttributeSample</span> <span class=p>:</span> <span class=n>MonoBehaviour</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [Header(&#34;åŸºç¡€æ˜¾ç¤º&#34;)]</span>
</span></span><span class=line><span class=cl><span class=na>    [SerializeField, Tooltip(&#34;ç§»åŠ¨é€Ÿåº¦ (0~10)&#34;)]</span>
</span></span><span class=line><span class=cl><span class=na>    [Range(0, 10)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>moveSpeed</span> <span class=p>=</span> <span class=m>5f</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [Space]</span>
</span></span><span class=line><span class=cl><span class=na>    [Header(&#34;å¤šè¡Œæ–‡æœ¬&#34;)]</span>
</span></span><span class=line><span class=cl><span class=na>    [TextArea(2, 5)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>description</span> <span class=p>=</span> <span class=s>&#34;è¯´æ˜æ–‡å­—&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [ContextMenu(&#34;é‡ç½®å‚æ•°&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>ResetValues</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>moveSpeed</span> <span class=p>=</span> <span class=m>5f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>description</span> <span class=p>=</span> <span class=s>&#34;è¯´æ˜æ–‡å­—&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;å·²é‡ç½®å‚æ•°&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [Space]</span>
</span></span><span class=line><span class=cl><span class=na>    [Header(&#34;ä¸Šä¸‹æ–‡æŒ‰é’®&#34;)]</span>
</span></span><span class=line><span class=cl><span class=na>    [ContextMenuItem(&#34;éšæœºåŒ–æ•°å€¼&#34;, &#34;RandomizeValue&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=n>score</span> <span class=p>=</span> <span class=m>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>RandomizeValue</span><span class=p>()</span> <span class=p>=&gt;</span> <span class=n>score</span> <span class=p>=</span> <span class=n>Random</span><span class=p>.</span><span class=n>Range</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=m>100</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [Space]</span>
</span></span><span class=line><span class=cl><span class=na>    [Header(&#34;é¢œè‰²ä¸æšä¸¾&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Color</span> <span class=n>colorValue</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>green</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Mode</span> <span class=n>currentMode</span> <span class=p>=</span> <span class=n>Mode</span><span class=p>.</span><span class=n>Attack</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>enum</span> <span class=n>Mode</span> <span class=p>{</span> <span class=n>Idle</span><span class=p>,</span> <span class=n>Attack</span><span class=p>,</span> <span class=n>Defend</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [Space]</span>
</span></span><span class=line><span class=cl><span class=na>    [Header(&#34;å¼•ç”¨ä¸æ•°ç»„&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Transform</span> <span class=n>target</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>GameObject</span><span class=p>[]</span> <span class=n>enemyList</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>åœ¨ä¿®æ”¹åï¼š</p><ul><li><code>Header</code> æ·»åŠ ä¸€ä¸ªæ ‡é¢˜</li><li><code>Space</code> æ˜¯ç©ºè¡Œ</li><li><code>[Range(0, 100)]</code> å’Œ <code>[TextArea()]</code> æ˜¯å…·ä½“çš„ç•Œé¢æ ·å¼è°ƒæ•´ã€‚</li><li><code>[Tooltip("xxx")]</code> æ˜¯é¼ æ ‡ç§»åŠ¨ä¸Šå»çš„æç¤ºã€‚</li></ul><p><img alt="attribute sample 1" loading=lazy src=/zh/posts/unity-editor-extensions/attribute-sample-1.png></p><p><code>ContextMenu</code> é‡ç½®å‚æ•°æŒ‰é’®æ§åˆ¶çš„æ˜¯ç»„ä»¶é‚£ä¸ªåœ°æ–¹ã€‚</p><p><img alt="attribute sample 2" loading=lazy src=/zh/posts/unity-editor-extensions/attribute-sample-2.png></p><p><code>ContextMenuItem</code> æ˜¯åœ¨å±æ€§çš„å³é”®èœå•ä¸­ã€‚</p><p><img alt="attribute sample 3" loading=lazy src=/zh/posts/unity-editor-extensions/attribute-sample-3.png></p><h3 id=22-customeditor--è‡ªå®šä¹‰ç•Œé¢çš„æ–¹æ³•>2.2 CustomEditor / è‡ªå®šä¹‰ç•Œé¢çš„æ–¹æ³•<a hidden class=anchor aria-hidden=true href=#22-customeditor--è‡ªå®šä¹‰ç•Œé¢çš„æ–¹æ³•>#</a></h3><p>å‰é¢çš„ <code>Attribute</code> ä¸é€»è¾‘ä»£ç è¿˜æ˜¯è´´åœ¨ä¸€èµ·çš„ï¼Œå¾ˆæ–¹ä¾¿ä½†æ˜¯è‡ªå®šä¹‰ç¨‹åº¦è¿˜ä¸å¤Ÿã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä¸“é—¨ä¸ºä¸€ä¸ª Component æ¥ç¼–å†™å®ƒçš„ Inspectorï¼Œä¸‹é¢å°±æ¥ä»‹ç»è¿™ç§æ–¹æ³•ã€‚</p><p>é¦–å…ˆè¦ç¡®ä¿æˆ‘ä»¬çš„ä»£ç çš„ <code>.cs</code> æ–‡ä»¶éœ€è¦æ”¾åœ¨ä»»æ„çš„åä¸º <code>Editor</code> çš„æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œç„¶åä½¿ç”¨ <code>CustomEditor</code> æ¥å®ç°è‡ªå®šä¹‰ç»˜åˆ¶ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>System</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[CustomEditor(typeof(TheAttributeSample))]</span> <span class=c1>// å…³è”è„šæœ¬ç±»å‹</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>TheAttributeSampleEditor</span> <span class=p>:</span> <span class=n>Editor</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>SerializedProperty</span> <span class=n>moveSpeed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>OnEnable</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>moveSpeed</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;moveSpeed&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnInspectorGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 1. æ›´æ–°åºåˆ—åŒ–å¯¹è±¡</span>
</span></span><span class=line><span class=cl>        <span class=n>serializedObject</span><span class=p>.</span><span class=n>Update</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 2. ç»˜åˆ¶é»˜è®¤å±æ€§</span>
</span></span><span class=line><span class=cl>        <span class=n>DrawDefaultInspector</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 3. è‡ªå®šä¹‰æŒ‰é’®</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=s>&#34;æ‰“å°ç§»åŠ¨é€Ÿåº¦&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;MoveSpeed = &#34;</span> <span class=p>+</span> <span class=n>moveSpeed</span><span class=p>.</span><span class=n>floatValue</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 4. åº”ç”¨ä¿®æ”¹</span>
</span></span><span class=line><span class=cl>        <span class=n>serializedObject</span><span class=p>.</span><span class=n>ApplyModifiedProperties</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li><code>[CustomEditor(typeof(TheAttributeSample))]</code> è¡¨ç¤ºå…³è”çš„ç±»æ˜¯ <code>TheAttributeSample</code></li><li><code>OnInspectorGUI</code> ä¼šåœ¨æ˜¾ç¤ºå’Œè¾“å…¥æ›´æ”¹æ—¶è°ƒç”¨ã€‚</li><li><code>OnInspectorGUI</code> æ˜¯ <code>override</code> æ„å‘³ç€å¯ä»¥é€šè¿‡ <code>base.OnInspectorGUI()</code> æ¥è¡¨ç¤ºé»˜è®¤ç•Œé¢ã€‚</li></ul><p><img alt="Custom Editor Inspector" loading=lazy src=/zh/posts/unity-editor-extensions/Custom-Editor-Inspector.png></p><p>è¿™é‡Œè¿˜æœ‰ä¸ªç¨å¾®å¤æ‚ç‚¹çš„ç”¨æ³•ï¼Œå°±æ˜¯å¯ä»¥æœ‰å‚æ•°ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>public</span> <span class=n>CustomEditor</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=n>Type</span> <span class=n>inspectedType</span><span class=p>,</span> <span class=kt>bool</span> <span class=n>editorForChildClasses</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>bool</span> <span class=n>isFallback</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä½¿ç”¨ä¸‹é¢è¿™è¡Œå¯æ›¿æ¢å…¨å±€ MonoBehaviour çš„ Inspector</span>
</span></span><span class=line><span class=cl><span class=na>[CustomEditor(typeof(MonoBehaviour), true, isFallback = true)]</span>
</span></span></code></pre></div><p>è¿™æ ·å¯ä»¥ç›´æ¥æ›¿æ¢æ‰å…¨å±€çš„ <code>MonoBehaviour</code>ï¼Œä½†æ˜¯ <code>isFallback = true</code> ä¿è¯äº†åªæœ‰æ²¡ä»»ä½•å…¶ä»–å¯ç”¨é¡¹çš„æ—¶å€™æ‰ä¼šä½¿ç”¨å½“å‰çš„è¿™ä¸ªã€‚</p><h3 id=23-ç”Ÿå‘½å‘¨æœŸ>2.3 ç”Ÿå‘½å‘¨æœŸ<a hidden class=anchor aria-hidden=true href=#23-ç”Ÿå‘½å‘¨æœŸ>#</a></h3><p>åœ¨è¿è¡Œæ—¶ï¼ˆPlay Modeï¼‰æˆ‘ä»¬æœ‰ï¼š</p><pre tabindex=0><code>Awake â†’ OnEnable â†’ Start â†’ Update â†’ OnDisable â†’ OnDestroy
</code></pre><p>åœ¨ç¼–è¾‘å™¨æ‰©å±•ï¼ˆEditor Modeï¼‰ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„ä½“ç³»ï¼Œåªä¸è¿‡å‘ç”Ÿåœ¨ç¼–è¾‘å™¨å±‚é¢ï¼š</p><pre tabindex=0><code>OnEnable â†’ OnInspectorGUI / OnSceneGUI (é‡å¤æ‰§è¡Œ) â†’ OnDisable
</code></pre><p>è¿™äº›å›è°ƒè¿è¡Œåœ¨ UnityEditor å‘½åç©ºé—´ä¸‹ï¼›Unity ä¼šåœ¨ç¼–è¾‘å™¨çŠ¶æ€å˜åŠ¨ï¼ˆæ¯”å¦‚è„šæœ¬é‡ç¼–è¯‘ã€é€‰ä¸­ç‰©ä½“ã€æ‰“å¼€ Inspector ç­‰ï¼‰æ—¶è‡ªåŠ¨è§¦å‘ã€‚</p><p>Editor ç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹ï¼ˆæŒ‰æ—¶é—´é¡ºåºï¼‰ï¼š</p><table><thead><tr><th>é˜¶æ®µ</th><th>å›è°ƒæ–¹æ³•</th><th>è°ƒç”¨æ—¶æœº</th><th>å¸¸è§ç”¨é€”</th></tr></thead><tbody><tr><td><strong>åˆå§‹åŒ–é˜¶æ®µ</strong></td><td><code>OnEnable()</code></td><td>å½“ Inspector æ‰“å¼€ / é€‰ä¸­ç‰©ä½“ / è„šæœ¬é‡ç¼–è¯‘æ—¶</td><td>ç¼“å­˜ <code>SerializedProperty</code>ã€æ³¨å†Œäº‹ä»¶ã€åˆå§‹åŒ–èµ„æº</td></tr><tr><td><strong>æ¿€æ´»é˜¶æ®µ</strong></td><td><code>OnInspectorGUI()</code></td><td>æ¯æ¬¡ Inspector é‡ç»˜æ—¶è°ƒç”¨ï¼ˆéå¸¸é¢‘ç¹ï¼‰</td><td>ç»˜åˆ¶ UIã€æ£€æµ‹ç”¨æˆ·è¾“å…¥ã€ä¿®æ”¹æ•°æ®</td></tr><tr><td><strong>åœºæ™¯ç»˜åˆ¶é˜¶æ®µ</strong></td><td><code>OnSceneGUI()</code></td><td>å½“å¯¹è±¡åœ¨ Scene è§†å›¾ä¸­è¢«é€‰ä¸­æˆ– Scene è§†å›¾é‡ç»˜æ—¶</td><td>ç»˜åˆ¶ Gizmoã€Handlesã€äº¤äº’æ“ä½œ</td></tr><tr><td><strong>é¢„è§ˆé˜¶æ®µ</strong></td><td><code>HasPreviewGUI()</code> / <code>OnPreviewGUI()</code></td><td>åœ¨ Inspector åº•éƒ¨ç»˜åˆ¶é¢„è§ˆï¼ˆæ¨¡å‹ã€éŸ³é¢‘ç­‰ï¼‰</td><td>è‡ªå®šä¹‰èµ„æºé¢„è§ˆçª—å£</td></tr><tr><td><strong>æ›´æ–°é˜¶æ®µ</strong></td><td><code>OnInspectorUpdate()</code></td><td>ç¼–è¾‘å™¨å®šæœŸåˆ·æ–°ï¼ˆå¤§çº¦ 10 FPSï¼‰</td><td>å®šæ—¶åˆ·æ–°çŠ¶æ€ã€æ£€æµ‹å¼‚æ­¥ä»»åŠ¡</td></tr><tr><td><strong>é”€æ¯é˜¶æ®µ</strong></td><td><code>OnDisable()</code></td><td>å½“ Inspector è¢«å…³é—­ã€åˆ‡æ¢é€‰ä¸­å¯¹è±¡æˆ– Domain Reload æ—¶</td><td>æ³¨é”€äº‹ä»¶ã€é‡Šæ”¾å†…å­˜ã€æ¸…ç†å¼•ç”¨</td></tr></tbody></table><h3 id=24-editorserializedobject>2.4 Editor.serializedObject<a hidden class=anchor aria-hidden=true href=#24-editorserializedobject>#</a></h3><p>åœ¨ Editor è„šæœ¬ä¸­ï¼ŒserializedObject æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒæ˜¯å¯¹ä½ æ­£åœ¨ç¼–è¾‘çš„è„šæœ¬ï¼ˆå³ targetï¼‰çš„ä¸€ä¸ª åºåˆ—åŒ–åŒ…è£…ï¼ˆå°è£…å±‚ï¼‰ã€‚</p><p>å¦‚æœä½ åœ¨ Editor é‡Œç›´æ¥å†™ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=p>((</span><span class=n>MyScript</span><span class=p>)</span><span class=n>target</span><span class=p>).</span><span class=n>speed</span> <span class=p>=</span> <span class=m>5</span><span class=p>;</span>
</span></span></code></pre></div><p>å®ƒä¸æ”¯æŒï¼š</p><ul><li>Undo</li><li>Prefab æ ‡è®°è¦†ç›–</li><li>å¤šé€‰å¯¹è±¡ target æ—¶æ— æ³•ç»Ÿä¸€ä¿®æ”¹</li></ul><p>Unity çš„åºåˆ—åŒ–ç³»ç»Ÿè§£å†³äº†è¿™äº›é—®é¢˜ï¼Œæ‰€ä»¥æä¾›äº† <code>serializedObject</code>ã€‚</p><ul><li><code>serializedObject</code> = å½“å‰ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰çš„åºåˆ—åŒ–ç‰ˆæœ¬</li><li><code>SerializedProperty</code> = è¯¥å¯¹è±¡ä¸­çš„ä¸€ä¸ªå­—æ®µçš„åºåˆ—åŒ–åŒ…è£…</li></ul><p>æ¯”å¦‚ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=n>SerializedProperty</span> <span class=n>moveSpeed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>OnEnable</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>moveSpeed</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;moveSpeed&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnInspectorGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>serializedObject</span><span class=p>.</span><span class=n>Update</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>speed</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>serializedObject</span><span class=p>.</span><span class=n>ApplyModifiedProperties</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>ä¸Šé¢ä»£ç å¯ä»¥è¿™ä¹ˆç†è§£ï¼šUpdate æ˜¯æŠŠ target çš„æ•°æ®åŒæ­¥åˆ° serializedObjectï¼ŒEditorGUILayout.PropertyField æ˜¯è‡ªåŠ¨æ ¹æ®ç±»å‹æ˜¾ç¤ºåœ¨æ“ä½œç•Œé¢ï¼Œä¿®æ”¹çš„æ—¶å€™ä¼šåŒæ­¥å›ä¼ ã€‚è€Œ <code>ApplyModifiedProperties</code> æ˜¯æŠŠ serializedObject çš„ä¿®æ”¹ï¼Œä¼ é€’å› targetã€‚</p><h3 id=25-guilayout--imgui>2.5 GUILayout / IMGUI<a hidden class=anchor aria-hidden=true href=#25-guilayout--imgui>#</a></h3><p>GUILayout å±äº IMGUIï¼ˆImmediate Mode GUIï¼‰ç³»ç»Ÿï¼Œå®ƒæ˜¯æœ€åŸºç¡€çš„ GUI ç»˜åˆ¶ç±»ï¼Œèƒ½åœ¨ï¼š</p><ul><li><code>MonoBehaviour.OnGUI()</code>ï¼ˆæ¸¸æˆè¿è¡Œæ—¶ï¼‰</li><li><code>Editor.OnInspectorGUI()</code>ï¼ˆç¼–è¾‘å™¨è‡ªå®šä¹‰ Inspectorï¼‰</li><li><code>EditorWindow.OnGUI()</code>ï¼ˆè‡ªå®šä¹‰ç¼–è¾‘å™¨çª—å£ï¼‰</li></ul><p>ä¸­ä½¿ç”¨ã€‚</p><p>åœ¨ Editor é‡Œä½¿ç”¨æ—¶ï¼Œä¸€èˆ¬æˆ‘ä»¬è¿™æ ·å†™ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnInspectorGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;æ ‡é¢˜&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>ç®€è®°ï¼šLabel / Text / Toggle / Slider / Button / Layout</p><p>ä¸€ä¸ªç»¼åˆçš„ä¾‹å­ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[CustomEditor(typeof(TheAttributeSample))]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>TheAttributeSampleEditor</span> <span class=p>:</span> <span class=n>Editor</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>bool</span> <span class=n>toggleValue</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>sliderValue</span> <span class=p>=</span> <span class=m>5f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>string</span> <span class=n>inputText</span> <span class=p>=</span> <span class=s>&#34;åˆå§‹æ–‡æœ¬&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>string</span> <span class=n>multiLine</span> <span class=p>=</span> <span class=s>&#34;å¤šè¡Œæ–‡æœ¬\næ”¯æŒæ¢è¡Œ&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Vector2</span> <span class=n>scrollPos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnInspectorGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// æ ‡é¢˜</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;ğŸ‘‹ è‡ªå®šä¹‰ Inspector - GUILayout æ§ä»¶æ¼”ç¤º&#34;</span><span class=p>,</span> <span class=n>EditorStyles</span><span class=p>.</span><span class=n>boldLabel</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è¾“å…¥æ¡†</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;å•è¡Œæ–‡æœ¬è¾“å…¥:&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>inputText</span> <span class=p>=</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>TextField</span><span class=p>(</span><span class=n>inputText</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// å¤šè¡Œè¾“å…¥æ¡†</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;å¤šè¡Œæ–‡æœ¬è¾“å…¥:&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>multiLine</span> <span class=p>=</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>TextArea</span><span class=p>(</span><span class=n>multiLine</span><span class=p>,</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>Height</span><span class=p>(</span><span class=m>60</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// å¼€å…³</span>
</span></span><span class=line><span class=cl>        <span class=n>toggleValue</span> <span class=p>=</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>Toggle</span><span class=p>(</span><span class=n>toggleValue</span><span class=p>,</span> <span class=s>&#34;å¯ç”¨æŸä¸ªåŠŸèƒ½&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ»‘æ¡</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>$&#34;ç§»åŠ¨é€Ÿåº¦: {sliderValue:F2}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>sliderValue</span> <span class=p>=</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>HorizontalSlider</span><span class=p>(</span><span class=n>sliderValue</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=m>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æŒ‰é’®</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=s>&#34;æ‰“å°å½“å‰çŠ¶æ€&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>$&#34;è¾“å…¥: {inputText}, å¼€å…³: {toggleValue}, é€Ÿåº¦: {sliderValue}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Box</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>,</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>ExpandWidth</span><span class=p>(</span><span class=kc>true</span><span class=p>),</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>Height</span><span class=p>(</span><span class=m>2</span><span class=p>));</span> <span class=c1>// åˆ†éš”çº¿</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ»šåŠ¨åŒºåŸŸ</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;æ»šåŠ¨åŒºåŸŸç¤ºä¾‹ï¼š&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>scrollPos</span> <span class=p>=</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>BeginScrollView</span><span class=p>(</span><span class=n>scrollPos</span><span class=p>,</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>Height</span><span class=p>(</span><span class=m>100</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span> <span class=n>i</span> <span class=p>&lt;</span> <span class=m>20</span><span class=p>;</span> <span class=n>i</span><span class=p>++)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;é¡¹ç›® &#34;</span> <span class=p>+</span> <span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>EndScrollView</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;å¸ƒå±€æ§åˆ¶:&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>BeginHorizontal</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=s>&#34;å·¦æŒ‰é’®&#34;</span><span class=p>))</span> <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;å·¦&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=s>&#34;å³æŒ‰é’®&#34;</span><span class=p>))</span> <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;å³&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>EndHorizontal</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;ç¤ºä¾‹ç»“æŸ ğŸ¯&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>æ ·å¼ï¼š</p><p><img alt="the attribute sample" loading=lazy src=/zh/posts/unity-editor-extensions/the-attribute-sample.png></p><h3 id=26-editorguilayout>2.6 EditorGUILayout<a hidden class=anchor aria-hidden=true href=#26-editorguilayout>#</a></h3><p>EditorGUILayout æ˜¯ Unity ç¼–è¾‘å™¨è„šæœ¬é‡Œçš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œå®ƒå¯ä»¥å¸®ä½ åœ¨ Inspector æˆ– è‡ªå®šä¹‰çª—å£é‡Œæ˜¾ç¤ºå„ç§æ§ä»¶ï¼Œæ¯”å¦‚æŒ‰é’®ã€æ»‘æ¡ã€é¢œè‰²é€‰æ‹©å™¨ç­‰ã€‚</p><p>è‡ªåŠ¨æ”¯æŒ <code>Undoã€Prefab è¦†ç›–ã€å¤šå¯¹è±¡ç¼–è¾‘</code>ã€‚</p><p>å’Œ GUILayout çš„åŒºåˆ«æ˜¯ï¼Œå®ƒæ”¯æŒå¤šå¯¹è±¡ï¼Œå†™èµ·æ¥æ›´ç®€æ´ï¼Œæ ·å¼ç»Ÿä¸€ã€‚</p><p>å¸¸ç”¨æ§ä»¶ï¼š</p><table><thead><tr><th>æ§ä»¶</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>LabelField</td><td>æ˜¾ç¤ºæ–‡æœ¬</td><td><code>EditorGUILayout.LabelField("æ ‡é¢˜")</code></td></tr><tr><td>TextField</td><td>è¾“å…¥å•è¡Œæ–‡å­—</td><td><code>EditorGUILayout.TextField("åå­—", name)</code></td></tr><tr><td>TextArea</td><td>å¤šè¡Œæ–‡å­—</td><td><code>EditorGUILayout.TextArea(description)</code></td></tr><tr><td>Toggle</td><td>å¼€å…³</td><td><code>EditorGUILayout.Toggle("æ˜¯å¦å¯ç”¨", isOn)</code></td></tr><tr><td>Slider</td><td>æ»‘æ¡</td><td><code>EditorGUILayout.Slider("é€Ÿåº¦", speed, 0, 10)</code></td></tr><tr><td>IntField</td><td>æ•´æ•°è¾“å…¥</td><td><code>EditorGUILayout.IntField("ç”Ÿå‘½", hp)</code></td></tr><tr><td>FloatField</td><td>æµ®ç‚¹è¾“å…¥</td><td><code>EditorGUILayout.FloatField("é€Ÿåº¦", speed)</code></td></tr><tr><td>Vector3Field</td><td>ä¸‰ç»´å‘é‡</td><td><code>EditorGUILayout.Vector3Field("ä½ç½®", pos)</code></td></tr><tr><td>ColorField</td><td>é¢œè‰²é€‰æ‹©</td><td><code>EditorGUILayout.ColorField("é¢œè‰²", color)</code></td></tr><tr><td>ObjectField</td><td>æ‹–æ‹½å¯¹è±¡</td><td><code>EditorGUILayout.ObjectField("ç›®æ ‡", obj, typeof(GameObject), true)</code></td></tr><tr><td>EnumPopup</td><td>ä¸‹æ‹‰é€‰æ‹©æšä¸¾</td><td><code>EditorGUILayout.EnumPopup("ç±»å‹", playerClass)</code></td></tr><tr><td>Foldout</td><td>æŠ˜å é¢æ¿</td><td><code>fold = EditorGUILayout.Foldout(fold, "é«˜çº§")</code></td></tr><tr><td>PropertyField</td><td>è‡ªåŠ¨ç»˜åˆ¶ SerializedProperty</td><td><code>EditorGUILayout.PropertyField(serializedProp)</code></td></tr></tbody></table><p>ä¸€ä¸ªæ¡ˆä¾‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>PlayerSettings</span> <span class=p>:</span> <span class=n>MonoBehaviour</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [SerializeField, Range(0, 10)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>moveSpeed</span> <span class=p>=</span> <span class=m>5f</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>string</span> <span class=n>playerName</span> <span class=p>=</span> <span class=s>&#34;Hero&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Color</span> <span class=n>playerColor</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>cyan</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>bool</span> <span class=n>isGodMode</span> <span class=p>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Editor éƒ¨åˆ†ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[CustomEditor(typeof(PlayerSettings))]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>PlayerSettingsEditor</span> <span class=p>:</span> <span class=n>Editor</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å®šä¹‰ SerializedProperty å¯¹è±¡</span>
</span></span><span class=line><span class=cl>    <span class=n>SerializedProperty</span> <span class=n>moveSpeed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SerializedProperty</span> <span class=n>playerName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SerializedProperty</span> <span class=n>playerColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SerializedProperty</span> <span class=n>isGodMode</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆå§‹åŒ–ï¼šåœ¨ç¼–è¾‘å™¨åŠ è½½æ—¶ç»‘å®šå­—æ®µ</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>OnEnable</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>moveSpeed</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;moveSpeed&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>playerName</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;playerName&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>playerColor</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;playerColor&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>isGodMode</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;isGodMode&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// è‡ªå®šä¹‰ Inspector ç•Œé¢</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnInspectorGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// åŒæ­¥ç›®æ ‡å¯¹è±¡çš„æœ€æ–°æ•°æ®</span>
</span></span><span class=line><span class=cl>        <span class=n>serializedObject</span><span class=p>.</span><span class=n>Update</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;ğŸ® Player Settings&#34;</span><span class=p>,</span> <span class=n>EditorStyles</span><span class=p>.</span><span class=n>boldLabel</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ç»˜åˆ¶å±æ€§å­—æ®µï¼ˆè‡ªåŠ¨æ”¯æŒæ’¤é”€ / Prefabï¼‰</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>playerName</span><span class=p>,</span> <span class=k>new</span> <span class=n>GUIContent</span><span class=p>(</span><span class=s>&#34;Player Name&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>moveSpeed</span><span class=p>,</span> <span class=k>new</span> <span class=n>GUIContent</span><span class=p>(</span><span class=s>&#34;Move Speed&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>playerColor</span><span class=p>,</span> <span class=k>new</span> <span class=n>GUIContent</span><span class=p>(</span><span class=s>&#34;Player Color&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>isGodMode</span><span class=p>,</span> <span class=k>new</span> <span class=n>GUIContent</span><span class=p>(</span><span class=s>&#34;God Mode&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰æŒ‰é’®</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=s>&#34;æ‰“å°ç©å®¶ä¿¡æ¯&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>player</span> <span class=p>=</span> <span class=p>(</span><span class=n>PlayerSettings</span><span class=p>)</span><span class=n>target</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>$&#34;ğŸ‘¤ {playerName.stringValue} - é€Ÿåº¦: {moveSpeed.floatValue}, æ— æ•Œ: {isGodMode.boolValue}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æäº¤ä¿®æ”¹å›ç›®æ ‡å¯¹è±¡</span>
</span></span><span class=line><span class=cl>        <span class=n>serializedObject</span><span class=p>.</span><span class=n>ApplyModifiedProperties</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>æ•ˆæœï¼š</p><p><img alt="EditorGUILayout Demo 1" loading=lazy src=/zh/posts/unity-editor-extensions/EditorGUILayout-Demo-1.png></p><p>å®Œå…¨å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªæŠ½è±¡äº†ä¸€ä¸ªä¸­é—´å±‚çš„ IMGUIï¼Œé¿å…æ‰‹åŠ¨ç»‘å®šä¸€äº›å†™æ³•ã€‚å¦‚æœå¤æ‚ç‚¹å†™ï¼Œè¿˜å¯ä»¥å®ç°ä¸‹é¢çš„æ•ˆæœï¼š</p><p><img alt="EditorGUILayout Demo 2" loading=lazy src=/zh/posts/unity-editor-extensions/EditorGUILayout-Demo-2.png></p><h4 id=261-å±•å¼€æŠ˜å çš„ä¾‹å­>2.6.1 å±•å¼€æŠ˜å çš„ä¾‹å­<a hidden class=anchor aria-hidden=true href=#261-å±•å¼€æŠ˜å çš„ä¾‹å­>#</a></h4><p>è¿™ä¸ªä¾‹å­è™½ç„¶ç®€å•ï¼Œä½†æ˜¯ç”±äºå¤ªè¿‡å¸¸ç”¨ï¼Œè¿™é‡Œä¸“é—¨å†™ä¸€ä¸‹ã€‚</p><p>å±•å¼€æŠ˜å çš„ä¾‹å­ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[CustomEditor(typeof(PlayerSettings))]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>PlayerSettingsEditor</span> <span class=p>:</span> <span class=n>Editor</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// SerializedProperty å¯¹è±¡</span>
</span></span><span class=line><span class=cl>    <span class=n>SerializedProperty</span> <span class=n>moveSpeed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SerializedProperty</span> <span class=n>playerName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SerializedProperty</span> <span class=n>playerColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>SerializedProperty</span> <span class=n>isGodMode</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æŠ˜å çŠ¶æ€å˜é‡</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>showBasicSettings</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>showAdvancedSettings</span> <span class=p>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>OnEnable</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>moveSpeed</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;moveSpeed&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>playerName</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;playerName&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>playerColor</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;playerColor&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>isGodMode</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;isGodMode&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnInspectorGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>serializedObject</span><span class=p>.</span><span class=n>Update</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æŠ˜å é¢æ¿ï¼šåŸºç¡€è®¾ç½®</span>
</span></span><span class=line><span class=cl>        <span class=n>showBasicSettings</span> <span class=p>=</span> <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>Foldout</span><span class=p>(</span><span class=n>showBasicSettings</span><span class=p>,</span> <span class=s>&#34;åŸºç¡€è®¾ç½®&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>showBasicSettings</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>playerName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>moveSpeed</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æŠ˜å é¢æ¿ï¼šé«˜çº§è®¾ç½®</span>
</span></span><span class=line><span class=cl>        <span class=n>showAdvancedSettings</span> <span class=p>=</span> <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>Foldout</span><span class=p>(</span><span class=n>showAdvancedSettings</span><span class=p>,</span> <span class=s>&#34;é«˜çº§è®¾ç½®&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>showAdvancedSettings</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>playerColor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>isGodMode</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ‰“å°æŒ‰é’®</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=s>&#34;æ‰“å°ç©å®¶ä¿¡æ¯&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>$&#34;ç©å®¶ {playerName.stringValue}, é€Ÿåº¦ {moveSpeed.floatValue}, &#34;</span> <span class=p>+</span>
</span></span><span class=line><span class=cl>                      <span class=s>$&#34;é¢œè‰² {playerColor.colorValue}, æ— æ•Œ: {isGodMode.boolValue}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>serializedObject</span><span class=p>.</span><span class=n>ApplyModifiedProperties</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>æ•ˆæœå®ç°ï¼š</p><p><img alt="Inspector Fold Demo" loading=lazy src=/zh/posts/unity-editor-extensions/Inspector-Fold-Demo.png></p><h3 id=27-handles--onscenegui>2.7 Handles / OnSceneGUI<a hidden class=anchor aria-hidden=true href=#27-handles--onscenegui>#</a></h3><p><code>OnSceneGUI</code> æ˜¯ Unity è‡ªå®šä¹‰ç¼–è¾‘å™¨é‡Œçš„ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå…è®¸ä½ åœ¨ Scene è§†å›¾ä¸­ç»˜åˆ¶å’Œäº¤äº’ï¼Œæ¯æ¬¡ Scene è§†å›¾åˆ·æ–°æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚</p><p><code>Handles</code> æ˜¯ Unity æä¾›çš„ä¸€ç»„ Scene è§†å›¾å¯è§†åŒ–æ§ä»¶å’Œç»˜å›¾å·¥å…·ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>Handles.PositionHandle</code></td><td>å¯æ‹–æ‹½æ§åˆ¶ä½ç½®</td></tr><tr><td><code>Handles.RotationHandle</code></td><td>å¯æ—‹è½¬æ§åˆ¶</td></tr><tr><td><code>Handles.ScaleHandle</code></td><td>å¯ç¼©æ”¾æ§åˆ¶</td></tr><tr><td><code>Handles.Label</code></td><td>æ˜¾ç¤ºæ–‡æœ¬æ ‡ç­¾</td></tr><tr><td><code>Handles.SphereHandleCap</code></td><td>ç»˜åˆ¶çƒä½“</td></tr><tr><td><code>Handles.DrawLine</code></td><td>ç»˜åˆ¶çº¿æ¡</td></tr><tr><td><code>Handles.DrawWireCube</code></td><td>ç»˜åˆ¶ç©ºå¿ƒæ–¹å—</td></tr></tbody></table><p>æˆ‘ä»¬ç›´æ¥ä¸Šä½¿ç”¨æ–¹å¼ã€‚é¦–å…ˆç»™ <code>PlayerSettings</code> å¢åŠ ä¸€ä¸ªä¸‰ç»´åæ ‡ï¼Œåé¢ä¼šç”¨ <code>Handles</code> æ¥å¯è§†åŒ–æ“ä½œè¿™ä¸ªä¸‰ç»´åæ ‡ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>PlayerSettings</span> <span class=p>:</span> <span class=n>MonoBehaviour</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...</span>
</span></span><span class=line><span class=cl>    <span class=c1>//</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Vector3</span> <span class=n>scenePosition</span> <span class=p>=</span> <span class=n>Vector3</span><span class=p>.</span><span class=n>zero</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>ç„¶ååœ¨ <code>OnSceneGUI</code> ä¸­é€šè¿‡ <code>Handles</code> æ¥å®ç°æ“ä½œ <code>scenePosition</code> çš„å¯è§†åŒ–ä¿®æ”¹ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor.TerrainTools</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[CustomEditor(typeof(PlayerSettings))]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>PlayerSettingsEditor</span> <span class=p>:</span> <span class=n>Editor</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>OnSceneGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>PlayerSettings</span> <span class=n>player</span> <span class=p>=</span> <span class=p>(</span><span class=n>PlayerSettings</span><span class=p>)</span><span class=n>target</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// å¼€å§‹ç›‘æµ‹ä¿®æ”¹</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUI</span><span class=p>.</span><span class=n>BeginChangeCheck</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ‹–æ‹½ PositionHandle æ§åˆ¶ scenePosition</span>
</span></span><span class=line><span class=cl>        <span class=n>Vector3</span> <span class=n>newPos</span> <span class=p>=</span> <span class=n>Handles</span><span class=p>.</span><span class=n>PositionHandle</span><span class=p>(</span><span class=n>player</span><span class=p>.</span><span class=n>scenePosition</span><span class=p>,</span> <span class=n>Quaternion</span><span class=p>.</span><span class=n>identity</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>EditorGUI</span><span class=p>.</span><span class=n>EndChangeCheck</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Undo</span><span class=p>.</span><span class=n>RecordObject</span><span class=p>(</span><span class=n>player</span><span class=p>,</span> <span class=s>&#34;Move Scene Position&#34;</span><span class=p>);</span>  <span class=c1>// æ”¯æŒ Undo</span>
</span></span><span class=line><span class=cl>            <span class=n>player</span><span class=p>.</span><span class=n>scenePosition</span> <span class=p>=</span> <span class=n>newPos</span><span class=p>;</span>                     <span class=c1>// æ›´æ–°ä½ç½®</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorUtility</span><span class=p>.</span><span class=n>SetDirty</span><span class=p>(</span><span class=n>player</span><span class=p>);</span>                   <span class=c1>// æ ‡è®°å¯¹è±¡å·²ä¿®æ”¹</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ç»˜åˆ¶ä¸€ä¸ªçƒä½“æ ‡è®°</span>
</span></span><span class=line><span class=cl>        <span class=n>Handles</span><span class=p>.</span><span class=n>color</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>aliceBlue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Handles</span><span class=p>.</span><span class=n>SphereHandleCap</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=n>player</span><span class=p>.</span><span class=n>scenePosition</span><span class=p>,</span> <span class=n>Quaternion</span><span class=p>.</span><span class=n>identity</span><span class=p>,</span> <span class=m>0.5f</span><span class=p>,</span> <span class=n>EventType</span><span class=p>.</span><span class=n>Repaint</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ç»˜åˆ¶åå­—æ ‡ç­¾</span>
</span></span><span class=line><span class=cl>        <span class=n>Handles</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=n>player</span><span class=p>.</span><span class=n>scenePosition</span> <span class=p>+</span> <span class=n>Vector3</span><span class=p>.</span><span class=n>up</span> <span class=p>*</span> <span class=m>0.6f</span><span class=p>,</span> <span class=s>&#34;Scene Position&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>æ•ˆæœï¼š</p><ul><li>æ³¨æ„ï¼Œè¿™é‡Œå¿…é¡»è¦é€‰æ‹©è¿™ä¸ªç‰©ä½“ï¼Œæ‰ä¼šåœ¨ Scene ä¸­è¿›è¡Œç»˜åˆ¶ï¼Œå’Œä¸‹é¢è¦ä»‹ç»çš„ Gizmo æ˜¯æœ‰åŒºåˆ«çš„ã€‚</li></ul><p><img alt="Handles Demo" loading=lazy src=/zh/posts/unity-editor-extensions/Handles-Demo.png></p><p>è¿™ä¸ªåæ ‡è¿˜æ˜¯å¯ä»¥åœ¨ Inspector ä¸­ç›´æ¥ç¼–è¾‘çš„ï¼Œä¸å½±å“è¿™ä¸€ç‚¹ã€‚</p><p><img alt="Handles Demo Inspector" loading=lazy src=/zh/posts/unity-editor-extensions/Handles-Demo-Inspector.png></p><h3 id=28-gizmos--ondrawgizmos>2.8 Gizmos / OnDrawGizmos<a hidden class=anchor aria-hidden=true href=#28-gizmos--ondrawgizmos>#</a></h3><p>Handles åªèƒ½åœ¨ Scene ä¸­è¿›è¡Œç»˜åˆ¶ï¼Œè€Œä¸”å¿…é¡»è¦é€‰ä¸­ã€‚</p><p>Gizmos å¯ä»¥åŒæ—¶åœ¨ Scene å’Œ Game ä¸­ç»˜åˆ¶å¹¶æ˜¾ç¤ºï¼Œå‡†ç¡®æ¥è¯´è¿™ä¸ªçŸ¥è¯†æ˜¯ä¸ç®—æ˜¯ Editor å¼€å‘é‡Œé¢çš„ï¼Œè¿™é‡Œåªæ˜¯å¯¹æ¯”è®²è§£ä¸‹ Handlesã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>Gizmos.DrawLine(start, end)</code></td><td>ç»˜åˆ¶ç›´çº¿</td></tr><tr><td><code>Gizmos.DrawRay(origin, direction)</code></td><td>ç»˜åˆ¶å°„çº¿</td></tr><tr><td><code>Gizmos.DrawSphere(center, radius)</code></td><td>ç»˜åˆ¶çƒä½“</td></tr><tr><td><code>Gizmos.DrawCube(center, size)</code></td><td>ç»˜åˆ¶æ–¹å—</td></tr><tr><td><code>Gizmos.DrawWireCube(center, size)</code></td><td>ç»˜åˆ¶ç©ºå¿ƒæ–¹å—</td></tr><tr><td><code>Gizmos.color</code></td><td>è®¾ç½®é¢œè‰²</td></tr><tr><td><code>Gizmos.DrawIcon(position, iconName, allowScaling)</code></td><td>ç»˜åˆ¶å›¾æ ‡</td></tr></tbody></table><p>è¿˜æ˜¯å›åˆ° <code>PlayerSettings</code>ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”¨ Gizmos æ˜¾ç¤ºå®ƒï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>PlayerSettings</span> <span class=p>:</span> <span class=n>MonoBehaviour</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [SerializeField, Range(0, 10)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>float</span> <span class=n>moveSpeed</span> <span class=p>=</span> <span class=m>5f</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>string</span> <span class=n>playerName</span> <span class=p>=</span> <span class=s>&#34;Hero&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Color</span> <span class=n>playerColor</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>cyan</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [SerializeField]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>bool</span> <span class=n>isGodMode</span> <span class=p>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Vector3</span> <span class=n>scenePosition</span> <span class=p>=</span> <span class=n>Vector3</span><span class=p>.</span><span class=n>zero</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>OnDrawGizmos</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Gizmos</span><span class=p>.</span><span class=n>color</span> <span class=p>=</span> <span class=n>playerColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ç»˜åˆ¶çƒä½“</span>
</span></span><span class=line><span class=cl>        <span class=n>Gizmos</span><span class=p>.</span><span class=n>DrawSphere</span><span class=p>(</span><span class=n>scenePosition</span><span class=p>,</span> <span class=m>0.5f</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ç»˜åˆ¶ä¸€æ¡å‘ä¸Šçš„çº¿</span>
</span></span><span class=line><span class=cl>        <span class=n>Gizmos</span><span class=p>.</span><span class=n>DrawLine</span><span class=p>(</span><span class=n>scenePosition</span><span class=p>,</span> <span class=n>scenePosition</span> <span class=p>+</span> <span class=n>Vector3</span><span class=p>.</span><span class=n>up</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ç»˜åˆ¶åå­—æ ‡ç­¾ï¼ˆScene ä¸­ä»…æ˜¾ç¤ºï¼‰</span>
</span></span><span class=line><span class=cl>        <span class=n>UnityEditor</span><span class=p>.</span><span class=n>Handles</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=n>scenePosition</span> <span class=p>+</span> <span class=n>Vector3</span><span class=p>.</span><span class=n>up</span> <span class=p>*</span> <span class=m>0.6f</span><span class=p>,</span> <span class=n>playerName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>å¯ä»¥åœ¨ Game ä¸­ä¹Ÿçœ‹åˆ°ï¼Œæ³¨æ„è¦æŠŠå³ä¸Šè§’çš„ Gizmos ç»™å¯ç”¨æ‰èƒ½çœ‹åˆ°ï¼š</p><p><img alt="Gizmos Demo" loading=lazy src=/zh/posts/unity-editor-extensions/Gizmos-Demo.png></p><hr><h2 id=3-å·¥å…·ç±»>3. å·¥å…·ç±»<a hidden class=anchor aria-hidden=true href=#3-å·¥å…·ç±»>#</a></h2><h3 id=31-editorutility>3.1 EditorUtility<a hidden class=anchor aria-hidden=true href=#31-editorutility>#</a></h3><p><code>EditorUtility</code> æ˜¯ Unity ç¼–è¾‘å™¨æä¾›çš„ <strong>å®ç”¨å·¥å…·ç±»</strong>ï¼Œç”¨æ¥å®Œæˆä¸€äº›é€šç”¨ç¼–è¾‘å™¨æ“ä½œï¼Œæ¯”å¦‚å¼¹çª—ã€æ ‡è®°å¯¹è±¡ä¿®æ”¹ã€ä¿å­˜ç­‰ã€‚</p><p>ä¸‹é¢çš„ <code>SetDirty</code> ç»å¸¸ç”¨åˆ°ã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>EditorUtility.SetDirty(Object obj)</code></td><td>æ ‡è®°å¯¹è±¡å·²ä¿®æ”¹ï¼Œç¡®ä¿ç¼–è¾‘å™¨ä¿å­˜æ›´æ”¹</td></tr><tr><td><code>EditorUtility.DisplayDialog(title, message, ok, cancel)</code></td><td>å¼¹å‡ºå¯¹è¯æ¡†</td></tr><tr><td><code>EditorUtility.DisplayProgressBar(title, info, progress)</code></td><td>æ˜¾ç¤ºè¿›åº¦æ¡</td></tr><tr><td><code>EditorUtility.ClearProgressBar()</code></td><td>å…³é—­è¿›åº¦æ¡</td></tr><tr><td><code>EditorUtility.FocusProjectWindow()</code></td><td>èšç„¦ Project çª—å£</td></tr><tr><td><code>EditorUtility.CopySerialized(Object src, Object dst)</code></td><td>å¤åˆ¶å¯¹è±¡æ•°æ®</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>EditorUtilityExample</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Tools/Mark Dirty Example&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=k>void</span> <span class=n>MarkDirtyExample</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>GameObject</span> <span class=n>go</span> <span class=p>=</span> <span class=n>Selection</span><span class=p>.</span><span class=n>activeGameObject</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>go</span> <span class=p>!=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Undo</span><span class=p>.</span><span class=n>RecordObject</span><span class=p>(</span><span class=n>go</span><span class=p>,</span> <span class=s>&#34;Modify GameObject&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>go</span><span class=p>.</span><span class=n>transform</span><span class=p>.</span><span class=n>position</span> <span class=p>=</span> <span class=n>Vector3</span><span class=p>.</span><span class=n>one</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorUtility</span><span class=p>.</span><span class=n>SetDirty</span><span class=p>(</span><span class=n>go</span><span class=p>);</span> <span class=c1>// æ ‡è®°ä¿®æ”¹</span>
</span></span><span class=line><span class=cl>            <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;GameObject position changed and marked dirty.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=32-assetdatabase>3.2 AssetDatabase<a hidden class=anchor aria-hidden=true href=#32-assetdatabase>#</a></h3><p><code>AssetDatabase</code> æ˜¯ Unity çš„èµ„æºç®¡ç†æ¥å£ï¼Œç”¨äºæ“ä½œé¡¹ç›®ä¸­çš„èµ„æºï¼ˆåˆ›å»ºã€åˆ é™¤ã€å¯¼å…¥ã€æŸ¥æ‰¾ç­‰ï¼‰ã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>AssetDatabase.CreateAsset(Object asset, string path)</code></td><td>åˆ›å»ºèµ„æºæ–‡ä»¶</td></tr><tr><td><code>AssetDatabase.DeleteAsset(string path)</code></td><td>åˆ é™¤èµ„æºæ–‡ä»¶</td></tr><tr><td><code>AssetDatabase.MoveAsset(string oldPath, string newPath)</code></td><td>ç§»åŠ¨/é‡å‘½åèµ„æº</td></tr><tr><td><code>AssetDatabase.LoadAssetAtPath&lt;T>(string path)</code></td><td>åŠ è½½èµ„æº</td></tr><tr><td><code>AssetDatabase.Refresh()</code></td><td>åˆ·æ–°èµ„æºæ•°æ®åº“</td></tr><tr><td><code>AssetDatabase.GetAssetPath(Object obj)</code></td><td>è·å–èµ„æºè·¯å¾„</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>AssetDatabaseExample</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Tools/Create Material&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=k>void</span> <span class=n>CreateMaterial</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Material</span> <span class=n>mat</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Material</span><span class=p>(</span><span class=n>Shader</span><span class=p>.</span><span class=n>Find</span><span class=p>(</span><span class=s>&#34;Standard&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>CreateAsset</span><span class=p>(</span><span class=n>mat</span><span class=p>,</span> <span class=s>&#34;Assets/NewMaterial.mat&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>SaveAssets</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>Refresh</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;Material created in Assets folder.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=33-selection>3.3 Selection<a hidden class=anchor aria-hidden=true href=#33-selection>#</a></h3><p><code>Selection</code> ç”¨æ¥ <strong>è·å–æˆ–è®¾ç½®ç¼–è¾‘å™¨å½“å‰é€‰ä¸­çš„å¯¹è±¡</strong>ï¼Œå¸¸ç”¨åœ¨ç¼–è¾‘å™¨å·¥å…·ä¸­æ“ä½œç”¨æˆ·é€‰æ‹©çš„å¯¹è±¡ã€‚</p><table><thead><tr><th>å±æ€§ / æ–¹æ³•</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>Selection.activeObject</code></td><td>å½“å‰é€‰ä¸­çš„å¯¹è±¡ï¼ˆå•é€‰ï¼‰</td></tr><tr><td><code>Selection.activeGameObject</code></td><td>å½“å‰é€‰ä¸­çš„ GameObjectï¼ˆå•é€‰ï¼‰</td></tr><tr><td><code>Selection.objects</code></td><td>å½“å‰é€‰ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼ˆå¤šé€‰ï¼‰</td></tr><tr><td><code>Selection.gameObjects</code></td><td>å½“å‰é€‰ä¸­çš„æ‰€æœ‰ GameObjectï¼ˆå¤šé€‰ï¼‰</td></tr><tr><td><code>Selection.activeTransform</code></td><td>å½“å‰é€‰ä¸­å¯¹è±¡çš„ Transform</td></tr><tr><td><code>Selection.activeInstanceID</code></td><td>å½“å‰é€‰ä¸­å¯¹è±¡çš„å®ä¾‹ ID</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>SelectionExample</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Tools/Print Selected Objects&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=k>void</span> <span class=n>PrintSelectedObjects</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>obj</span> <span class=k>in</span> <span class=n>Selection</span><span class=p>.</span><span class=n>objects</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;Selected object: &#34;</span> <span class=p>+</span> <span class=n>obj</span><span class=p>.</span><span class=n>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=34-editorwindowongui>3.4 EditorWindow.OnGUI<a hidden class=anchor aria-hidden=true href=#34-editorwindowongui>#</a></h3><p>æ¯å½“ Unity éœ€è¦ç»˜åˆ¶ç•Œé¢ï¼ˆInspectorã€EditorWindowã€Game GUIç­‰ï¼‰æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨ OnGUI()ï¼Œè®©ä½ ç”¨ä»£ç å³æ—¶ç”»å‡º UI æ§ä»¶ã€‚</p><table><thead><tr><th>ä¸Šä¸‹æ–‡</th><th>è§¦å‘æ–¹å¼</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>MonoBehaviour.OnGUI()</strong></td><td>æ¸¸æˆè¿è¡Œæ—¶è°ƒç”¨</td><td>ç»˜åˆ¶ç®€å• HUDã€è°ƒè¯• GUI</td></tr><tr><td><strong>EditorWindow.OnGUI()</strong></td><td>ç¼–è¾‘å™¨çª—å£</td><td>ç»˜åˆ¶è‡ªå®šä¹‰å·¥å…·çª—å£</td></tr><tr><td><strong>Editor.OnInspectorGUI()</strong></td><td>Inspector é¢æ¿</td><td>è‡ªå®šä¹‰ç»„ä»¶çš„ Inspector</td></tr><tr><td><strong>EditorApplication.projectWindowItemOnGUI</strong></td><td>Project çª—å£ç»˜åˆ¶</td><td>ç»˜åˆ¶èµ„æºèƒŒæ™¯/å›¾æ ‡</td></tr><tr><td><strong>EditorApplication.projectWindowItemInstanceOnGUI</strong></td><td>Project çª—å£ç»˜åˆ¶</td><td>ç»˜åˆ¶èµ„æºèƒŒæ™¯/å›¾æ ‡ï¼Œå¯ä»¥å¤„ç†å­èµ„äº§</td></tr><tr><td><strong>EditorApplication.hierarchyWindowItemOnGUI</strong></td><td>Hierarchy ç»˜åˆ¶</td><td>ä¿®æ”¹ GameObject æ˜¾ç¤ºæ•ˆæœ</td></tr></tbody></table><p>åˆ©ç”¨ <code>EditorWindow</code> çš„ GUI åˆ›å»ºä¸€ä¸ªçª—å£ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>SimpleWindow</span> <span class=p>:</span> <span class=n>EditorWindow</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Window/Simple GUI&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>ShowWindow</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>GetWindow</span><span class=p>&lt;</span><span class=n>SimpleWindow</span><span class=p>&gt;(</span><span class=s>&#34;Simple GUI&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>OnGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;Hello Unity IMGUI!&#34;</span><span class=p>,</span> <span class=n>EditorStyles</span><span class=p>.</span><span class=n>boldLabel</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=s>&#34;Click Me&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;Button clicked!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>å®ç°æ•ˆæœï¼š</p><p><img alt="simple gui" loading=lazy src=/zh/posts/unity-editor-extensions/simple-gui.gif></p><h3 id=35-projectwindowitemongui>3.5 projectWindowItemOnGUI<a hidden class=anchor aria-hidden=true href=#35-projectwindowitemongui>#</a></h3><p><code>projectWindowItemOnGUI</code> æ˜¯ Unity Editor æä¾›çš„ä¸€ä¸ª é™æ€å›è°ƒäº‹ä»¶ï¼Œç”¨äºåœ¨ Project çª—å£çš„æ¯ä¸ªèµ„æºæ¡ç›®ä¸Šç»˜åˆ¶è‡ªå®šä¹‰ GUIã€‚</p><p>æ³¨æ„è¿™é‡Œè¦æ³¨é”€ä¸€ä¸‹ä¸Šæ¬¡æ³¨å†Œçš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¹ æƒ¯ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[InitializeOnLoad]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=k>class</span> <span class=nc>ProjectWindowDecorator</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=n>ProjectWindowDecorator</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorApplication</span><span class=p>.</span><span class=n>projectWindowItemOnGUI</span> <span class=p>-=</span> <span class=n>OnProjectWindowItemGUI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorApplication</span><span class=p>.</span><span class=n>projectWindowItemOnGUI</span> <span class=p>+=</span> <span class=n>OnProjectWindowItemGUI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>OnProjectWindowItemGUI</span><span class=p>(</span><span class=kt>string</span> <span class=n>guid</span><span class=p>,</span> <span class=n>Rect</span> <span class=n>rect</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=n>path</span> <span class=p>=</span> <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>GUIDToAssetPath</span><span class=p>(</span><span class=n>guid</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// åªå¯¹ png æ–‡ä»¶ç”Ÿæ•ˆ</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>path</span><span class=p>.</span><span class=n>EndsWith</span><span class=p>(</span><span class=s>&#34;.png&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// åœ¨èµ„æºå³ä¸Šè§’ç”»ä¸€ä¸ªçº¢è‰²å°åœ†ç‚¹</span>
</span></span><span class=line><span class=cl>            <span class=n>Rect</span> <span class=n>dotRect</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Rect</span><span class=p>(</span><span class=n>rect</span><span class=p>.</span><span class=n>xMax</span> <span class=p>-</span> <span class=m>10</span><span class=p>,</span> <span class=n>rect</span><span class=p>.</span><span class=n>y</span> <span class=p>+</span> <span class=m>2</span><span class=p>,</span> <span class=m>8</span><span class=p>,</span> <span class=m>8</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUI</span><span class=p>.</span><span class=n>DrawRect</span><span class=p>(</span><span class=n>dotRect</span><span class=p>,</span> <span class=n>Color</span><span class=p>.</span><span class=n>red</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>æ•ˆæœï¼š</p><p><img alt="Add Red Spot In Project Window" loading=lazy src=/zh/posts/unity-editor-extensions/Add-Red-Spot-In-Project-Window.png></p><p>è¿˜å¯ä»¥å®ç°ç»™æ¯ä¸ªæ–‡ä»¶ä¸ŠåŠ ä¸€ä¸ªæŒ‰é’®çš„åŠŸèƒ½ï¼š</p><p><img alt="Every File Add Test Button In Project Window" loading=lazy src=/zh/posts/unity-editor-extensions/Every-File-Add-Test-Button-In-Project-Window.png></p><h3 id=36-editorprefs>3.6 EditorPrefs<a hidden class=anchor aria-hidden=true href=#36-editorprefs>#</a></h3><p><code>EditorPrefs</code> æ˜¯ Unity ç¼–è¾‘å™¨ä¸“ç”¨çš„ä¸€ä¸ªç±»ï¼Œç”¨æ¥åœ¨æœ¬åœ°ä¿å­˜ç¼–è¾‘å™¨çº§åˆ«çš„é…ç½®æ•°æ®ï¼ˆç±»ä¼¼äºâ€œç¼–è¾‘å™¨åå¥½è®¾ç½®â€ï¼‰ã€‚</p><p>å®ƒçš„åŠŸèƒ½ç±»ä¼¼äº <code>PlayerPrefs</code>ï¼ˆæ¸¸æˆè¿è¡Œæ—¶å­˜å‚¨ï¼‰ï¼Œä½†ç”¨äºç¼–è¾‘å™¨å·¥å…·æˆ–æ’ä»¶çš„è®¾ç½®ã€‚</p><p>å®ƒä¸ä¼šéšç€ â€œé¡¹ç›®ç§»åŠ¨â€ è€Œè¿ç§»ï¼Œä¹Ÿå°±æ˜¯ä»…ä»…æ˜¯ä½ æœ¬æœºç”µè„‘ä¿å­˜çš„ã€‚</p><p>é€šå¸¸ä¸ç”¨è¿™ä¸ªï¼Œå¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œåº”è¯¥æ˜¯å†™æˆä¸€ä¸ªå¯ä»¥ä¿å­˜çš„ JSON ä¹‹ç±»çš„ï¼Œè·Ÿç€é¡¹ç›®å¯ä»¥åŒæ­¥ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>EditorPrefsExample</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Tools/EditorPrefs ç¤ºä¾‹&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>Example</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// ä¿å­˜æ•°æ®</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>SetString</span><span class=p>(</span><span class=s>&#34;MyTool_LastFilePath&#34;</span><span class=p>,</span> <span class=s>&#34;D:/MyProject/Config.txt&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>SetInt</span><span class=p>(</span><span class=s>&#34;MyTool_UseDarkTheme&#34;</span><span class=p>,</span> <span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>SetBool</span><span class=p>(</span><span class=s>&#34;MyTool_ShowTips&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>SetFloat</span><span class=p>(</span><span class=s>&#34;MyTool_Volume&#34;</span><span class=p>,</span> <span class=m>0.8f</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è¯»å–æ•°æ®</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=n>path</span> <span class=p>=</span> <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>GetString</span><span class=p>(</span><span class=s>&#34;MyTool_LastFilePath&#34;</span><span class=p>,</span> <span class=s>&#34;æœªè®¾ç½®&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>bool</span> <span class=n>showTips</span> <span class=p>=</span> <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>GetBool</span><span class=p>(</span><span class=s>&#34;MyTool_ShowTips&#34;</span><span class=p>,</span> <span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>volume</span> <span class=p>=</span> <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>GetFloat</span><span class=p>(</span><span class=s>&#34;MyTool_Volume&#34;</span><span class=p>,</span> <span class=m>1.0f</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>$&#34;è·¯å¾„: {path}, æ˜¯å¦æ˜¾ç¤ºæç¤º: {showTips}, éŸ³é‡: {volume}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// åˆ é™¤æ•°æ®</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>DeleteKey</span><span class=p>(</span><span class=s>&#34;MyTool_LastFilePath&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ£€æŸ¥æ˜¯å¦å­˜åœ¨</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>EditorPrefs</span><span class=p>.</span><span class=n>HasKey</span><span class=p>(</span><span class=s>&#34;MyTool_UseDarkTheme&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;æš—è‰²ä¸»é¢˜è®¾ç½®å­˜åœ¨&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=37-monobehaviourongui>3.7 MonoBehaviour.OnGUI<a hidden class=anchor aria-hidden=true href=#37-monobehaviourongui>#</a></h3><p>ä¸¥æ ¼æ¥è¯´è¿™ä¸ªä¹Ÿä¸ç®— Editor å¼€å‘ï¼Œä½†æ˜¯è¿™ä¸ªå¾ˆé€‚åˆåˆ¶ä½œä¸€äº›æµ‹è¯•ç”¨åªåœ¨ <code>Editor</code> è¿è¡Œæ¸¸æˆæ—¶ä½¿ç”¨çš„æŒ‰é’®ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>TestMonoOnGUI</span> <span class=p>:</span> <span class=n>MonoBehaviour</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=cp>#if</span> <span class=n>UNITY_EDITOR</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>OnGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUI</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=k>new</span> <span class=n>Rect</span><span class=p>(</span><span class=m>10</span><span class=p>,</span> <span class=m>10</span><span class=p>,</span> <span class=m>100</span><span class=p>,</span> <span class=m>30</span><span class=p>),</span> <span class=s>&#34;Click Me&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cp>#endif</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>è¿è¡Œåèƒ½å‡ºç°ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶ä¸”è¿™ä¸ªæŒ‰é’®å› ä¸ºå®é™åˆ¶åœ¨äº†åªèƒ½ç”¨äºç¼–è¾‘å™¨è¿è¡Œçš„æƒ…å†µï¼Œä¸ä¼šå½±å“æ­£å¼æ¸¸æˆã€‚</p><p><img alt="MonoBehaviour OnGUI" loading=lazy src=/zh/posts/unity-editor-extensions/MonoBehaviour-OnGUI.png></p><h2 id=4-menuitem>4 MenuItem<a hidden class=anchor aria-hidden=true href=#4-menuitem>#</a></h2><h3 id=41-é¡¶éƒ¨èœå•æ >4.1 é¡¶éƒ¨èœå•æ <a hidden class=anchor aria-hidden=true href=#41-é¡¶éƒ¨èœå•æ >#</a></h3><p><code>MenuItem</code> æ˜¯ Unity æä¾›çš„ä¸€ä¸ª <strong>ç¼–è¾‘å™¨æ³¨è§£</strong>ï¼Œç”¨äºåœ¨èœå•æ æˆ–å³é”®èœå•ä¸­æ·»åŠ è‡ªå®šä¹‰åŠŸèƒ½ã€‚</p><p>å¦‚æœè·¯å¾„æ˜¯ä¸ä»¥ <code>Assets/</code> æˆ– <code>GameObject/</code> å¼€å¤´ï¼ŒUnity ä¼šæŠŠå®ƒæ”¾åœ¨é¡¶éƒ¨èœå•æ ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>MenuExample</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Tools/Print Message&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>PrintMessage</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;Hello from Tools menu!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Tools/Print Message&#34;, true)]</span> <span class=c1>// éªŒè¯å‡½æ•°ï¼ˆç”¨äºå¯ç”¨/ç¦ç”¨èœå•é¡¹ï¼‰</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>bool</span> <span class=n>ValidatePrintMessage</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Application</span><span class=p>.</span><span class=n>isPlaying</span> <span class=p>==</span> <span class=kc>false</span><span class=p>;</span> <span class=c1>// ä»…åœ¨éè¿è¡ŒçŠ¶æ€å¯ç”¨</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>åœ¨ä¸Šæ–¹å‡ºç°ï¼š</p><p><img alt="Top Menu Demo" loading=lazy src=/zh/posts/unity-editor-extensions/Top-Menu-Demo.png></p><p>è¯´æ˜ï¼š</p><ul><li>[MenuItem(&ldquo;Tools/Print Message&rdquo;)] ä¼šåœ¨ Unity èœå•æ çš„ Tools ä¸‹æ·»åŠ ä¸€ä¸ª â€œPrint Messageâ€ èœå•é¡¹ã€‚</li><li><code>[MenuItem("è·¯å¾„", true)]</code> å¸¦æœ‰ true å‚æ•°çš„è¡¨ç¤ºåŒåæ–¹æ³•æ˜¯éªŒè¯å‡½æ•°ï¼Œç”¨æ¥æ§åˆ¶èœå•æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœè¿”å› false é‚£ä¹ˆä¼šæ˜¯ç°è‰² <strong>ä¸å¯ç‚¹å‡»çŠ¶æ€</strong> ã€‚</li><li>æ–¹æ³•å¿…é¡»æ˜¯ staticã€‚</li></ul><p>ç¬¬ä¸‰é¡¹æ˜¯ <strong>ä¼˜å…ˆçº§</strong> ï¼Œæ§åˆ¶èœå•åœ¨åŒçº§èœå•ä¸­çš„æ’åºï¼Œæ•°å­—è¶Šå°è¶Šé ä¸Šã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=na>[MenuItem(&#34;Tools/Print Debug&#34;, false, 10)]</span>
</span></span></code></pre></div><h3 id=42-å³é”®èœå•æ >4.2 å³é”®èœå•æ <a hidden class=anchor aria-hidden=true href=#42-å³é”®èœå•æ >#</a></h3><p><code>Assets/</code> å¼€å¤´å¯ä»¥åœ¨ <code>Project</code> çª—å£ä¸­å³é”®å‡ºç°ï¼Œè€Œ <code>GameObject/</code> å¼€å¤´å¯ä»¥åœ¨ <code>Hierarchy</code> é‡Œé¢å‡ºç°ã€‚</p><p>è¿™é‡Œå®ç°ä¸‹é¢ä¸€ä¸ªåŠŸèƒ½ï¼š</p><ul><li>åœ¨ <code>Project</code> çª—å£å³é”®æ–‡ä»¶å¤¹æ—¶æ˜¾ç¤ºèœå•ï¼Œå¤šé€‰æ—¶ä¹Ÿèƒ½ç”Ÿæ•ˆï¼Œå¹¶å¯¹æ–‡ä»¶å¤¹åå­—åŠ ä¸Š <code>test-</code> å‰ç¼€ï¼ˆå¦‚æœæ²¡æœ‰çš„è¯ï¼‰</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>AddTestPrefix</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å³é”®èœå•æ˜¾ç¤ºåœ¨ Project çª—å£æ–‡ä»¶å¤¹ä¸Š</span>
</span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Assets/Add Test Prefix&#34;, true)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kt>bool</span> <span class=n>ValidateAddTestPrefix</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// åªå…è®¸é€‰ä¸­æ–‡ä»¶å¤¹</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>obj</span> <span class=k>in</span> <span class=n>Selection</span><span class=p>.</span><span class=n>objects</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>string</span> <span class=n>path</span> <span class=p>=</span> <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>GetAssetPath</span><span class=p>(</span><span class=n>obj</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(!</span><span class=n>AssetDatabase</span><span class=p>.</span><span class=n>IsValidFolder</span><span class=p>(</span><span class=n>path</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Selection</span><span class=p>.</span><span class=n>objects</span><span class=p>.</span><span class=n>Length</span> <span class=p>&gt;</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Assets/Add Test Prefix&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>AddPrefix</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>obj</span> <span class=k>in</span> <span class=n>Selection</span><span class=p>.</span><span class=n>objects</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>string</span> <span class=n>path</span> <span class=p>=</span> <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>GetAssetPath</span><span class=p>(</span><span class=n>obj</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(!</span><span class=n>AssetDatabase</span><span class=p>.</span><span class=n>IsValidFolder</span><span class=p>(</span><span class=n>path</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=kt>string</span> <span class=n>folderName</span> <span class=p>=</span> <span class=n>System</span><span class=p>.</span><span class=n>IO</span><span class=p>.</span><span class=n>Path</span><span class=p>.</span><span class=n>GetFileName</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(!</span><span class=n>folderName</span><span class=p>.</span><span class=n>StartsWith</span><span class=p>(</span><span class=s>&#34;test&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>string</span> <span class=n>newFolderName</span> <span class=p>=</span> <span class=s>&#34;test-&#34;</span> <span class=p>+</span> <span class=n>folderName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=kt>string</span> <span class=n>parentPath</span> <span class=p>=</span> <span class=n>System</span><span class=p>.</span><span class=n>IO</span><span class=p>.</span><span class=n>Path</span><span class=p>.</span><span class=n>GetDirectoryName</span><span class=p>(</span><span class=n>path</span><span class=p>).</span><span class=n>Replace</span><span class=p>(</span><span class=s>&#34;\\&#34;</span><span class=p>,</span> <span class=s>&#34;/&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=kt>string</span> <span class=n>newPath</span> <span class=p>=</span> <span class=n>parentPath</span> <span class=p>+</span> <span class=s>&#34;/&#34;</span> <span class=p>+</span> <span class=n>newFolderName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>RenameAsset</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>newFolderName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>$&#34;Renamed folder: {folderName} -&gt; {newFolderName}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>SaveAssets</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>Refresh</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>æ¼”ç¤ºï¼š</p><p><img alt="Right Menu Demo" loading=lazy src=/zh/posts/unity-editor-extensions/Right-Menu-Demo.png></p><hr><h2 id=5-é£æ ¼ç¾åŒ–>5. é£æ ¼ç¾åŒ–<a hidden class=anchor aria-hidden=true href=#5-é£æ ¼ç¾åŒ–>#</a></h2><h3 id=51-truefalse-å˜å¼€å…³æŒ‰é’®>5.1 True/False å˜å¼€å…³æŒ‰é’®<a hidden class=anchor aria-hidden=true href=#51-truefalse-å˜å¼€å…³æŒ‰é’®>#</a></h3><p>å¦‚æœæˆ‘ä»¬æœŸæœ›å®ç°ä¸€ä¸ªå¼€å…³æŒ‰é’®ï¼Œè€Œä¸æ˜¯å‹¾é€‰ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ</p><p><img alt="Button Styles" loading=lazy src=/zh/posts/unity-editor-extensions/Button-Styles.gif></p><p>åŒ…æ‹¬æ°´å¹³å¸ƒå±€ï¼Œæ›´æ”¹æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ï¼Œ</p><p>ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[CustomEditor(typeof(PlayerSettings))]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>PlayerSettingsEditor</span> <span class=p>:</span> <span class=n>Editor</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>SerializedProperty</span> <span class=n>moveSpeed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>SerializedProperty</span> <span class=n>playerName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>SerializedProperty</span> <span class=n>playerColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>SerializedProperty</span> <span class=n>isGodMode</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>OnEnable</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>moveSpeed</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;moveSpeed&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>playerName</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;playerName&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>playerColor</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;playerColor&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>isGodMode</span> <span class=p>=</span> <span class=n>serializedObject</span><span class=p>.</span><span class=n>FindProperty</span><span class=p>(</span><span class=s>&#34;isGodMode&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnInspectorGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>serializedObject</span><span class=p>.</span><span class=n>Update</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// åŸºç¡€å±æ€§</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>playerName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>moveSpeed</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>playerColor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ----------------- æŒ‰é’®é å³ -----------------</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>BeginHorizontal</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// å·¦ä¾§æ ‡ç­¾</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>LabelField</span><span class=p>(</span><span class=s>&#34;God Mode&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ä¸­é—´å ä½ï¼Œä½¿æŒ‰é’®é å³</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>FlexibleSpace</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// å³ä¾§æŒ‰é’®</span>
</span></span><span class=line><span class=cl>        <span class=n>GUI</span><span class=p>.</span><span class=n>backgroundColor</span> <span class=p>=</span> <span class=n>isGodMode</span><span class=p>.</span><span class=n>boolValue</span> <span class=p>?</span> <span class=n>Color</span><span class=p>.</span><span class=n>green</span> <span class=p>:</span> <span class=n>Color</span><span class=p>.</span><span class=n>red</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=n>isGodMode</span><span class=p>.</span><span class=n>boolValue</span> <span class=p>?</span> <span class=s>&#34;ON&#34;</span> <span class=p>:</span> <span class=s>&#34;OFF&#34;</span><span class=p>,</span> <span class=n>GUILayout</span><span class=p>.</span><span class=n>Width</span><span class=p>(</span><span class=m>50</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>isGodMode</span><span class=p>.</span><span class=n>boolValue</span> <span class=p>=</span> <span class=p>!</span><span class=n>isGodMode</span><span class=p>.</span><span class=n>boolValue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorUtility</span><span class=p>.</span><span class=n>SetDirty</span><span class=p>(</span><span class=n>target</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>EndHorizontal</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>serializedObject</span><span class=p>.</span><span class=n>ApplyModifiedProperties</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=52-å…¨å±€æ ·å¼æ›¿æ¢>5.2 å…¨å±€æ ·å¼æ›¿æ¢<a hidden class=anchor aria-hidden=true href=#52-å…¨å±€æ ·å¼æ›¿æ¢>#</a></h3><p>ä¹Ÿè®¸ä½ ä¼šæƒ³è¯´ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½æŠŠæ‰€æœ‰åœ°æ–¹çš„ bool éƒ½æ›¿æ¢äº†ï¼Ÿ</p><p>Editor ç¡®å®ç»™äº†æˆ‘ä»¬è¿™ç§æ¥å£ï¼š</p><p>ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// âœ… ä½œç”¨äºæ‰€æœ‰ bool å­—æ®µ</span>
</span></span><span class=line><span class=cl><span class=na>[CustomPropertyDrawer(typeof(bool))]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>GlobalBoolButtonDrawer</span> <span class=p>:</span> <span class=n>PropertyDrawer</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnGUI</span><span class=p>(</span><span class=n>Rect</span> <span class=n>position</span><span class=p>,</span> <span class=n>SerializedProperty</span> <span class=n>property</span><span class=p>,</span> <span class=n>GUIContent</span> <span class=n>label</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// åªå¤„ç† bool</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>property</span><span class=p>.</span><span class=n>propertyType</span> <span class=p>!=</span> <span class=n>SerializedPropertyType</span><span class=p>.</span><span class=n>Boolean</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUI</span><span class=p>.</span><span class=n>PropertyField</span><span class=p>(</span><span class=n>position</span><span class=p>,</span> <span class=n>property</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// ---------------- ç»˜åˆ¶å¸ƒå±€ ----------------</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>labelRect</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Rect</span><span class=p>(</span><span class=n>position</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>position</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>EditorGUIUtility</span><span class=p>.</span><span class=n>labelWidth</span><span class=p>,</span> <span class=n>position</span><span class=p>.</span><span class=n>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>buttonRect</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Rect</span><span class=p>(</span><span class=n>position</span><span class=p>.</span><span class=n>x</span> <span class=p>+</span> <span class=n>EditorGUIUtility</span><span class=p>.</span><span class=n>labelWidth</span> <span class=p>+</span> <span class=m>5</span><span class=p>,</span> <span class=n>position</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=m>50</span><span class=p>,</span> <span class=n>position</span><span class=p>.</span><span class=n>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ ‡ç­¾</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUI</span><span class=p>.</span><span class=n>LabelField</span><span class=p>(</span><span class=n>labelRect</span><span class=p>,</span> <span class=n>label</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æŒ‰é’®é¢œè‰²</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>oldColor</span> <span class=p>=</span> <span class=n>GUI</span><span class=p>.</span><span class=n>backgroundColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>GUI</span><span class=p>.</span><span class=n>backgroundColor</span> <span class=p>=</span> <span class=n>property</span><span class=p>.</span><span class=n>boolValue</span> <span class=p>?</span> <span class=n>Color</span><span class=p>.</span><span class=n>green</span> <span class=p>:</span> <span class=n>Color</span><span class=p>.</span><span class=n>red</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æŒ‰é’®æ ·å¼</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUI</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=n>buttonRect</span><span class=p>,</span> <span class=n>property</span><span class=p>.</span><span class=n>boolValue</span> <span class=p>?</span> <span class=s>&#34;ON&#34;</span> <span class=p>:</span> <span class=s>&#34;OFF&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>property</span><span class=p>.</span><span class=n>boolValue</span> <span class=p>=</span> <span class=p>!</span><span class=n>property</span><span class=p>.</span><span class=n>boolValue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUI</span><span class=p>.</span><span class=n>backgroundColor</span> <span class=p>=</span> <span class=n>oldColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=kt>float</span> <span class=n>GetPropertyHeight</span><span class=p>(</span><span class=n>SerializedProperty</span> <span class=n>property</span><span class=p>,</span> <span class=n>GUIContent</span> <span class=n>label</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>EditorGUIUtility</span><span class=p>.</span><span class=n>singleLineHeight</span> <span class=p>+</span> <span class=n>EditorGUIUtility</span><span class=p>.</span><span class=n>standardVerticalSpacing</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>å›åˆ°ç•Œé¢ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿ Event System è¿™ç§åœ°æ–¹ï¼Œä¹Ÿç›´æ¥æ”¹äº†ï¼š</p><p><img alt="Global bool GUI" loading=lazy src=/zh/posts/unity-editor-extensions/Global-bool-GUI.png></p><h3 id=53-hierarchy-ç¾åŒ–>5.3 Hierarchy ç¾åŒ–<a hidden class=anchor aria-hidden=true href=#53-hierarchy-ç¾åŒ–>#</a></h3><p>åˆ©ç”¨ <code>EditorApplication.hierarchyWindowItemOnGUI</code> å¯ä»¥å®ç°ç»˜åˆ¶ <code>Hierarchy</code> çš„æ—¶å€™è¿›è¡Œä¸€äº›è‡ªå®šä¹‰æ“ä½œã€‚</p><p>ä¾‹å¦‚å®ç°ä¸‹é¢çš„å˜è‰²åŠŸèƒ½ï¼š</p><p><img alt="Hierarchy Color Set" loading=lazy src=/zh/posts/unity-editor-extensions/Hierarchy-Color-Set.png></p><p>é…åˆæŒä¹…åŒ–å®ç°æ”¹å˜è‰²å½©åŠŸèƒ½ã€‚</p><p>ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[InitializeOnLoad]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>HierarchyCustomDrawer</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>const</span> <span class=kt>string</span> <span class=n>PrefixName</span> <span class=p>=</span> <span class=s>&#34;:&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// EditorPrefs Key</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>const</span> <span class=kt>string</span> <span class=n>BackgroundColorKey</span> <span class=p>=</span> <span class=s>&#34;HierarchyBackgroundColor&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>const</span> <span class=kt>string</span> <span class=n>TextColorKey</span> <span class=p>=</span> <span class=s>&#34;HierarchyTextColor&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// é»˜è®¤é¢œè‰²</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>Color</span> <span class=n>BackgroundColor</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>magenta</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>Color</span> <span class=n>TextColor</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>white</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=n>HierarchyCustomDrawer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>LoadColors</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorApplication</span><span class=p>.</span><span class=n>hierarchyWindowItemOnGUI</span> <span class=p>-=</span> <span class=n>OnHierarchyGUI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorApplication</span><span class=p>.</span><span class=n>hierarchyWindowItemOnGUI</span> <span class=p>+=</span> <span class=n>OnHierarchyGUI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>LoadColors</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è¯»å–èƒŒæ™¯è‰²</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=n>bgStr</span> <span class=p>=</span> <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>GetString</span><span class=p>(</span><span class=n>BackgroundColorKey</span><span class=p>,</span> <span class=s>&#34;FF00FF&#34;</span><span class=p>);</span> <span class=c1>// é»˜è®¤ç´«è‰²</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(!</span><span class=n>ColorUtility</span><span class=p>.</span><span class=n>TryParseHtmlString</span><span class=p>(</span><span class=s>&#34;#&#34;</span> <span class=p>+</span> <span class=n>bgStr</span><span class=p>,</span> <span class=k>out</span> <span class=n>BackgroundColor</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>BackgroundColor</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>magenta</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è¯»å–æ–‡å­—è‰²</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=n>textStr</span> <span class=p>=</span> <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>GetString</span><span class=p>(</span><span class=n>TextColorKey</span><span class=p>,</span> <span class=s>&#34;FFFFFF&#34;</span><span class=p>);</span> <span class=c1>// é»˜è®¤ç™½è‰²</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(!</span><span class=n>ColorUtility</span><span class=p>.</span><span class=n>TryParseHtmlString</span><span class=p>(</span><span class=s>&#34;#&#34;</span> <span class=p>+</span> <span class=n>textStr</span><span class=p>,</span> <span class=k>out</span> <span class=n>TextColor</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>TextColor</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>white</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=k>void</span> <span class=n>OnHierarchyGUI</span><span class=p>(</span><span class=kt>int</span> <span class=n>instanceID</span><span class=p>,</span> <span class=n>Rect</span> <span class=n>selectionRect</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>GameObject</span> <span class=n>obj</span> <span class=p>=</span> <span class=n>EditorUtility</span><span class=p>.</span><span class=n>InstanceIDToObject</span><span class=p>(</span><span class=n>instanceID</span><span class=p>)</span> <span class=k>as</span> <span class=n>GameObject</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>obj</span> <span class=p>==</span> <span class=kc>null</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>obj</span><span class=p>.</span><span class=n>name</span><span class=p>.</span><span class=n>StartsWith</span><span class=p>(</span><span class=n>PrefixName</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// ç»˜åˆ¶èƒŒæ™¯</span>
</span></span><span class=line><span class=cl>            <span class=n>Rect</span> <span class=n>backgroundRect</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Rect</span><span class=p>(</span><span class=m>0</span><span class=p>,</span> <span class=n>selectionRect</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>Screen</span><span class=p>.</span><span class=n>width</span><span class=p>,</span> <span class=n>selectionRect</span><span class=p>.</span><span class=n>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUI</span><span class=p>.</span><span class=n>DrawRect</span><span class=p>(</span><span class=n>backgroundRect</span><span class=p>,</span> <span class=n>BackgroundColor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// ç»˜åˆ¶æ–‡å­—</span>
</span></span><span class=line><span class=cl>            <span class=kt>string</span> <span class=n>name</span> <span class=p>=</span> <span class=n>obj</span><span class=p>.</span><span class=n>name</span><span class=p>.</span><span class=n>Substring</span><span class=p>(</span><span class=n>PrefixName</span><span class=p>.</span><span class=n>Length</span><span class=p>).</span><span class=n>Trim</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=n>GUIStyle</span> <span class=n>style</span> <span class=p>=</span> <span class=k>new</span> <span class=n>GUIStyle</span><span class=p>(</span><span class=n>EditorStyles</span><span class=p>.</span><span class=n>label</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>alignment</span> <span class=p>=</span> <span class=n>TextAnchor</span><span class=p>.</span><span class=n>MiddleCenter</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>fontStyle</span> <span class=p>=</span> <span class=n>FontStyle</span><span class=p>.</span><span class=n>Bold</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>wordWrap</span> <span class=p>=</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>normal</span> <span class=p>=</span> <span class=p>{</span> <span class=n>textColor</span> <span class=p>=</span> <span class=n>TextColor</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUI</span><span class=p>.</span><span class=n>LabelField</span><span class=p>(</span><span class=n>backgroundRect</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>style</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// èœå•æ‰“å¼€çª—å£</span>
</span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Tools/Hierarchy é«˜äº®è®¾ç½®&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>OpenColorSettings</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>HierarchyColorWindow</span><span class=p>.</span><span class=n>ShowWindow</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>HierarchyColorWindow</span> <span class=p>:</span> <span class=n>EditorWindow</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Color</span> <span class=n>backgroundColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Color</span> <span class=n>textColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>ShowWindow</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>window</span> <span class=p>=</span> <span class=n>GetWindow</span><span class=p>&lt;</span><span class=n>HierarchyColorWindow</span><span class=p>&gt;(</span><span class=s>&#34;Hierarchy é«˜äº®è®¾ç½®&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>window</span><span class=p>.</span><span class=n>minSize</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Vector2</span><span class=p>(</span><span class=m>250</span><span class=p>,</span> <span class=m>100</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>window</span><span class=p>.</span><span class=n>LoadCurrentColors</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>LoadCurrentColors</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>backgroundColor</span> <span class=p>=</span> <span class=n>HierarchyCustomDrawer</span><span class=p>.</span><span class=n>BackgroundColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>textColor</span> <span class=p>=</span> <span class=n>HierarchyCustomDrawer</span><span class=p>.</span><span class=n>TextColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>OnGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;è‡ªå®šä¹‰ Hierarchy é«˜äº®é¢œè‰²&#34;</span><span class=p>,</span> <span class=n>EditorStyles</span><span class=p>.</span><span class=n>boldLabel</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>backgroundColor</span> <span class=p>=</span> <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>ColorField</span><span class=p>(</span><span class=s>&#34;èƒŒæ™¯è‰²&#34;</span><span class=p>,</span> <span class=n>backgroundColor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>textColor</span> <span class=p>=</span> <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>ColorField</span><span class=p>(</span><span class=s>&#34;æ–‡å­—è‰²&#34;</span><span class=p>,</span> <span class=n>textColor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=s>&#34;åº”ç”¨&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// ä¿å­˜åˆ° EditorPrefsï¼ˆå­—ç¬¦ä¸²ï¼‰</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>SetString</span><span class=p>(</span><span class=s>&#34;HierarchyBackgroundColor&#34;</span><span class=p>,</span> <span class=n>ColorUtility</span><span class=p>.</span><span class=n>ToHtmlStringRGBA</span><span class=p>(</span><span class=n>backgroundColor</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorPrefs</span><span class=p>.</span><span class=n>SetString</span><span class=p>(</span><span class=s>&#34;HierarchyTextColor&#34;</span><span class=p>,</span> <span class=n>ColorUtility</span><span class=p>.</span><span class=n>ToHtmlStringRGBA</span><span class=p>(</span><span class=n>textColor</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// æ›´æ–°é™æ€å˜é‡</span>
</span></span><span class=line><span class=cl>            <span class=n>HierarchyCustomDrawer</span><span class=p>.</span><span class=n>BackgroundColor</span> <span class=p>=</span> <span class=n>backgroundColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>HierarchyCustomDrawer</span><span class=p>.</span><span class=n>TextColor</span> <span class=p>=</span> <span class=n>textColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// åˆ·æ–° Hierarchy</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorApplication</span><span class=p>.</span><span class=n>RepaintHierarchyWindow</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=54-è®¾ç½®ç»„ä»¶å›¾æ ‡>5.4 è®¾ç½®ç»„ä»¶å›¾æ ‡<a hidden class=anchor aria-hidden=true href=#54-è®¾ç½®ç»„ä»¶å›¾æ ‡>#</a></h3><p>ä½¿ç”¨ <code>EditorGUIUtility.SetIconForObject</code> æ¥ç»™ä¸€ä¸ªèµ„äº§è®¾ç½®å›¾æ ‡ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯å¯¹ C# æ˜¯ä¸è¡Œçš„ï¼Œé‡æ–°æ‰“å¼€å°±æ²¡äº†ã€‚</p><p>æ­£ç¡®çš„æ–¹æ³•æ˜¯ç”¨ <code>MonoImporter.SetIcon</code> å’Œ <code>monoImporter.SaveAndReimport</code> æ¥æŒä¹…åŒ–ï¼Œè¿™æ ·åŒæ—¶ç»„ä»¶å›¾æ ‡ä¹Ÿæ”¹äº†ã€‚</p><p><img alt="SetIcon Project Window" loading=lazy src=/zh/posts/unity-editor-extensions/SetIcon-Project-Window.png></p><p>ç»„ä»¶ä¸­æ ·å¼ï¼š</p><p><img alt="SetIcon Inspector Window" loading=lazy src=/zh/posts/unity-editor-extensions/SetIcon-Inspector-Window.png></p><p>ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>AssetIconSelectorWindow</span> <span class=p>:</span> <span class=n>EditorWindow</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Texture2D</span> <span class=n>selectedIcon</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [MenuItem(&#34;Tools/Set Asset Icon Window&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>ShowWindow</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>GetWindow</span><span class=p>&lt;</span><span class=n>AssetIconSelectorWindow</span><span class=p>&gt;(</span><span class=s>&#34;Set Asset Icon&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>OnGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Label</span><span class=p>(</span><span class=s>&#34;æ‰¹é‡è®¾ç½®èµ„äº§å›¾æ ‡&#34;</span><span class=p>,</span> <span class=n>EditorStyles</span><span class=p>.</span><span class=n>boldLabel</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è·å–å½“å‰é€‰ä¸­çš„æ‰€æœ‰èµ„äº§</span>
</span></span><span class=line><span class=cl>        <span class=n>Object</span><span class=p>[]</span> <span class=n>selectedAssets</span> <span class=p>=</span> <span class=n>Selection</span><span class=p>.</span><span class=n>objects</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æ˜¾ç¤ºé€‰ä¸­çš„èµ„äº§åˆ—è¡¨</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>selectedAssets</span><span class=p>.</span><span class=n>Length</span> <span class=p>==</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>LabelField</span><span class=p>(</span><span class=s>&#34;æœªé€‰æ‹©èµ„äº§&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>LabelField</span><span class=p>(</span><span class=s>$&#34;é€‰ä¸­ {selectedAssets.Length} ä¸ªèµ„äº§ï¼š&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>foreach</span> <span class=p>(</span><span class=n>Object</span> <span class=n>asset</span> <span class=k>in</span> <span class=n>selectedAssets</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>LabelField</span><span class=p>(</span><span class=s>&#34; - &#34;</span> <span class=p>+</span> <span class=n>asset</span><span class=p>.</span><span class=n>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// é€‰æ‹©å›¾æ ‡</span>
</span></span><span class=line><span class=cl>        <span class=n>selectedIcon</span> <span class=p>=</span> <span class=p>(</span><span class=n>Texture2D</span><span class=p>)</span><span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>ObjectField</span><span class=p>(</span><span class=s>&#34;å›¾æ ‡&#34;</span><span class=p>,</span> <span class=n>selectedIcon</span><span class=p>,</span> <span class=k>typeof</span><span class=p>(</span><span class=n>Texture2D</span><span class=p>),</span> <span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>GUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>(</span><span class=m>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>GUILayout</span><span class=p>.</span><span class=n>Button</span><span class=p>(</span><span class=s>&#34;åº”ç”¨å›¾æ ‡åˆ°é€‰ä¸­èµ„äº§&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>ApplyIcon</span><span class=p>(</span><span class=n>selectedAssets</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=k>void</span> <span class=n>ApplyIcon</span><span class=p>(</span><span class=n>Object</span><span class=p>[]</span> <span class=n>assets</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>assets</span> <span class=p>==</span> <span class=kc>null</span> <span class=p>||</span> <span class=n>assets</span><span class=p>.</span><span class=n>Length</span> <span class=p>==</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorUtility</span><span class=p>.</span><span class=n>DisplayDialog</span><span class=p>(</span><span class=s>&#34;é”™è¯¯&#34;</span><span class=p>,</span> <span class=s>&#34;è¯·å…ˆåœ¨ Project é¢æ¿é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªèµ„äº§&#34;</span><span class=p>,</span> <span class=s>&#34;ç¡®å®š&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>selectedIcon</span> <span class=p>==</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorUtility</span><span class=p>.</span><span class=n>DisplayDialog</span><span class=p>(</span><span class=s>&#34;é”™è¯¯&#34;</span><span class=p>,</span> <span class=s>&#34;è¯·é€‰æ‹©ä¸€ä¸ªå›¾æ ‡&#34;</span><span class=p>,</span> <span class=s>&#34;ç¡®å®š&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>appliedCount</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=n>Object</span> <span class=n>asset</span> <span class=k>in</span> <span class=n>assets</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>string</span> <span class=n>path</span> <span class=p>=</span> <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>GetAssetPath</span><span class=p>(</span><span class=n>asset</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=kt>string</span><span class=p>.</span><span class=n>IsNullOrEmpty</span><span class=p>(</span><span class=n>path</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// æŒä¹…åŒ–è®¾ç½®</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>importer</span> <span class=p>=</span> <span class=n>AssetImporter</span><span class=p>.</span><span class=n>GetAtPath</span><span class=p>(</span><span class=n>path</span><span class=p>)</span> <span class=k>as</span> <span class=n>MonoImporter</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>importer</span> <span class=p>!=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>importer</span><span class=p>.</span><span class=n>SetIcon</span><span class=p>(</span><span class=n>selectedIcon</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>importer</span><span class=p>.</span><span class=n>SaveAndReimport</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=n>appliedCount</span><span class=p>++;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>EditorUtility</span><span class=p>.</span><span class=n>DisplayDialog</span><span class=p>(</span><span class=s>&#34;å®Œæˆ&#34;</span><span class=p>,</span> <span class=s>$&#34;å›¾æ ‡å·²åº”ç”¨åˆ° {appliedCount} ä¸ªèµ„äº§&#34;</span><span class=p>,</span> <span class=s>&#34;ç¡®å®š&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=6-è‡ªå®šä¹‰ç±»å‹>6. è‡ªå®šä¹‰ç±»å‹<a hidden class=anchor aria-hidden=true href=#6-è‡ªå®šä¹‰ç±»å‹>#</a></h2><p>ä¸€ä¸ªæå…¶å¸¸è§çš„éœ€æ±‚ï¼šå¯¼å…¥ä¸€ä¸ªè‡ªå®šä¹‰çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ &ldquo;.vrm&rdquo; ç­‰ã€‚è¿™äº›æ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿ</p><p>è¿™é‡Œä»¥ &ldquo;.hhh&rdquo; ä¸ºä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œåªæœ‰ 2 è¡Œï¼Œç¬¬ä¸€è¡Œè¡¨ç¤º nameï¼Œç¬¬äºŒè¡Œè¡¨ç¤º description ã€‚</p><h3 id=61-scriptableobject>6.1 ScriptableObject<a hidden class=anchor aria-hidden=true href=#61-scriptableobject>#</a></h3><p>å¯¼å…¥çš„æ–‡ä»¶å®é™…ä¸Šä¸Šé¢çš„å¥—äº†ä¸€ä¸ª <code>ScriptableObject</code> æ‰èƒ½æ˜¾ç¤ºï¼Œè¿™é‡Œåˆ›å»º 2 ä¸ª <code>ScriptableObject</code>ï¼Œå°†åˆ†åˆ«ä½œä¸º <code>.hhh</code> çš„ä¸»å¯¹è±¡ï¼Œå’Œéä¸»å¯¹è±¡ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[CreateAssetMenu(fileName = &#34;NewHHHFile&#34;, menuName = &#34;Custom/HHH File&#34;)]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>HHHFile</span> <span class=p>:</span> <span class=n>ScriptableObject</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>nameLine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>descriptionLine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>HHHName</span> <span class=p>:</span> <span class=n>ScriptableObject</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>string</span> <span class=n>nameLine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=62-assetimporter-è§£æ>6.2 AssetImporter è§£æ<a hidden class=anchor aria-hidden=true href=#62-assetimporter-è§£æ>#</a></h3><p>ç„¶ååœ¨æ–‡ä»¶å¯¼å…¥æ—¶ï¼Œé€šè¿‡å†™ <code>ScriptedImporter</code> å¯ä»¥å®ç°è§£æè¿‡ç¨‹ã€‚</p><p>åˆ›å»ºäº† <code>HHHFile</code> å®ä¾‹å¹¶è¯»å– name å’Œ descriptionï¼Œç„¶åå°†è¿™ä¸ªå®ä¾‹è®¾ç½®ä¸ºä¸»å¯¹è±¡ï¼ŒåŒæ—¶è®¾ç½®äº†å›¾æ ‡ã€‚</p><p>åŒæ—¶åˆ›å»ºäº†ä¸€ä¸ª <code>HHHName</code> å®ä¾‹ï¼Œå¹¶è®¾ç½®ä¸ºéä¸»å¯¹è±¡ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor.AssetImporters</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>System.IO</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[ScriptedImporter(1, &#34;hhh&#34;)]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>HHHImporter</span> <span class=p>:</span> <span class=n>ScriptedImporter</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnImportAsset</span><span class=p>(</span><span class=n>AssetImportContext</span> <span class=n>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è¯»å–æ–‡ä»¶å†…å®¹</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span><span class=p>[]</span> <span class=n>lines</span> <span class=p>=</span> <span class=n>File</span><span class=p>.</span><span class=n>ReadAllLines</span><span class=p>(</span><span class=n>ctx</span><span class=p>.</span><span class=n>assetPath</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 1ï¸âƒ£ ä¸»å¯¹è±¡ HHHFile</span>
</span></span><span class=line><span class=cl>        <span class=n>HHHFile</span> <span class=n>mainAsset</span> <span class=p>=</span> <span class=n>ScriptableObject</span><span class=p>.</span><span class=n>CreateInstance</span><span class=p>&lt;</span><span class=n>HHHFile</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>mainAsset</span><span class=p>.</span><span class=n>nameLine</span> <span class=p>=</span> <span class=n>lines</span><span class=p>.</span><span class=n>Length</span> <span class=p>&gt;</span> <span class=m>0</span> <span class=p>?</span> <span class=n>lines</span><span class=p>[</span><span class=m>0</span><span class=p>]</span> <span class=p>:</span> <span class=s>&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>mainAsset</span><span class=p>.</span><span class=n>descriptionLine</span> <span class=p>=</span> <span class=n>lines</span><span class=p>.</span><span class=n>Length</span> <span class=p>&gt;</span> <span class=m>1</span> <span class=p>?</span> <span class=n>lines</span><span class=p>[</span><span class=m>1</span><span class=p>]</span> <span class=p>:</span> <span class=s>&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>ctx</span><span class=p>.</span><span class=n>AddObjectToAsset</span><span class=p>(</span><span class=s>&#34;HHHFile&#34;</span><span class=p>,</span> <span class=n>mainAsset</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>ctx</span><span class=p>.</span><span class=n>SetMainObject</span><span class=p>(</span><span class=n>mainAsset</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®ä¸»å¯¹è±¡å›¾æ ‡</span>
</span></span><span class=line><span class=cl>        <span class=n>Texture2D</span> <span class=n>mainIcon</span> <span class=p>=</span> <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>LoadAssetAtPath</span><span class=p>&lt;</span><span class=n>Texture2D</span><span class=p>&gt;(</span><span class=s>&#34;Assets/Icons/hhh_icon.png&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>mainIcon</span> <span class=p>!=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUIUtility</span><span class=p>.</span><span class=n>SetIconForObject</span><span class=p>(</span><span class=n>mainAsset</span><span class=p>,</span> <span class=n>mainIcon</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 2ï¸âƒ£ éä¸»å¯¹è±¡ HHHName</span>
</span></span><span class=line><span class=cl>        <span class=n>HHHName</span> <span class=n>subAsset</span> <span class=p>=</span> <span class=n>ScriptableObject</span><span class=p>.</span><span class=n>CreateInstance</span><span class=p>&lt;</span><span class=n>HHHName</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=n>subAsset</span><span class=p>.</span><span class=n>nameLine</span> <span class=p>=</span> <span class=n>mainAsset</span><span class=p>.</span><span class=n>nameLine</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>ctx</span><span class=p>.</span><span class=n>AddObjectToAsset</span><span class=p>(</span><span class=n>subAsset</span><span class=p>.</span><span class=n>nameLine</span><span class=p>,</span> <span class=n>subAsset</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¾ç½®éä¸»å¯¹è±¡å›¾æ ‡</span>
</span></span><span class=line><span class=cl>        <span class=n>Texture2D</span> <span class=n>subIcon</span> <span class=p>=</span> <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>LoadAssetAtPath</span><span class=p>&lt;</span><span class=n>Texture2D</span><span class=p>&gt;(</span><span class=s>&#34;Assets/Icons/wrench.png&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>subIcon</span> <span class=p>!=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>EditorGUIUtility</span><span class=p>.</span><span class=n>SetIconForObject</span><span class=p>(</span><span class=n>subAsset</span><span class=p>,</span> <span class=n>subIcon</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>å¯¼å…¥åæ•ˆæœï¼š</p><p><img alt="HHHFile Project File" loading=lazy src=/zh/posts/unity-editor-extensions/HHHFile-Project-File.png></p><p>èƒ½å¤Ÿåœ¨å³ä¾§æŸ¥çœ‹ Inspectorï¼š</p><p><img alt="HHFile Inspector CustomEditor" loading=lazy src=/zh/posts/unity-editor-extensions/HHFile-Inspector-CustomEditor.png></p><p>è¿™é‡Œæ·»åŠ äº†ä¸€ä¸ª Inspector CustomEditorï¼Œå’Œå‰é¢ä»‹ç»çš„ç¾åŒ–æ–¹å¼æ˜¯ä¸€ä¸ªæ„æ€ï¼Œä½œç”¨åªæ˜¯å‘Šè¯‰ä½ è¿™ä¸ª <code>HHHFile</code> ä¸€æ ·æ˜¯å¯ä»¥è‡ªå®šä¹‰ Inspector çš„ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[CustomEditor(typeof(HHHFile))]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>HHHFileInspector</span> <span class=p>:</span> <span class=n>Editor</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>override</span> <span class=k>void</span> <span class=n>OnInspectorGUI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>HHHFile</span> <span class=n>hhh</span> <span class=p>=</span> <span class=p>(</span><span class=n>HHHFile</span><span class=p>)</span><span class=n>target</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>LabelField</span><span class=p>(</span><span class=s>&#34;Name&#34;</span><span class=p>,</span> <span class=n>hhh</span><span class=p>.</span><span class=n>nameLine</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>Space</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>EditorGUILayout</span><span class=p>.</span><span class=n>LabelField</span><span class=p>(</span><span class=s>&#34;Description&#34;</span><span class=p>,</span> <span class=n>hhh</span><span class=p>.</span><span class=n>descriptionLine</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=63-assetpostprocessor>6.3 AssetPostprocessor<a hidden class=anchor aria-hidden=true href=#63-assetpostprocessor>#</a></h3><p>ä»»ä½•èµ„äº§çš„å˜åŠ¨ï¼Œå³å¯¼å…¥ã€åˆ é™¤ã€ç§»åŠ¨ï¼Œéƒ½å¯ä»¥è§¦å‘ <code>OnPostprocessAllAssets</code>ã€‚é€šè¿‡å¯¹è¿™ä¸ªå‡½æ•°çš„ç¼–å†™ï¼Œèƒ½å¤Ÿå®ç°ä¸€äº›åå¤„ç†ï¼Œæ¯”å¦‚è‡ªåŠ¨è®¾ç½®å¯¼å…¥çš„å›¾ç‰‡ä¸º sprite ç­‰ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>System.IO</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>HHHFilePostprocessor</span> <span class=p>:</span> <span class=n>AssetPostprocessor</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=k>void</span> <span class=n>OnPostprocessAllAssets</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span><span class=p>[]</span> <span class=n>importedAssets</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span><span class=p>[]</span> <span class=n>deletedAssets</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span><span class=p>[]</span> <span class=n>movedAssets</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span><span class=p>[]</span> <span class=n>movedFromAssetPaths</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=kt>string</span> <span class=n>path</span> <span class=k>in</span> <span class=n>importedAssets</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// åªå¤„ç† .hhh æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>Path</span><span class=p>.</span><span class=n>GetExtension</span><span class=p>(</span><span class=n>path</span><span class=p>)</span> <span class=p>==</span> <span class=s>&#34;.hhh&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// è¯»å–æ–‡ä»¶å†…å®¹</span>
</span></span><span class=line><span class=cl>                <span class=kt>string</span><span class=p>[]</span> <span class=n>lines</span> <span class=p>=</span> <span class=n>File</span><span class=p>.</span><span class=n>ReadAllLines</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=kt>string</span> <span class=n>nameLine</span> <span class=p>=</span> <span class=n>lines</span><span class=p>.</span><span class=n>Length</span> <span class=p>&gt;</span> <span class=m>0</span> <span class=p>?</span> <span class=n>lines</span><span class=p>[</span><span class=m>0</span><span class=p>]</span> <span class=p>:</span> <span class=s>&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=kt>string</span> <span class=n>descLine</span> <span class=p>=</span> <span class=n>lines</span><span class=p>.</span><span class=n>Length</span> <span class=p>&gt;</span> <span class=m>1</span> <span class=p>?</span> <span class=n>lines</span><span class=p>[</span><span class=m>1</span><span class=p>]</span> <span class=p>:</span> <span class=s>&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=c1>// æ‰“å°æ—¥å¿—</span>
</span></span><span class=line><span class=cl>                <span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>$&#34;[HHHFilePostprocessor] å¯¼å…¥: {path}\nName: {nameLine}\nDescription: {descLine}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>å¯¼å…¥çš„æ—¶å€™å°±ä¼šæ‰“å°è¿™è¡Œä¿¡æ¯ï¼š</p><p><img alt="AssetPostprocessor log" loading=lazy src=/zh/posts/unity-editor-extensions/AssetPostprocessor-log.png></p><h2 id=7-éšæœºé¢œè‰²>7. éšæœºé¢œè‰²<a hidden class=anchor aria-hidden=true href=#7-éšæœºé¢œè‰²>#</a></h2><p>Just For Fun</p><p>ç»™æ–‡ä»¶ä¸€ä¸ªéšæœºçš„é¢œè‰²ï¼Œæ ¹æ®æ–‡ä»¶å Hash å”¯ä¸€ç¡®å®šã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-C# data-lang=C#><span class=line><span class=cl><span class=k>using</span> <span class=nn>System</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEditor</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>UnityEngine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[InitializeOnLoad]</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=k>class</span> <span class=nc>ColorProjectWindowDecorator</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=n>ColorProjectWindowDecorator</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorApplication</span><span class=p>.</span><span class=n>projectWindowItemOnGUI</span> <span class=p>-=</span> <span class=n>OnProjectWindowItemGUI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>EditorApplication</span><span class=p>.</span><span class=n>projectWindowItemOnGUI</span> <span class=p>+=</span> <span class=n>OnProjectWindowItemGUI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>OnProjectWindowItemGUI</span><span class=p>(</span><span class=kt>string</span> <span class=n>guid</span><span class=p>,</span> <span class=n>Rect</span> <span class=n>rect</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=n>path</span> <span class=p>=</span> <span class=n>AssetDatabase</span><span class=p>.</span><span class=n>GUIDToAssetPath</span><span class=p>(</span><span class=n>guid</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// åªé’ˆå¯¹ .cs æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(!</span><span class=n>path</span><span class=p>.</span><span class=n>EndsWith</span><span class=p>(</span><span class=s>&#34;.cs&#34;</span><span class=p>,</span> <span class=n>StringComparison</span><span class=p>.</span><span class=n>OrdinalIgnoreCase</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// æå–æ–‡ä»¶å</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=n>fileName</span> <span class=p>=</span> <span class=n>System</span><span class=p>.</span><span class=n>IO</span><span class=p>.</span><span class=n>Path</span><span class=p>.</span><span class=n>GetFileNameWithoutExtension</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¡ç®—ä¸€ä¸ªç¡®å®šæ€§çš„å“ˆå¸Œå€¼</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>hash</span> <span class=p>=</span> <span class=n>fileName</span><span class=p>.</span><span class=n>GetHashCode</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// å°†å“ˆå¸Œæ˜ å°„åˆ°é¢œè‰²ï¼ˆHSV -&gt; RGBï¼‰</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>hue</span> <span class=p>=</span> <span class=n>Mathf</span><span class=p>.</span><span class=n>Abs</span><span class=p>(</span><span class=n>hash</span> <span class=p>%</span> <span class=m>360</span><span class=p>)</span> <span class=p>/</span> <span class=m>360f</span><span class=p>;</span> <span class=c1>// è‰²ç›¸</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>saturation</span> <span class=p>=</span> <span class=m>0.6f</span> <span class=p>+</span> <span class=p>(</span><span class=n>Mathf</span><span class=p>.</span><span class=n>Abs</span><span class=p>(</span><span class=n>hash</span><span class=p>)</span> <span class=p>%</span> <span class=m>40</span><span class=p>)</span> <span class=p>/</span> <span class=m>100f</span><span class=p>;</span> <span class=c1>// 0.6~1.0</span>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=k>value</span> <span class=p>=</span> <span class=m>0.8f</span><span class=p>;</span> <span class=c1>// äº®åº¦å›ºå®š</span>
</span></span><span class=line><span class=cl>        <span class=n>Color</span> <span class=n>color</span> <span class=p>=</span> <span class=n>Color</span><span class=p>.</span><span class=n>HSVToRGB</span><span class=p>(</span><span class=n>hue</span><span class=p>,</span> <span class=n>saturation</span><span class=p>,</span> <span class=k>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>float</span> <span class=n>size</span> <span class=p>=</span> <span class=n>Math</span><span class=p>.</span><span class=n>Min</span><span class=p>(</span><span class=n>rect</span><span class=p>.</span><span class=n>width</span><span class=p>,</span> <span class=n>rect</span><span class=p>.</span><span class=n>height</span><span class=p>)</span> <span class=p>*</span> <span class=m>0.7f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Rect</span> <span class=n>dotRect</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Rect</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>rect</span><span class=p>.</span><span class=n>x</span> <span class=p>+</span> <span class=n>rect</span><span class=p>.</span><span class=n>width</span> <span class=p>/</span> <span class=m>2f</span> <span class=p>-</span> <span class=n>size</span> <span class=p>/</span> <span class=m>2f</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>rect</span><span class=p>.</span><span class=n>y</span> <span class=p>+</span> <span class=n>rect</span><span class=p>.</span><span class=n>height</span> <span class=p>/</span> <span class=m>2f</span> <span class=p>-</span> <span class=n>size</span> <span class=p>/</span> <span class=m>2f</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>size</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>size</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>DrawCircle</span><span class=p>(</span><span class=n>dotRect</span><span class=p>,</span> <span class=n>color</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=k>void</span> <span class=n>DrawCircle</span><span class=p>(</span><span class=n>Rect</span> <span class=n>rect</span><span class=p>,</span> <span class=n>Color</span> <span class=n>color</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// ç”¨ Handles ç»˜åˆ¶åœ†å½¢ï¼ˆæ¯”æ–¹å½¢æ›´æŸ”å’Œï¼‰</span>
</span></span><span class=line><span class=cl>        <span class=n>Handles</span><span class=p>.</span><span class=n>BeginGUI</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>Color</span> <span class=n>oldColor</span> <span class=p>=</span> <span class=n>Handles</span><span class=p>.</span><span class=n>color</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Handles</span><span class=p>.</span><span class=n>color</span> <span class=p>=</span> <span class=n>color</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Handles</span><span class=p>.</span><span class=n>DrawSolidDisc</span><span class=p>(</span><span class=n>rect</span><span class=p>.</span><span class=n>center</span><span class=p>,</span> <span class=n>Vector3</span><span class=p>.</span><span class=n>forward</span><span class=p>,</span> <span class=n>rect</span><span class=p>.</span><span class=n>width</span> <span class=p>/</span> <span class=m>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Handles</span><span class=p>.</span><span class=n>color</span> <span class=p>=</span> <span class=n>oldColor</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Handles</span><span class=p>.</span><span class=n>EndGUI</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><img alt="color folder" loading=lazy src=/zh/posts/unity-editor-extensions/color-folder.png></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://cronrpc.github.io/zh/tags/unity/>Unity</a></li></ul><nav class=paginav><a class=next href=https://cronrpc.github.io/zh/posts/unity-resources-assetbundles-and-addressables/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>Unity AssetBundles and Addressables</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Unity Editor Extensions on x" href="https://x.com/intent/tweet/?text=Unity%20Editor%20Extensions&amp;url=https%3a%2f%2fcronrpc.github.io%2fzh%2fposts%2funity-editor-extensions%2f&amp;hashtags=Unity"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Unity Editor Extensions on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fcronrpc.github.io%2fzh%2fposts%2funity-editor-extensions%2f&amp;title=Unity%20Editor%20Extensions&amp;summary=Unity%20Editor%20Extensions&amp;source=https%3a%2f%2fcronrpc.github.io%2fzh%2fposts%2funity-editor-extensions%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Unity Editor Extensions on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fcronrpc.github.io%2fzh%2fposts%2funity-editor-extensions%2f&title=Unity%20Editor%20Extensions"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Unity Editor Extensions on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcronrpc.github.io%2fzh%2fposts%2funity-editor-extensions%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Unity Editor Extensions on whatsapp" href="https://api.whatsapp.com/send?text=Unity%20Editor%20Extensions%20-%20https%3a%2f%2fcronrpc.github.io%2fzh%2fposts%2funity-editor-extensions%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Unity Editor Extensions on telegram" href="https://telegram.me/share/url?text=Unity%20Editor%20Extensions&amp;url=https%3a%2f%2fcronrpc.github.io%2fzh%2fposts%2funity-editor-extensions%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Unity Editor Extensions on ycombinator" href="https://news.ycombinator.com/submitlink?t=Unity%20Editor%20Extensions&u=https%3a%2f%2fcronrpc.github.io%2fzh%2fposts%2funity-editor-extensions%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://cronrpc.github.io/zh/>cronrpc ä¸­æ–‡</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="å¤åˆ¶";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>